2016-12-18 09:46:02,217 [6076] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 09:46:02,248 [6076] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 09:46:02,396 [6076] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 09:46:02,428 [6076] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 09:51:18,732 [5720] DEBUG Servicesys_user - 获取实体对象
2016-12-18 09:51:18,738 [5720] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  '1234'and IsEnable =  'True'
2016-12-18 09:51:18,797 [5720] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 09:51:18,846 [5720] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 9:51:18')
2016-12-18 09:51:18,851 [5720] DEBUG Servicemms_project - 获取实体对象
2016-12-18 09:51:18,851 [5720] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 09:51:18,909 [4668] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 09:51:20,019 [5940] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 09:51:27,059 [5720] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 09:51:27,070 [5720] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 09:51:27,070 [5720] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 10:18:56,494 [6064] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:18:56,503 [6064] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:18:56,506 [6064] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:18:56,506 [6064] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:20:05,630 [5116] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 10:20:06,786 [7768] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 10:20:50,006 [7224] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:20:50,033 [7224] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:20:50,044 [7224] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:20:50,050 [7224] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:20:58,246 [5860] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 10:21:00,256 [7308] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 10:31:05,434 [4960] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:31:05,444 [4960] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:31:05,446 [4960] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:31:05,447 [4960] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:31:34,078 [7380] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 10:31:35,275 [5216] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 10:35:21,476 [7224] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:35:21,486 [7224] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:35:21,488 [7224] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:35:21,488 [7224] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:41:51,478 [7320] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:41:51,488 [7320] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:41:51,490 [7320] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 10:41:51,491 [7320] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 11:19:30,197 [8832] DEBUG Servicesys_user - 获取实体对象
2016-12-18 11:19:30,206 [8832] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  '1234'and IsEnable =  'True'
2016-12-18 11:19:30,243 [8832] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 11:19:30,263 [8832] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 11:19:30')
2016-12-18 11:19:30,264 [8832] DEBUG Servicemms_project - 获取实体对象
2016-12-18 11:19:30,266 [8832] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 11:19:30,290 [4720] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 11:19:31,435 [8832] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 11:19:52,927 [9088] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 11:19:52,933 [9088] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 11:19:52,934 [9088] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 11:27:41,597 [8572] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 11:27:41,759 [7596] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 11:27:41,928 [8572] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 11:27:41,929 [8572] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 11:27:41,929 [8572] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 12:34:56,650 [9932] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 12:34:56,656 [9932] DEBUG Servicesys_user - 获取动态列表
2016-12-18 12:34:56,657 [9932] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 12:34:56,658 [9932] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 12:34:56,658 [9932] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 12:34:57,172 [9696] DEBUG Servicesys_role - 获取实体列表
2016-12-18 12:34:57,172 [9696] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 12:36:53,780 [9932] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2016-12-18 12:37:40,717 [9932] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'R3')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'R3')
2016-12-18 12:40:30,099 [2668] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'Guest')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'Guest')
2016-12-18 12:40:46,741 [9260] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'Warehouse')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'Warehouse')
2016-12-18 12:40:54,343 [9260] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'Manage')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'Manage')
2016-12-18 12:41:01,922 [9260] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 12:41:01,947 [9260] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='Manage' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='Manage'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='Manage'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='Manage'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='Manage'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='Manage'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='Manage'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='Manage'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='Manage'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='Manage'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='Manage'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='Manage'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='Manage'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='Manage'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='Manage'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 12:41:01,951 [9696] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 12:41:01,955 [9696] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='Manage' and B.PermissionCode = A.PermissionCode 
2016-12-18 12:41:02,055 [9260] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'Manage'
2016-12-18 12:41:24,892 [9260] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 12:41:24,893 [9260] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='Buy' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='Buy'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='Buy'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='Buy'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='Buy'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='Buy'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='Buy'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='Buy'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='Buy'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='Buy'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='Buy'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='Buy'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='Buy'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='Buy'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='Buy'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 12:41:24,940 [10232] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 12:41:24,940 [10232] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='Buy' and B.PermissionCode = A.PermissionCode 
2016-12-18 12:41:24,964 [9260] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'Buy'
2016-12-18 12:41:31,684 [10232] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 12:41:31,685 [10232] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 12:41:31,715 [9260] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 12:41:31,715 [9260] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 12:41:31,764 [10232] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 12:42:56,773 [10152] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 12:42:57,459 [9696] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 12:42:57,461 [9696] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 12:43:20,783 [10232] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/code/Index','/Sys/code')
2016-12-18 12:43:21,372 [9696] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 12:43:21,372 [9696] DEBUG Sys - select sys_codeType.* from sys_codeType order by Seq,CodeType
2016-12-18 12:43:21,489 [9260] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:43:21,490 [9260] DEBUG Sys - select top 20 sys_code.* from sys_code order by Seq
2016-12-18 12:43:21,509 [9260] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:44:47,955 [9696] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:44:47,955 [9696] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'ImagePart' order by Seq
2016-12-18 12:44:47,956 [9696] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'ImagePart' ) tb_temp
2016-12-18 12:44:49,766 [10232] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:44:49,766 [10232] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'StockState' order by Seq
2016-12-18 12:44:49,769 [10232] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'StockState' ) tb_temp
2016-12-18 12:44:51,867 [9696] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:44:51,867 [9696] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'aaa' order by Seq
2016-12-18 12:44:51,869 [9696] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'aaa' ) tb_temp
2016-12-18 12:44:53,191 [10232] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:44:53,191 [10232] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'BillingUnit' order by Seq
2016-12-18 12:44:53,192 [10232] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'BillingUnit' ) tb_temp
2016-12-18 12:44:58,370 [9260] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:44:58,370 [9260] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'Education' order by Seq
2016-12-18 12:44:58,372 [9260] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'Education' ) tb_temp
2016-12-18 12:44:59,698 [9696] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:44:59,698 [9696] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PartAttr' order by Seq
2016-12-18 12:44:59,700 [9696] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PartAttr' ) tb_temp
2016-12-18 12:45:34,295 [9696] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 12:45:34,295 [9696] DEBUG Sys - select top 10 sys_codeType.* from sys_codeType order by Seq,CodeType
2016-12-18 12:45:34,299 [9696] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2016-12-18 12:45:40,084 [9696] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 12:45:40,085 [9696] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_codeType.*, row_number() over (order by Seq,CodeType) as FLUENTDATA_ROWNUMBER
									 from sys_codeType
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 11 and 20
2016-12-18 12:45:40,119 [9696] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2016-12-18 12:45:41,350 [5648] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 12:45:41,350 [5648] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_codeType.*, row_number() over (order by Seq,CodeType) as FLUENTDATA_ROWNUMBER
									 from sys_codeType
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 30
2016-12-18 12:45:41,352 [5648] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2016-12-18 12:45:46,079 [5648] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 12:45:46,080 [5648] DEBUG Sys - select top 10 sys_codeType.* from sys_codeType order by Seq,CodeType
2016-12-18 12:45:46,082 [5648] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2016-12-18 12:45:48,009 [9696] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 12:45:48,009 [9696] DEBUG Sys - select top 10 sys_codeType.* from sys_codeType order by Seq,CodeType
2016-12-18 12:45:48,010 [9696] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2016-12-18 12:45:50,428 [5648] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:45:50,428 [5648] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PersonType' order by Seq
2016-12-18 12:45:50,429 [5648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PersonType' ) tb_temp
2016-12-18 12:45:52,415 [9696] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:45:52,416 [9696] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'Sex' order by Seq
2016-12-18 12:45:52,417 [9696] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'Sex' ) tb_temp
2016-12-18 12:45:53,824 [5648] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:45:53,824 [5648] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'MaterialUse' order by Seq
2016-12-18 12:45:53,826 [5648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'MaterialUse' ) tb_temp
2016-12-18 12:45:55,048 [9672] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:45:55,048 [9672] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'KeyProjects' order by Seq
2016-12-18 12:45:55,049 [9672] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'KeyProjects' ) tb_temp
2016-12-18 12:45:56,427 [9696] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:45:56,427 [9696] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'FundSource' order by Seq
2016-12-18 12:45:56,429 [9696] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'FundSource' ) tb_temp
2016-12-18 12:45:57,813 [5648] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:45:57,813 [5648] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'BusinessType' order by Seq
2016-12-18 12:45:57,814 [5648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'BusinessType' ) tb_temp
2016-12-18 12:45:59,278 [10232] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:45:59,278 [10232] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'QualificationLevel' order by Seq
2016-12-18 12:45:59,280 [10232] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'QualificationLevel' ) tb_temp
2016-12-18 12:46:00,542 [9560] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:00,543 [9560] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'BuildingCategories' order by Seq
2016-12-18 12:46:00,544 [9560] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'BuildingCategories' ) tb_temp
2016-12-18 12:46:02,580 [5648] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:02,580 [5648] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'area' order by Seq
2016-12-18 12:46:02,582 [5648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'area' ) tb_temp
2016-12-18 12:46:04,171 [9560] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:04,171 [9560] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'QualityRequire' order by Seq
2016-12-18 12:46:04,174 [9560] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'QualityRequire' ) tb_temp
2016-12-18 12:46:11,781 [9696] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:11,781 [9696] DEBUG Sys - select top 20 sys_code.* from sys_code order by Seq
2016-12-18 12:46:11,784 [9696] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:25,832 [9672] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:25,832 [9672] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 40
2016-12-18 12:46:25,839 [9672] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:29,774 [5648] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:29,774 [5648] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 41 and 60
2016-12-18 12:46:29,778 [5648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:30,876 [9672] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:30,877 [9672] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 61 and 80
2016-12-18 12:46:30,881 [9672] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:31,900 [5648] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:31,901 [5648] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 81 and 100
2016-12-18 12:46:31,904 [5648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:32,702 [9672] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:32,702 [9672] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 101 and 120
2016-12-18 12:46:32,705 [9672] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:34,844 [10232] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:34,845 [10232] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 81 and 100
2016-12-18 12:46:34,847 [10232] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:35,444 [5648] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:35,445 [5648] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 61 and 80
2016-12-18 12:46:35,447 [5648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:35,781 [9672] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:35,782 [9672] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 41 and 60
2016-12-18 12:46:35,784 [9672] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:35,990 [9696] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:35,990 [9696] DEBUG Sys - with PagedPersons as
								(
									select top 100 percent sys_code.*, row_number() over (order by Seq) as FLUENTDATA_ROWNUMBER
									 from sys_code
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 40
2016-12-18 12:46:35,992 [9696] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:36,217 [10232] DEBUG Servicesys_code - 获取实体列表
2016-12-18 12:46:36,217 [10232] DEBUG Sys - select top 20 sys_code.* from sys_code order by Seq
2016-12-18 12:46:36,218 [10232] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 12:46:47,333 [5648] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 12:46:47,937 [9696] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 12:46:47,938 [9696] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 12:51:13,394 [9672] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2016-12-18 12:51:13,926 [5648] DEBUG Servicemms_merchantsType - 获取动态列表
2016-12-18 12:51:13,928 [5648] DEBUG Mms - select mms_merchantsType.* from mms_merchantsType order by MerchantsTypeCode
2016-12-18 12:51:13,944 [9696] DEBUG Servicemms_merchants - 获取实体列表
2016-12-18 12:51:13,947 [9696] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2016-12-18 12:51:13,983 [9696] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2016-12-18 12:51:17,759 [9608] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/project/Index','/Mms/project')
2016-12-18 12:51:17,768 [9608] DEBUG Servicemms_project - 获取实体对象
2016-12-18 12:51:17,768 [9608] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 12:51:17,776 [9608] DEBUG Servicemms_project - 获取上一条下一条数据
2016-12-18 12:51:17,787 [9608] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:17,788 [9608] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode =  '201306030001' order by ProjectCode
2016-12-18 12:51:17,796 [9608] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:17,796 [9608] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode < '201306030001'and ProjectCode =  '201306030001' order by ProjectCode desc
2016-12-18 12:51:17,797 [9608] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:17,797 [9608] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode >  '201306030001'and ProjectCode =  '201306030001' order by ProjectCode
2016-12-18 12:51:17,799 [9608] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:17,799 [9608] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode =  '201306030001' order by ProjectCode desc
2016-12-18 12:51:17,811 [9608] DEBUG Servicesys_code - 获取动态列表
2016-12-18 12:51:17,811 [9608] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PartAttr'
2016-12-18 12:51:17,812 [9608] DEBUG Servicesys_code - 获取动态列表
2016-12-18 12:51:17,812 [9608] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'ImagePart'
2016-12-18 12:51:18,822 [7996] DEBUG Servicemms_project - 获取动态列表
2016-12-18 12:51:18,822 [7996] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2016-12-18 12:51:18,837 [9696] DEBUG Servicemms_buildPart - 获取实体列表
2016-12-18 12:51:18,838 [9696] DEBUG Mms - select mms_buildPart.* from mms_buildPart where  ProjectCode =  '201306030001'
2016-12-18 12:51:19,096 [6792] DEBUG Servicemms_project - 获取实体对象
2016-12-18 12:51:19,096 [6792] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 12:51:19,097 [6792] DEBUG Servicemms_project - 获取上一条下一条数据
2016-12-18 12:51:19,097 [6792] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:19,097 [6792] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode =  '201306030001' order by ProjectCode
2016-12-18 12:51:19,098 [6792] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:19,098 [6792] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode < '201306030001'and ProjectCode =  '201306030001' order by ProjectCode desc
2016-12-18 12:51:19,098 [6792] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:19,098 [6792] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode >  '201306030001'and ProjectCode =  '201306030001' order by ProjectCode
2016-12-18 12:51:19,098 [6792] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:19,098 [6792] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode =  '201306030001' order by ProjectCode desc
2016-12-18 12:51:33,356 [7996] DEBUG Servicemms_buildPart - 获取实体列表
2016-12-18 12:51:33,356 [7996] DEBUG Mms - select mms_buildPart.* from mms_buildPart where  ProjectCode =  '201306030002'
2016-12-18 12:51:33,373 [9696] DEBUG Servicemms_project - 获取实体对象
2016-12-18 12:51:33,373 [9696] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030002'
2016-12-18 12:51:33,377 [9696] DEBUG Servicemms_project - 获取上一条下一条数据
2016-12-18 12:51:33,377 [9696] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:33,377 [9696] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode =  '201306030002' order by ProjectCode
2016-12-18 12:51:33,378 [9696] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:33,378 [9696] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode < '201306030002'and ProjectCode =  '201306030002' order by ProjectCode desc
2016-12-18 12:51:33,378 [9696] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:33,378 [9696] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode >  '201306030002'and ProjectCode =  '201306030002' order by ProjectCode
2016-12-18 12:51:33,379 [9696] DEBUG Servicemms_project - 获取字段
2016-12-18 12:51:33,379 [9696] DEBUG Mms - select top 1 ProjectCode from mms_project where  ProjectCode =  '201306030002' order by ProjectCode desc
2016-12-18 14:36:57,719 [7460] DEBUG Servicesys_menu - 编辑记录
2016-12-18 14:36:57,726 [7460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:36:57,732 [7460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9961'
2016-12-18 14:36:57,739 [7460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '员工编辑', [MenuCode] = '9961', [ParentCode] = '98', [IconClass] = '', [URL] = '/mms/staff/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:36:57' where  MenuCode =  '9961'
2016-12-18 14:36:57,765 [7460] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[],"updated":[{"_id":"9961","MenuName":"员工编辑","MenuCode":"9961","ParentCode":"98","IconClass":"","URL":"/mms/staff/edit","IsVisible":"true","IsEnable":"true","MenuSeq":""}],"_changed":true}}','2016/12/18 14:36:57')
2016-12-18 14:36:57,859 [8888] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:36:57,859 [8888] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:37:19,442 [8888] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 14:37:19,673 [7460] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:37:19,673 [7460] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:39:10,754 [7460] DEBUG Servicesys_menu - 编辑记录
2016-12-18 14:39:10,754 [7460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:39:10,754 [7460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '01'
2016-12-18 14:39:10,755 [7460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '仓库管理', [MenuCode] = '01', [ParentCode] = '', [IconClass] = 'icon-application_home', [URL] = '#', [IsVisible] = 'false', [IsEnable] = 'true', [MenuSeq] = '10', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:39:10' where  MenuCode =  '01'
2016-12-18 14:39:10,759 [7460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:39:10,759 [7460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0102'
2016-12-18 14:39:10,759 [7460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '收货管理', [MenuCode] = '0102', [ParentCode] = '01', [IconClass] = 'icon-brick_add', [URL] = '/psi/receive', [IsVisible] = 'false', [IsEnable] = 'true', [MenuSeq] = '1020', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:39:10' where  MenuCode =  '0102'
2016-12-18 14:39:10,762 [7460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:39:10,763 [7460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0103'
2016-12-18 14:39:10,763 [7460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '领货管理', [MenuCode] = '0103', [ParentCode] = '01', [IconClass] = 'icon-cart_remove', [URL] = '/psi/picking', [IsVisible] = 'false', [IsEnable] = 'true', [MenuSeq] = '1030', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:39:10' where  MenuCode =  '0103'
2016-12-18 14:39:10,767 [7460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:39:10,768 [7460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0104'
2016-12-18 14:39:10,770 [7460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '退还管理', [MenuCode] = '0104', [ParentCode] = '01', [IconClass] = 'icon-cart_put', [URL] = '/psi/return', [IsVisible] = 'false', [IsEnable] = 'true', [MenuSeq] = '1040', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:39:10' where  MenuCode =  '0104'
2016-12-18 14:39:10,776 [7460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:39:10,776 [7460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0106'
2016-12-18 14:39:10,776 [7460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '库存管理', [MenuCode] = '0106', [ParentCode] = '01', [IconClass] = 'icon-table_row', [URL] = '/psi/warehouse/stock', [IsVisible] = 'false', [IsEnable] = 'true', [MenuSeq] = '1050', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:39:10' where  MenuCode =  '0106'
2016-12-18 14:39:10,783 [7460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:39:10,783 [7460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0107'
2016-12-18 14:39:10,784 [7460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '采购计划', [MenuCode] = '0107', [ParentCode] = '01', [IconClass] = '', [URL] = '', [IsVisible] = 'false', [IsEnable] = 'true', [MenuSeq] = '1060', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:39:10' where  MenuCode =  '0107'
2016-12-18 14:39:10,790 [7460] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[],"updated":[{"_id":"01","MenuName":"仓库管理","MenuCode":"01","ParentCode":"","IconClass":"icon-application_home","URL":"#","IsVisible":"false","IsEnable":"true","MenuSeq":"10"},{"_id":"0102","MenuName":"收货管理","MenuCode":"0102","ParentCode":"01","IconClass":"icon-brick_add","URL":"/psi/receive","IsVisible":"false","IsEnable":"true","MenuSeq":"1020"},{"_id":"0103","MenuName":"领货管理","MenuCode":"0103","ParentCode":"01","IconClass":"icon-cart_remove","URL":"/psi/picking","IsVisible":"false","IsEnable":"true","MenuSeq":"1030"},{"_id":"0104","MenuName":"退还管理","MenuCode":"0104","ParentCode":"01","IconClass":"icon-cart_put","URL":"/psi/return","IsVisible":"false","IsEnable":"true","MenuSeq":"1040"},{"_id":"0106","MenuName":"库存管理","MenuCode":"0106","ParentCode":"01","IconClass":"icon-table_row","URL":"/psi/warehouse/stock","IsVisible":"false","IsEnable":"true","MenuSeq":"1050"},{"_id":"0107","MenuName":"采购计划","MenuCode":"0107","ParentCode":"01","IconClass":"","URL":"","IsVisible":"false","IsEnable":"true","MenuSeq":"1060"}],"_changed":true}}','2016/12/18 14:39:10')
2016-12-18 14:39:10,934 [8516] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:39:10,935 [8516] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:41:11,784 [8460] DEBUG Servicesys_menu - 编辑记录
2016-12-18 14:41:11,784 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,784 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '01'
2016-12-18 14:41:11,785 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '仓库管理', [MenuCode] = '01', [ParentCode] = '', [IconClass] = 'icon-application_home', [URL] = '#', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '10', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '01'
2016-12-18 14:41:11,789 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,789 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0102'
2016-12-18 14:41:11,789 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '收货管理', [MenuCode] = '0102', [ParentCode] = '01', [IconClass] = 'icon-brick_add', [URL] = '/psi/receive', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '1020', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0102'
2016-12-18 14:41:11,793 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,793 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0103'
2016-12-18 14:41:11,801 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '领货管理', [MenuCode] = '0103', [ParentCode] = '01', [IconClass] = 'icon-cart_remove', [URL] = '/psi/picking', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '1030', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0103'
2016-12-18 14:41:11,805 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,805 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0104'
2016-12-18 14:41:11,807 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '退还管理', [MenuCode] = '0104', [ParentCode] = '01', [IconClass] = 'icon-cart_put', [URL] = '/psi/return', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '1040', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0104'
2016-12-18 14:41:11,811 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,811 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0106'
2016-12-18 14:41:11,811 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '库存管理', [MenuCode] = '0106', [ParentCode] = '01', [IconClass] = 'icon-table_row', [URL] = '/psi/warehouse/stock', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '1050', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0106'
2016-12-18 14:41:11,815 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,815 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0107'
2016-12-18 14:41:11,815 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '采购计划', [MenuCode] = '0107', [ParentCode] = '01', [IconClass] = '', [URL] = '', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '1060', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0107'
2016-12-18 14:41:11,819 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,819 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '1019'
2016-12-18 14:41:11,820 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '采购明细', [MenuCode] = '1019', [ParentCode] = '10', [IconClass] = '', [URL] = '/psi/purchase/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '1019'
2016-12-18 14:41:11,826 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,826 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100101'
2016-12-18 14:41:11,826 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料发料单明细', [MenuCode] = '100101', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/send/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '200', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100101'
2016-12-18 14:41:11,829 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,830 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100201'
2016-12-18 14:41:11,830 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料收料单明细', [MenuCode] = '100201', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/receive/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '210', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100201'
2016-12-18 14:41:11,833 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,834 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100312'
2016-12-18 14:41:11,834 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料停租单明细', [MenuCode] = '100312', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/rentoff/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '220', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100312'
2016-12-18 14:41:11,838 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,838 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100401'
2016-12-18 14:41:11,838 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料盘点单明细', [MenuCode] = '100401', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/check/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '230', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100401'
2016-12-18 14:41:11,842 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,843 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100501'
2016-12-18 14:41:11,843 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料维修单明细', [MenuCode] = '100501', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/repair/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '240', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100501'
2016-12-18 14:41:11,846 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,846 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100601'
2016-12-18 14:41:11,847 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料调拨单明细', [MenuCode] = '100601', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/transfer/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '250', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100601'
2016-12-18 14:41:11,850 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,850 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100701'
2016-12-18 14:41:11,851 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料报损单明细', [MenuCode] = '100701', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/lossreport/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '260', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100701'
2016-12-18 14:41:11,854 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,854 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100801'
2016-12-18 14:41:11,854 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料处置单明细', [MenuCode] = '100801', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/deal/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '270', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100801'
2016-12-18 14:41:11,857 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,858 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '100901'
2016-12-18 14:41:11,858 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '直入直出明细', [MenuCode] = '100901', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/direct/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '280', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '100901'
2016-12-18 14:41:11,861 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,861 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '101001'
2016-12-18 14:41:11,861 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料退库单明细', [MenuCode] = '101001', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/refund/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '290', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '101001'
2016-12-18 14:41:11,865 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,865 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '101101'
2016-12-18 14:41:11,865 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '租赁进场单明细', [MenuCode] = '101101', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/rentin/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '300', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '101101'
2016-12-18 14:41:11,868 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,868 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '101201'
2016-12-18 14:41:11,868 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '租赁出场单明细', [MenuCode] = '101201', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/rentout/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '310', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '101201'
2016-12-18 14:41:11,872 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,872 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '101301'
2016-12-18 14:41:11,872 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '材料退货单明细', [MenuCode] = '101301', [ParentCode] = '10', [IconClass] = '', [URL] = '/mms/return/edit', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '320', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '101301'
2016-12-18 14:41:11,875 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,875 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '03'
2016-12-18 14:41:11,876 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '基础信息', [MenuCode] = '03', [ParentCode] = '', [IconClass] = 'icon-book', [URL] = '', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '40', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '03'
2016-12-18 14:41:11,878 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,878 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0301'
2016-12-18 14:41:11,880 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '客户信息', [MenuCode] = '0301', [ParentCode] = '03', [IconClass] = ' icon-page', [URL] = '/psi/customer', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0301'
2016-12-18 14:41:11,882 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,882 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0302'
2016-12-18 14:41:11,882 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '供应商信息', [MenuCode] = '0302', [ParentCode] = '03', [IconClass] = ' icon-page', [URL] = '/psi/supplier', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0302'
2016-12-18 14:41:11,886 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,886 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0303'
2016-12-18 14:41:11,886 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '货物字典', [MenuCode] = '0303', [ParentCode] = '03', [IconClass] = ' icon-page', [URL] = '/psi/goods', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0303'
2016-12-18 14:41:11,888 [8460] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:41:11,888 [8460] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0304'
2016-12-18 14:41:11,890 [8460] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '仓库信息', [MenuCode] = '0304', [ParentCode] = '03', [IconClass] = ' icon-page', [URL] = '/psi/warehouse', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:41:11' where  MenuCode =  '0304'
2016-12-18 14:41:11,893 [8460] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[],"updated":[{"_id":"01","MenuName":"仓库管理","MenuCode":"01","ParentCode":"","IconClass":"icon-application_home","URL":"#","IsVisible":"true","IsEnable":"true","MenuSeq":"10"},{"_id":"0102","MenuName":"收货管理","MenuCode":"0102","ParentCode":"01","IconClass":"icon-brick_add","URL":"/psi/receive","IsVisible":"true","IsEnable":"true","MenuSeq":"1020"},{"_id":"0103","MenuName":"领货管理","MenuCode":"0103","ParentCode":"01","IconClass":"icon-cart_remove","URL":"/psi/picking","IsVisible":"true","IsEnable":"true","MenuSeq":"1030"},{"_id":"0104","MenuName":"退还管理","MenuCode":"0104","ParentCode":"01","IconClass":"icon-cart_put","URL":"/psi/return","IsVisible":"true","IsEnable":"true","MenuSeq":"1040"},{"_id":"0106","MenuName":"库存管理","MenuCode":"0106","ParentCode":"01","IconClass":"icon-table_row","URL":"/psi/warehouse/stock","IsVisible":"true","IsEnable":"true","MenuSeq":"1050"},{"_id":"0107","MenuName":"采购计划","MenuCode":"0107","ParentCode":"01","IconClass":"","URL":"","IsVisible":"true","IsEnable":"true","MenuSeq":"1060"},{"_id":"1019","MenuName":"采购明细","MenuCode":"1019","ParentCode":"10","IconClass":"","URL":"/psi/purchase/edit","IsVisible":"true","IsEnable":"true","MenuSeq":""},{"_id":"100101","MenuName":"材料发料单明细","MenuCode":"100101","ParentCode":"10","IconClass":"","URL":"/mms/send/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"200"},{"_id":"100201","MenuName":"材料收料单明细","MenuCode":"100201","ParentCode":"10","IconClass":"","URL":"/mms/receive/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"210"},{"_id":"100312","MenuName":"材料停租单明细","MenuCode":"100312","ParentCode":"10","IconClass":"","URL":"/mms/rentoff/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"220"},{"_id":"100401","MenuName":"材料盘点单明细","MenuCode":"100401","ParentCode":"10","IconClass":"","URL":"/mms/check/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"230"},{"_id":"100501","MenuName":"材料维修单明细","MenuCode":"100501","ParentCode":"10","IconClass":"","URL":"/mms/repair/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"240"},{"_id":"100601","MenuName":"材料调拨单明细","MenuCode":"100601","ParentCode":"10","IconClass":"","URL":"/mms/transfer/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"250"},{"_id":"100701","MenuName":"材料报损单明细","MenuCode":"100701","ParentCode":"10","IconClass":"","URL":"/mms/lossreport/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"260"},{"_id":"100801","MenuName":"材料处置单明细","MenuCode":"100801","ParentCode":"10","IconClass":"","URL":"/mms/deal/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"270"},{"_id":"100901","MenuName":"直入直出明细","MenuCode":"100901","ParentCode":"10","IconClass":"","URL":"/mms/direct/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"280"},{"_id":"101001","MenuName":"材料退库单明细","MenuCode":"101001","ParentCode":"10","IconClass":"","URL":"/mms/refund/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"290"},{"_id":"101101","MenuName":"租赁进场单明细","MenuCode":"101101","ParentCode":"10","IconClass":"","URL":"/mms/rentin/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"300"},{"_id":"101201","MenuName":"租赁出场单明细","MenuCode":"101201","ParentCode":"10","IconClass":"","URL":"/mms/rentout/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"310"},{"_id":"101301","MenuName":"材料退货单明细","MenuCode":"101301","ParentCode":"10","IconClass":"","URL":"/mms/return/edit","IsVisible":"true","IsEnable":"true","MenuSeq":"320"},{"_id":"03","MenuName":"基础信息","MenuCode":"03","ParentCode":"","IconClass":"icon-book","URL":"","IsVisible":"true","IsEnable":"true","MenuSeq":"40"},{"_id":"0301","MenuName":"客户信息","MenuCode":"0301","ParentCode":"03","IconClass":" icon-page","URL":"/psi/customer","IsVisible":"true","IsEnable":"true","MenuSeq":""},{"_id":"0302","MenuName":"供应商信息","MenuCode":"0302","ParentCode":"03","IconClass":" icon-page","URL":"/psi/supplier","IsVisible":"true","IsEnable":"true","MenuSeq":""},{"_id":"0303","MenuName":"货物字典","MenuCode":"0303","ParentCode":"03","IconClass":" icon-page","URL":"/psi/goods","IsVisible":"true","IsEnable":"true","MenuSeq":""},{"_id":"0304","MenuName":"仓库信息","MenuCode":"0304","ParentCode":"03","IconClass":" icon-page","URL":"/psi/warehouse","IsVisible":"true","IsEnable":"true","MenuSeq":""}],"_changed":true}}','2016/12/18 14:41:11')
2016-12-18 14:41:12,078 [3416] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:41:12,078 [3416] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:41:14,616 [8516] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 14:41:14,842 [8460] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:41:14,842 [8460] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:41:19,450 [3416] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 14:41:19,655 [8460] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 14:41:19,817 [3416] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 14:41:20,161 [8460] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:41:20,161 [8460] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:44:26,031 [3416] DEBUG Servicesys_menu - 编辑记录
2016-12-18 14:44:26,031 [3416] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:44:26,032 [3416] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9930'
2016-12-18 14:44:26,032 [3416] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '测试页面', [MenuCode] = '9930', [ParentCode] = '10', [IconClass] = 'icon-anchor', [URL] = '/mms/productTest', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:44:26' where  MenuCode =  '9930'
2016-12-18 14:44:26,037 [3416] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[],"updated":[{"_id":"9930","MenuName":"测试页面","MenuCode":"9930","ParentCode":"10","IconClass":"icon-anchor","URL":"/mms/productTest","IsVisible":"true","IsEnable":"true","MenuSeq":""}],"_changed":true}}','2016/12/18 14:44:26')
2016-12-18 14:44:26,131 [8460] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:44:26,131 [8460] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:46:31,883 [8516] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 14:46:31,886 [8516] DEBUG Servicesys_user - 获取动态列表
2016-12-18 14:46:31,886 [8516] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 14:46:31,887 [8516] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 14:46:31,887 [8516] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 14:46:32,110 [8460] DEBUG Servicesys_role - 获取实体列表
2016-12-18 14:46:32,111 [8460] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 14:46:55,342 [9288] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '0102' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 14:47:00,137 [9108] DEBUG Servicesys_button - 获取实体列表
2016-12-18 14:47:00,137 [9108] DEBUG Sys - select sys_button.* from sys_button order by ButtonSeq
2016-12-18 14:48:27,368 [1664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 14:48:27,372 [1664] DEBUG Servicesys_user - 获取动态列表
2016-12-18 14:48:27,372 [1664] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 14:48:27,373 [1664] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 14:48:27,373 [1664] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 14:48:27,603 [1664] DEBUG Servicesys_role - 获取实体列表
2016-12-18 14:48:27,603 [1664] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 14:48:30,181 [9288] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 14:48:30,182 [9288] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 14:48:30,207 [9288] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 14:48:30,224 [1664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 14:48:30,224 [1664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 14:50:47,065 [8460] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Psi/receive/Index','/Psi/receive')
2016-12-18 14:50:47,077 [8460] DEBUG Servicepsi_warehouse - 获取动态列表
2016-12-18 14:50:47,077 [8460] ERROR Servicepsi_warehouse - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 14:50:47,124 [8460] ERROR /psi/receive - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Areas.Psi.Controllers.ReceiveController.Index() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\ReceiveController.cs:行号 17
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2016-12-18 14:51:09,144 [8460] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Psi/picking/Index','/Psi/picking')
2016-12-18 14:51:09,154 [8460] DEBUG Servicepsi_warehouse - 获取动态列表
2016-12-18 14:51:09,154 [8460] ERROR Servicepsi_warehouse - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 14:51:09,163 [8460] ERROR /psi/picking - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Areas.Psi.Controllers.PickingController.Index() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\PickingController.cs:行号 17
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2016-12-18 14:51:45,229 [10044] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Psi/purchase/edit')
2016-12-18 14:51:45,244 [10044] DEBUG Servicepsi_purchase - 获取动态对象
2016-12-18 14:51:45,244 [10044] ERROR Servicepsi_purchase - 获取动态对象失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass75.<GetDynamic>b__74() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 14:51:45,253 [10044] ERROR /psi/purchase/edit - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Areas.Psi.Controllers.PurchaseApiController.GetEditMaster(String id) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\PurchaseController.cs:行号 185
   在 Zephyr.Areas.Psi.Controllers.PurchaseController.Edit(String id) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\PurchaseController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2016-12-18 14:51:55,266 [1664] DEBUG Servicesys_menu - 编辑记录
2016-12-18 14:51:55,267 [1664] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:51:55,267 [1664] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0102'
2016-12-18 14:51:55,267 [1664] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '收货管理', [MenuCode] = '0102', [ParentCode] = '01', [IconClass] = 'icon-brick_add', [URL] = '/psi/receive', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '1020', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:51:55' where  MenuCode =  '0102'
2016-12-18 14:51:55,268 [1664] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:51:55,268 [1664] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '1019'
2016-12-18 14:51:55,268 [1664] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '采购明细', [MenuCode] = '1019', [ParentCode] = '10', [IconClass] = '', [URL] = '/psi/purchase/edit', [IsVisible] = 'false', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2016/12/18 14:51:55' where  MenuCode =  '1019'
2016-12-18 14:51:55,273 [1664] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[],"updated":[{"_id":"0102","MenuName":"收货管理","MenuCode":"0102","ParentCode":"01","IconClass":"icon-brick_add","URL":"/psi/receive","IsVisible":"true","IsEnable":"true","MenuSeq":"1020"},{"_id":"1019","MenuName":"采购明细","MenuCode":"1019","ParentCode":"10","IconClass":"","URL":"/psi/purchase/edit","IsVisible":"false","IsEnable":"true","MenuSeq":""}],"_changed":true}}','2016/12/18 14:51:55')
2016-12-18 14:51:55,385 [4036] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:51:55,385 [4036] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:51:57,934 [10044] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 14:51:58,123 [9288] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 14:51:58,321 [1664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 14:51:58,799 [9288] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:51:58,799 [9288] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:54:44,682 [1664] DEBUG Servicesys_user - 获取实体对象
2016-12-18 14:54:44,682 [1664] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  ' admin'and Password =  '1234'and IsEnable =  'True'
2016-12-18 14:55:13,115 [4036] DEBUG Servicesys_user - 获取实体对象
2016-12-18 14:55:13,115 [4036] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'admin'and Password =  '1234'and IsEnable =  'True'
2016-12-18 14:55:13,117 [4036] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2016-12-18 14:55:13,119 [4036] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 14:55:13')
2016-12-18 14:55:13,120 [4036] DEBUG Servicemms_project - 获取实体对象
2016-12-18 14:55:13,122 [4036] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 14:55:13,137 [2056] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2016-12-18 14:55:13,261 [6852] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 14:55:30,016 [1664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 14:55:30,311 [8152] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:55:30,311 [8152] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:55:46,247 [2056] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 14:55:46,251 [2056] DEBUG Servicesys_user - 获取动态列表
2016-12-18 14:55:46,251 [2056] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 14:55:46,254 [2056] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 14:55:46,254 [2056] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 14:55:46,433 [1664] DEBUG Servicesys_role - 获取实体列表
2016-12-18 14:55:46,433 [1664] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 14:55:56,209 [2056] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 14:55:56,209 [2056] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 14:55:56,234 [2056] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 14:55:56,249 [1664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 14:55:56,249 [1664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 14:56:02,419 [2056] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 14:56:02,420 [2056] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 14:56:02,465 [4036] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 14:56:02,465 [4036] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 14:56:02,522 [2056] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 14:56:15,456 [4036] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 14:56:15,458 [4036] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'R3'
2016-12-18 14:56:15,459 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','01')
2016-12-18 14:56:15,461 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0102')
2016-12-18 14:56:15,463 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0103')
2016-12-18 14:56:15,463 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0104')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0106')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0107')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','10')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1002')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1001')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1009')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1010')
2016-12-18 14:56:15,464 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1013')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1007')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1006')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1011')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1003')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1012')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1008')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1005')
2016-12-18 14:56:15,465 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1004')
2016-12-18 14:56:15,466 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0101')
2016-12-18 14:56:15,466 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100101')
2016-12-18 14:56:15,467 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100201')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100312')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100401')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100501')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100601')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100701')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100801')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100901')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101001')
2016-12-18 14:56:15,468 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101101')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101201')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101301')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','11')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1105')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1101')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1102')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1103')
2016-12-18 14:56:15,469 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1104')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1109')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','03')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0301')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0302')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0303')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0304')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','12')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1204')
2016-12-18 14:56:15,470 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1201')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1202')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1203')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','99')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9903')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9910')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9904')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9905')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9906')
2016-12-18 14:56:15,471 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9911')
2016-12-18 14:56:15,472 [4036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9907')
2016-12-18 14:56:15,476 [4036] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 14:56:15,477 [4036] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'R3'
2016-12-18 14:56:15,479 [4036] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 14:56:15,480 [4036] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'R3'
2016-12-18 14:56:15,484 [4036] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 14:56:15,485 [4036] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'R3'
2016-12-18 14:56:22,649 [6852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 14:56:22,903 [4036] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:56:22,903 [4036] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:56:39,822 [2056] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 14:56:39,823 [2056] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 14:56:39,853 [9816] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 14:56:39,854 [9816] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 14:56:39,884 [2056] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 14:56:56,120 [9816] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 14:56:56,122 [9816] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'R3'
2016-12-18 14:56:56,122 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','01')
2016-12-18 14:56:56,123 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0102')
2016-12-18 14:56:56,123 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0103')
2016-12-18 14:56:56,124 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0104')
2016-12-18 14:56:56,124 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0106')
2016-12-18 14:56:56,124 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0107')
2016-12-18 14:56:56,125 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','10')
2016-12-18 14:56:56,125 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1002')
2016-12-18 14:56:56,125 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1001')
2016-12-18 14:56:56,128 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1009')
2016-12-18 14:56:56,129 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1010')
2016-12-18 14:56:56,129 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1013')
2016-12-18 14:56:56,129 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1007')
2016-12-18 14:56:56,129 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1006')
2016-12-18 14:56:56,130 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1011')
2016-12-18 14:56:56,130 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1003')
2016-12-18 14:56:56,130 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1012')
2016-12-18 14:56:56,130 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1008')
2016-12-18 14:56:56,130 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1005')
2016-12-18 14:56:56,131 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1004')
2016-12-18 14:56:56,131 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0101')
2016-12-18 14:56:56,131 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100101')
2016-12-18 14:56:56,132 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100201')
2016-12-18 14:56:56,132 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100312')
2016-12-18 14:56:56,132 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100401')
2016-12-18 14:56:56,133 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100501')
2016-12-18 14:56:56,133 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100601')
2016-12-18 14:56:56,133 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100701')
2016-12-18 14:56:56,133 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100801')
2016-12-18 14:56:56,133 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100901')
2016-12-18 14:56:56,134 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101001')
2016-12-18 14:56:56,134 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101101')
2016-12-18 14:56:56,134 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101201')
2016-12-18 14:56:56,134 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101301')
2016-12-18 14:56:56,135 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','11')
2016-12-18 14:56:56,135 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1105')
2016-12-18 14:56:56,135 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1101')
2016-12-18 14:56:56,135 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1102')
2016-12-18 14:56:56,136 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1103')
2016-12-18 14:56:56,136 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1104')
2016-12-18 14:56:56,136 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1109')
2016-12-18 14:56:56,136 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','03')
2016-12-18 14:56:56,136 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0301')
2016-12-18 14:56:56,137 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0302')
2016-12-18 14:56:56,137 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0303')
2016-12-18 14:56:56,138 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0304')
2016-12-18 14:56:56,138 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','12')
2016-12-18 14:56:56,139 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1204')
2016-12-18 14:56:56,139 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1201')
2016-12-18 14:56:56,139 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1202')
2016-12-18 14:56:56,139 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1203')
2016-12-18 14:56:56,139 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','99')
2016-12-18 14:56:56,140 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9903')
2016-12-18 14:56:56,140 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9910')
2016-12-18 14:56:56,140 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9904')
2016-12-18 14:56:56,140 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9905')
2016-12-18 14:56:56,140 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9906')
2016-12-18 14:56:56,140 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9911')
2016-12-18 14:56:56,140 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9907')
2016-12-18 14:56:56,143 [9816] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 14:56:56,143 [9816] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'R3'
2016-12-18 14:56:56,144 [9816] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 14:56:56,144 [9816] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'R3'
2016-12-18 14:56:56,145 [9816] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 14:56:56,145 [9816] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'R3'
2016-12-18 14:57:01,548 [6852] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'R3')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'R3')
2016-12-18 14:57:21,363 [4036] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 14:57:21,644 [2056] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:57:21,644 [2056] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:57:35,737 [2056] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '9902' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 14:58:03,507 [4036] DEBUG Servicesys_menu - 编辑记录
2016-12-18 14:58:03,508 [4036] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:58:03,508 [4036] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  'c2afdde1-ffd7-4510-ae4f-dcb7cc0b45ab'
2016-12-18 14:58:03,510 [4036] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='c2afdde1-ffd7-4510-ae4f-dcb7cc0b45ab'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='c2afdde1-ffd7-4510-ae4f-dcb7cc0b45ab'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='c2afdde1-ffd7-4510-ae4f-dcb7cc0b45ab'
) 
2016-12-18 14:58:03,584 [4036] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  'c2afdde1-ffd7-4510-ae4f-dcb7cc0b45ab'
2016-12-18 14:58:03,585 [4036] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 14:58:03,586 [4036] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9902'
2016-12-18 14:58:03,586 [4036] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '菜单导航', [MenuCode] = '9902', [ParentCode] = '99', [IconClass] = 'icon-chart_organisation', [URL] = '/sys/menu', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '210', [UpdatePerson] = '管理员', [UpdateDate] = '2016/12/18 14:58:03' where  MenuCode =  '9902'
2016-12-18 14:58:03,590 [4036] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('admin','管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[{"_id":"c2afdde1-ffd7-4510-ae4f-dcb7cc0b45ab","MenuName":"","MenuCode":""}],"inserted":[],"updated":[{"_id":"9902","MenuName":"菜单导航","MenuCode":"9902","ParentCode":"99","IconClass":"icon-chart_organisation","URL":"/sys/menu","IsVisible":"true","IsEnable":"true","MenuSeq":"210"}],"_changed":true}}','2016/12/18 14:58:03')
2016-12-18 14:58:03,670 [2000] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 14:58:03,670 [2000] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 14:58:23,166 [1664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2016-12-18 14:58:23,177 [1664] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 14:58:23,178 [1664] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 14:58:23,214 [1664] DEBUG Servicemms_buildPart - 获取动态列表
2016-12-18 14:58:23,214 [1664] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where  ProjectCode =  '201306030001'
2016-12-18 14:58:23,847 [2056] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2016-12-18 14:58:24,035 [2056] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Money else 0 end),0) as PickUnitMoney0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum1 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney1                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2016-12-18 14:58:24,133 [2056] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2016-12-18 14:58:33,806 [2000] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2016-12-18 14:58:33,807 [2000] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Money else 0 end),0) as PickUnitMoney0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum1 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney1                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2016-12-18 14:58:33,810 [2000] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2016-12-18 14:59:32,086 [6852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/warehouseaccount')
2016-12-18 14:59:32,538 [1664] DEBUG Mms - 
Select mms_warehouseStockHistory.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStockHistory.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where  mms_warehouse.ProjectCode='201306030001' 
order by mms_warehouseStockHistory.CreateDate desc
                
2016-12-18 14:59:34,959 [6852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/materialwarnning')
2016-12-18 14:59:35,305 [1664] DEBUG Mms - 
Select mms_materialWarnning.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_materialWarnning
Left join mms_material on mms_material.MaterialCode=mms_materialWarnning.MaterialCode
Where mms_materialWarnning.ProjectCode='201306030001' 
                
2016-12-18 14:59:35,309 [6800] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode=''
                
2016-12-18 15:00:10,027 [6800] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:00:10,028 [6800] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:00:10,055 [6800] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 15:00:10,066 [6852] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:00:10,067 [6852] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:00:17,473 [6800] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 15:00:17,473 [6800] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'R3'
2016-12-18 15:00:17,473 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','01')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0102')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0103')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0104')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0106')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0107')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','10')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1002')
2016-12-18 15:00:17,474 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1001')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1009')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1010')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1013')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1007')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1006')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1011')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1003')
2016-12-18 15:00:17,475 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1012')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1008')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1005')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1004')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0101')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100101')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100201')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100312')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100401')
2016-12-18 15:00:17,476 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100501')
2016-12-18 15:00:17,477 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100601')
2016-12-18 15:00:17,477 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100701')
2016-12-18 15:00:17,477 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100801')
2016-12-18 15:00:17,477 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100901')
2016-12-18 15:00:17,477 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101001')
2016-12-18 15:00:17,478 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101101')
2016-12-18 15:00:17,478 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101201')
2016-12-18 15:00:17,479 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101301')
2016-12-18 15:00:17,479 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','11')
2016-12-18 15:00:17,479 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1105')
2016-12-18 15:00:17,479 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1101')
2016-12-18 15:00:17,479 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1102')
2016-12-18 15:00:17,480 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1103')
2016-12-18 15:00:17,480 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1104')
2016-12-18 15:00:17,480 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1109')
2016-12-18 15:00:17,480 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','03')
2016-12-18 15:00:17,480 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0301')
2016-12-18 15:00:17,480 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0302')
2016-12-18 15:00:17,480 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0303')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0304')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','12')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1204')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1201')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1202')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1203')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','99')
2016-12-18 15:00:17,481 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9903')
2016-12-18 15:00:17,482 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9910')
2016-12-18 15:00:17,482 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9904')
2016-12-18 15:00:17,482 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9905')
2016-12-18 15:00:17,482 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9906')
2016-12-18 15:00:17,482 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9911')
2016-12-18 15:00:17,483 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9907')
2016-12-18 15:00:17,491 [6800] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 15:00:17,491 [6800] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'R3'
2016-12-18 15:00:17,492 [6800] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 15:00:17,493 [6800] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'R3'
2016-12-18 15:00:17,493 [6800] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 15:00:17,494 [6800] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'R3'
2016-12-18 15:00:20,709 [2000] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2016-12-18 15:00:20,904 [4036] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 15:00:21,216 [2000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 15:00:21,221 [2000] DEBUG Servicesys_user - 获取动态列表
2016-12-18 15:00:21,221 [2000] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 15:00:21,222 [2000] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 15:00:21,222 [2000] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 15:00:21,584 [2000] DEBUG Servicesys_role - 获取实体列表
2016-12-18 15:00:21,584 [2000] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 15:00:26,611 [2000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 15:00:26,839 [6800] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 15:00:26,839 [6800] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 15:00:59,213 [4036] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:00:59,214 [4036] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='Guest' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='Guest'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='Guest'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='Guest'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='Guest'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='Guest'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='Guest'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='Guest'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='Guest'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='Guest'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='Guest'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='Guest'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='Guest'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='Guest'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='Guest'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:00:59,257 [3872] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:00:59,258 [3872] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='Guest' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:00:59,286 [4036] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'Guest'
2016-12-18 15:04:02,359 [6800] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 15:04:02,359 [6800] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'Guest'
2016-12-18 15:04:02,362 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1002')
2016-12-18 15:04:02,374 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1001')
2016-12-18 15:04:02,375 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1009')
2016-12-18 15:04:02,375 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1010')
2016-12-18 15:04:02,379 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1013')
2016-12-18 15:04:02,381 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1007')
2016-12-18 15:04:02,383 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1006')
2016-12-18 15:04:02,385 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1011')
2016-12-18 15:04:02,385 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1003')
2016-12-18 15:04:02,386 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1012')
2016-12-18 15:04:02,386 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1008')
2016-12-18 15:04:02,387 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1005')
2016-12-18 15:04:02,388 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1004')
2016-12-18 15:04:02,389 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100101')
2016-12-18 15:04:02,391 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100201')
2016-12-18 15:04:02,391 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100312')
2016-12-18 15:04:02,391 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100401')
2016-12-18 15:04:02,392 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100501')
2016-12-18 15:04:02,392 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100601')
2016-12-18 15:04:02,392 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100701')
2016-12-18 15:04:02,392 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100801')
2016-12-18 15:04:02,392 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','100901')
2016-12-18 15:04:02,393 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','101001')
2016-12-18 15:04:02,393 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','101101')
2016-12-18 15:04:02,393 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','101201')
2016-12-18 15:04:02,393 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','101301')
2016-12-18 15:04:02,393 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1105')
2016-12-18 15:04:02,394 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1101')
2016-12-18 15:04:02,394 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1102')
2016-12-18 15:04:02,394 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1103')
2016-12-18 15:04:02,394 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1104')
2016-12-18 15:04:02,394 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1109')
2016-12-18 15:04:02,394 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','0301')
2016-12-18 15:04:02,394 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','0302')
2016-12-18 15:04:02,395 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','0303')
2016-12-18 15:04:02,395 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','0304')
2016-12-18 15:04:02,395 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1204')
2016-12-18 15:04:02,395 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1201')
2016-12-18 15:04:02,395 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1202')
2016-12-18 15:04:02,395 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','1203')
2016-12-18 15:04:02,395 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','99')
2016-12-18 15:04:02,396 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9902')
2016-12-18 15:04:02,397 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9903')
2016-12-18 15:04:02,397 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9910')
2016-12-18 15:04:02,397 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9904')
2016-12-18 15:04:02,397 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9905')
2016-12-18 15:04:02,397 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9906')
2016-12-18 15:04:02,397 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9911')
2016-12-18 15:04:02,397 [6800] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('Guest','9907')
2016-12-18 15:04:02,398 [6800] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 15:04:02,398 [6800] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'Guest'
2016-12-18 15:04:02,399 [6800] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('Guest','1002','add')
2016-12-18 15:04:02,400 [6800] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('Guest','1002','edit')
2016-12-18 15:04:02,401 [6800] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('Guest','1002','delete')
2016-12-18 15:04:02,403 [6800] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 15:04:02,403 [6800] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'Guest'
2016-12-18 15:04:02,404 [6800] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('Guest','0102','0')
2016-12-18 15:04:02,405 [6800] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('Guest','02','1')
2016-12-18 15:04:02,406 [6800] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('Guest','0201','0')
2016-12-18 15:04:02,406 [6800] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 15:04:02,406 [6800] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'Guest'
2016-12-18 15:04:02,407 [6800] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('Guest','9903','False','24，')
2016-12-18 15:04:04,617 [8364] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:04:04,618 [8364] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:04:04,643 [8364] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 15:04:04,659 [3872] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:04:04,659 [3872] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:04:11,642 [3872] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 15:04:11,643 [3872] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'R3'
2016-12-18 15:04:11,643 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','01')
2016-12-18 15:04:11,644 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0102')
2016-12-18 15:04:11,644 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0103')
2016-12-18 15:04:11,644 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0104')
2016-12-18 15:04:11,644 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0106')
2016-12-18 15:04:11,644 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0107')
2016-12-18 15:04:11,645 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','10')
2016-12-18 15:04:11,645 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1002')
2016-12-18 15:04:11,645 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1001')
2016-12-18 15:04:11,645 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1009')
2016-12-18 15:04:11,645 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1010')
2016-12-18 15:04:11,646 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1013')
2016-12-18 15:04:11,646 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1007')
2016-12-18 15:04:11,646 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1006')
2016-12-18 15:04:11,646 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1011')
2016-12-18 15:04:11,646 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1003')
2016-12-18 15:04:11,647 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1012')
2016-12-18 15:04:11,647 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1008')
2016-12-18 15:04:11,647 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1005')
2016-12-18 15:04:11,647 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1004')
2016-12-18 15:04:11,647 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0101')
2016-12-18 15:04:11,648 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100101')
2016-12-18 15:04:11,648 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100201')
2016-12-18 15:04:11,648 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100312')
2016-12-18 15:04:11,648 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100401')
2016-12-18 15:04:11,648 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100501')
2016-12-18 15:04:11,649 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100601')
2016-12-18 15:04:11,649 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100701')
2016-12-18 15:04:11,649 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100801')
2016-12-18 15:04:11,649 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','100901')
2016-12-18 15:04:11,650 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101001')
2016-12-18 15:04:11,650 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101101')
2016-12-18 15:04:11,651 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101201')
2016-12-18 15:04:11,651 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','101301')
2016-12-18 15:04:11,651 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','11')
2016-12-18 15:04:11,652 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1105')
2016-12-18 15:04:11,652 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1101')
2016-12-18 15:04:11,652 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1102')
2016-12-18 15:04:11,652 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1103')
2016-12-18 15:04:11,652 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1104')
2016-12-18 15:04:11,653 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1109')
2016-12-18 15:04:11,653 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','03')
2016-12-18 15:04:11,653 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0301')
2016-12-18 15:04:11,653 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0302')
2016-12-18 15:04:11,654 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0303')
2016-12-18 15:04:11,654 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','0304')
2016-12-18 15:04:11,654 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','12')
2016-12-18 15:04:11,654 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1204')
2016-12-18 15:04:11,654 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1201')
2016-12-18 15:04:11,655 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1202')
2016-12-18 15:04:11,655 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','1203')
2016-12-18 15:04:11,655 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','99')
2016-12-18 15:04:11,655 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9903')
2016-12-18 15:04:11,655 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9910')
2016-12-18 15:04:11,656 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9904')
2016-12-18 15:04:11,656 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9905')
2016-12-18 15:04:11,656 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9906')
2016-12-18 15:04:11,656 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9911')
2016-12-18 15:04:11,656 [3872] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('R3','9907')
2016-12-18 15:04:11,665 [3872] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 15:04:11,667 [3872] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'R3'
2016-12-18 15:04:11,673 [3872] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 15:04:11,673 [3872] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'R3'
2016-12-18 15:04:11,673 [3872] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 15:04:11,675 [3872] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'R3'
2016-12-18 15:04:27,144 [2000] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:04:27,145 [2000] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='Warehouse' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='Warehouse'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='Warehouse'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='Warehouse'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='Warehouse'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='Warehouse'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='Warehouse'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='Warehouse'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='Warehouse'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='Warehouse'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='Warehouse'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='Warehouse'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='Warehouse'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='Warehouse'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='Warehouse'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:04:27,190 [8364] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:04:27,190 [8364] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='Warehouse' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:04:27,228 [2000] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'Warehouse'
2016-12-18 15:06:07,633 [6852] DEBUG Servicesys_user - 获取实体对象
2016-12-18 15:06:07,633 [6852] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'tang'and Password =  'tang'and IsEnable =  'True'
2016-12-18 15:06:38,197 [6800] DEBUG Servicesys_user - 获取实体对象
2016-12-18 15:06:38,197 [6800] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'tang'and Password =  '1234'and IsEnable =  'True'
2016-12-18 15:06:38,199 [6800] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'tang' 
2016-12-18 15:06:38,205 [6800] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('tang','tang','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 15:06:38')
2016-12-18 15:06:38,208 [6800] DEBUG Servicemms_project - 获取实体对象
2016-12-18 15:06:38,212 [6800] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 15:06:38,231 [6852] DEBUG Sys - select * from sys_userSetting where UserCode='tang'
2016-12-18 15:06:38,388 [8364] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'tang' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'tang'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 15:06:46,389 [6800] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'tang'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 15:06:46,680 [6852] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 15:06:46,680 [6852] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 15:06:58,226 [6800] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'tang'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 15:06:58,657 [2000] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 15:06:58,658 [2000] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 15:06:58,783 [1620] DEBUG Servicesys_user - 获取实体列表
2016-12-18 15:06:58,783 [1620] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 15:06:58,793 [1620] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 15:07:09,609 [1620] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'tang'
2016-12-18 15:09:07,464 [6800] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'admin'
2016-12-18 15:09:26,399 [6852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'tang'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 15:09:26,404 [6852] DEBUG Servicesys_user - 获取动态列表
2016-12-18 15:09:26,405 [6852] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 15:09:26,405 [6852] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 15:09:26,405 [6852] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 15:09:26,680 [6800] DEBUG Servicesys_role - 获取实体列表
2016-12-18 15:09:26,680 [6800] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 15:09:35,042 [6852] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'admin'
2016-12-18 15:09:39,433 [4036] DEBUG Servicesys_user - 设置用户角色
2016-12-18 15:09:39,434 [4036] DEBUG Sys - delete from sys_userRoleMap where [UserCode] = 'admin'
2016-12-18 15:09:39,436 [4036] DEBUG Sys - insert into sys_userRoleMap([UserCode],[RoleCode]) values('admin','R3')
2016-12-18 15:09:46,281 [6800] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'super'
2016-12-18 15:09:49,758 [8364] DEBUG Servicesys_user - 设置用户角色
2016-12-18 15:09:49,759 [8364] DEBUG Sys - delete from sys_userRoleMap where [UserCode] = 'super'
2016-12-18 15:09:49,759 [8364] DEBUG Sys - insert into sys_userRoleMap([UserCode],[RoleCode]) values('super','super')
2016-12-18 15:09:54,914 [4036] DEBUG Servicesys_userSetting - 获取实体列表
2016-12-18 15:09:54,914 [4036] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'super'
2016-12-18 15:10:12,100 [9824] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'tang'
2016-12-18 15:10:34,755 [6852] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'tang'
2016-12-18 15:11:27,842 [10212] DEBUG Servicesys_user - 获取实体对象
2016-12-18 15:11:27,842 [10212] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'admin'and Password =  '1234'and IsEnable =  'True'
2016-12-18 15:11:27,844 [10212] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2016-12-18 15:11:27,847 [10212] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 15:11:27')
2016-12-18 15:11:27,847 [10212] DEBUG Servicemms_project - 获取实体对象
2016-12-18 15:11:27,848 [10212] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 15:11:27,876 [8364] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2016-12-18 15:11:28,011 [4036] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 15:12:56,796 [4036] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 15:12:57,050 [6852] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 15:12:57,050 [6852] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 15:12:57,179 [10212] DEBUG Servicesys_user - 获取实体列表
2016-12-18 15:12:57,180 [10212] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 15:12:57,181 [10212] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 15:13:02,853 [4036] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'admin'
2016-12-18 15:13:06,843 [7932] DEBUG Sys - 
select distinct A.OrganizeCode,A.OrganizeName,A.ParentCode
,(case when B.UserCode is null then 'false' else 'true' end) as Checked
from sys_organize A
left join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode and B.UserCode = 'admin'
2016-12-18 15:17:56,413 [9092] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2016-12-18 15:17:56,659 [9824] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 15:18:59,766 [9092] DEBUG Servicesys_user - 获取实体对象
2016-12-18 15:18:59,767 [9092] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  'super'and IsEnable =  'True'
2016-12-18 15:19:06,827 [5960] DEBUG Servicesys_user - 获取实体对象
2016-12-18 15:19:06,828 [5960] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  '1234'and IsEnable =  'True'
2016-12-18 15:19:06,829 [5960] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 15:19:06,832 [5960] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 15:19:06')
2016-12-18 15:19:06,833 [5960] DEBUG Servicemms_project - 获取实体对象
2016-12-18 15:19:06,837 [5960] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 15:19:06,865 [9092] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 15:19:06,989 [9680] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 15:20:07,400 [4292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 15:20:07,657 [9824] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 15:20:07,657 [9824] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 15:20:14,499 [9680] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 15:20:14,711 [6624] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 15:20:14,712 [6624] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 15:20:14,729 [9824] DEBUG Servicesys_user - 获取实体列表
2016-12-18 15:20:14,730 [9824] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 15:20:14,731 [9824] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 15:20:16,454 [6624] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 15:20:16,461 [6624] DEBUG Servicesys_user - 获取动态列表
2016-12-18 15:20:16,461 [6624] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 15:20:16,469 [6624] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 15:20:16,470 [6624] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 15:20:16,620 [9824] DEBUG Servicesys_role - 获取实体列表
2016-12-18 15:20:16,620 [9824] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 15:20:20,089 [9680] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:20:20,090 [9680] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:20:20,115 [9680] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 15:20:20,130 [9680] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:20:20,130 [9680] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:21:16,992 [4292] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '0102' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 15:21:49,436 [9092] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1019' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 15:22:17,337 [9680] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1002' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 15:22:36,991 [9092] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 15:22:36,996 [9092] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 15:22:36,997 [9092] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 15:22:36,997 [9092] DEBUG Servicesys_code - 获取动态列表
2016-12-18 15:22:36,997 [9092] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 15:22:37,786 [4292] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 15:22:37,786 [4292] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 15:22:37,796 [4292] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 15:22:43,780 [9092] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 15:22:43,781 [9092] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 15:22:43,783 [9092] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 15:22:54,587 [9680] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/edit')
2016-12-18 15:22:54,604 [9680] DEBUG Servicemms_receive - 获取实体对象
2016-12-18 15:22:54,604 [9680] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '201307020016'
2016-12-18 15:22:54,607 [9680] DEBUG Servicemms_receive - 获取上一条下一条数据
2016-12-18 15:22:54,608 [9680] DEBUG Servicemms_receive - 获取字段
2016-12-18 15:22:54,608 [9680] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2016-12-18 15:22:54,610 [9680] DEBUG Servicemms_receive - 获取字段
2016-12-18 15:22:54,610 [9680] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '201307020016'and ProjectCode =  '201306030001' order by BillNo desc
2016-12-18 15:22:54,629 [9680] DEBUG Servicemms_receive - 获取字段
2016-12-18 15:22:54,629 [9680] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '201307020016'and ProjectCode =  '201306030001' order by BillNo
2016-12-18 15:22:54,633 [9680] DEBUG Servicemms_receive - 获取字段
2016-12-18 15:22:54,633 [9680] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2016-12-18 15:22:54,649 [9680] DEBUG Servicesys_code - 获取动态列表
2016-12-18 15:22:54,650 [9680] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 15:22:54,651 [9680] DEBUG Servicesys_code - 获取动态列表
2016-12-18 15:22:54,651 [9680] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 15:22:54,651 [9680] DEBUG Servicesys_code - 获取动态列表
2016-12-18 15:22:54,651 [9680] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2016-12-18 15:22:54,651 [9680] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 15:22:54,651 [9680] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 15:22:54,652 [9680] DEBUG Servicesys_code - 获取字段
2016-12-18 15:22:54,652 [9680] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'SupplyType'and IsEnable =  'True'and IsDefault =  'True'
2016-12-18 15:22:54,653 [9680] DEBUG Servicesys_code - 获取字段
2016-12-18 15:22:54,653 [9680] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2016-12-18 15:22:55,237 [9092] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 15:22:55,237 [9092] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00303') order by MerchantsCode
2016-12-18 15:22:55,523 [4292] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 15:22:55,523 [4292] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201307020016' order by A.MaterialCode
2016-12-18 15:24:43,870 [7420] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1002' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 15:24:50,801 [2696] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 15:25:05,411 [2696] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:25:05,412 [2696] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:25:05,438 [2696] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 15:25:05,452 [7420] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:25:05,452 [7420] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:25:38,765 [4292] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:25:38,767 [4292] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:25:38,792 [4292] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 15:25:38,810 [2696] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:25:38,811 [2696] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:26:07,070 [9400] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 15:28:09,721 [7420] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:28:09,722 [7420] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:28:09,746 [7420] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 15:28:09,771 [4292] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:28:09,771 [4292] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:33:30,197 [7420] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 15:33:30,198 [7420] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 15:33:30,223 [7420] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 15:33:30,239 [6408] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 15:33:30,240 [6408] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 15:41:04,027 [6392] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 15:41:04,034 [6392] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 15:41:04,046 [6392] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 15:41:04,047 [6392] DEBUG Servicesys_code - 获取动态列表
2016-12-18 15:41:04,047 [6392] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 15:41:04,048 [6392] DEBUG Servicesys_code - 获取动态列表
2016-12-18 15:41:04,048 [6392] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 15:41:04,371 [6392] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 15:41:04,372 [6392] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 15:41:04,385 [6392] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 15:41:04,385 [6392] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 15:41:05,023 [7408] DEBUG Servicemms_send - 获取动态列表
2016-12-18 15:41:05,024 [7408] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 15:41:05,039 [7408] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:04:35,017 [8760] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:04:35,018 [8760] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='R3' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='R3'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='R3'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='R3'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='R3'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='R3'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='R3'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='R3'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='R3'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='R3'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='R3'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='R3'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='R3'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='R3'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='R3'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:04:35,047 [8760] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'R3'
2016-12-18 16:04:35,049 [3888] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:04:35,049 [3888] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='R3' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:09:20,335 [2660] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:09:20,337 [2660] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:09:20,338 [2660] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:09:28,137 [8000] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:09:28,137 [8000] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:09:28,137 [8000] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:09:37,221 [7628] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 16:09:37,222 [7628] DEBUG Servicesys_user - 获取动态列表
2016-12-18 16:09:37,222 [7628] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 16:09:37,223 [7628] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 16:09:37,223 [7628] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 16:09:37,476 [2660] DEBUG Servicesys_role - 获取实体列表
2016-12-18 16:09:37,477 [2660] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 16:09:39,845 [6532] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 16:09:39,846 [6532] DEBUG Servicesys_user - 获取动态列表
2016-12-18 16:09:39,846 [6532] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 16:09:39,847 [6532] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 16:09:39,847 [6532] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 16:09:40,026 [7628] DEBUG Servicesys_role - 获取实体列表
2016-12-18 16:09:40,026 [7628] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 16:11:28,160 [8000] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:11:28,160 [8000] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:11:28,161 [8000] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:11:37,877 [7628] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2016-12-18 16:11:42,523 [6532] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:11:42,523 [6532] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:11:42,558 [7628] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:11:42,560 [7628] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:11:42,620 [6532] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:12:01,104 [7628] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:12:01,104 [7628] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:12:01,105 [7628] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:12:06,532 [7628] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:12:06,532 [7628] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:12:06,532 [7628] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:12:07,411 [9016] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:12:07,411 [9016] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:12:07,416 [9016] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:12:07,828 [6532] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:12:07,828 [6532] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:12:07,828 [6532] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:12:08,031 [8000] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:12:08,031 [8000] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:12:08,032 [8000] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:12:08,207 [2660] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:12:08,207 [2660] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:12:08,208 [2660] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:13:01,658 [6532] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:13:01,658 [6532] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   where  ProjectCode like '2013%' order by ProjectCode
2016-12-18 16:13:01,659 [6532] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   where  ProjectCode like '2013%' ) tb_temp
2016-12-18 16:13:06,138 [9016] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:13:06,138 [9016] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   where  ProjectCode like '20134%' order by ProjectCode
2016-12-18 16:13:06,139 [9016] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   where  ProjectCode like '20134%' ) tb_temp
2016-12-18 16:13:09,650 [9236] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:13:09,650 [9236] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   where  ProjectCode like '2013%' order by ProjectCode
2016-12-18 16:13:09,651 [9236] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   where  ProjectCode like '2013%' ) tb_temp
2016-12-18 16:16:46,176 [8852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:16:46,177 [8852] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:16:46,181 [8852] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:16:46,181 [8852] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:16:46,182 [8852] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:16:46,182 [8852] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:16:46,182 [8852] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:16:46,197 [8852] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:16:46,198 [8852] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:16:46,198 [8852] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:16:46,199 [8852] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:16:46,578 [8000] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:16:46,579 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:16:46,585 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:16:50,449 [8000] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:16:50,449 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:16:50,450 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:16:52,584 [9236] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 16:16:52,587 [9236] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:16:52,587 [9236] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:16:52,588 [9236] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:16:52,588 [9236] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 16:16:52,945 [8000] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:16:52,946 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:16:52,951 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:16:54,486 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2016-12-18 16:16:54,491 [8000] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:16:54,492 [8000] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:16:55,083 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:16:55,084 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:16:55,097 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:16:57,584 [9236] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/refund/edit')
2016-12-18 16:16:57,601 [9236] DEBUG Servicemms_refund - 获取实体对象
2016-12-18 16:16:57,601 [9236] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201306050001'
2016-12-18 16:16:57,606 [9236] DEBUG Servicemms_refund - 获取上一条下一条数据
2016-12-18 16:16:57,607 [9236] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:16:57,607 [9236] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:16:57,609 [9236] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:16:57,609 [9236] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo < '201306050001'and ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:16:57,613 [9236] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:16:57,613 [9236] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo >  '201306050001'and ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:16:57,615 [9236] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:16:57,615 [9236] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:16:57,629 [9236] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:16:57,629 [9236] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 16:16:57,629 [9236] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:16:57,629 [9236] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:16:58,134 [8852] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:16:58,134 [8852] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('FB00503') order by MerchantsCode
2016-12-18 16:16:58,378 [9236] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:16:58,378 [9236] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum
     from 
        mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId
     where  A.BillNo =  '201306050001' order by A.MaterialCode
2016-12-18 16:17:11,309 [8852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:17:11,311 [8852] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:17:11,312 [8852] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:17:11,312 [8852] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:17:11,312 [8852] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:17:11,312 [8852] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:17:11,312 [8852] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:17:11,324 [8852] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:17:11,324 [8852] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:17:11,326 [8852] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:17:11,326 [8852] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:17:11,671 [9236] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:17:11,671 [9236] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:17:11,671 [9236] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:17:18,357 [8000] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:17:18,357 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:17:18,358 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:17:18,993 [8852] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:17:18,994 [8852] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:17:18,994 [8852] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:17:19,531 [8000] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:17:19,532 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:17:19,532 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:17:49,233 [5528] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/deal/Index','/Mms/deal')
2016-12-18 16:17:49,241 [5528] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:17:49,241 [5528] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'DisposalType'
2016-12-18 16:17:49,244 [5528] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:17:49,244 [5528] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'DisposalWay'
2016-12-18 16:17:49,912 [8852] DEBUG Servicemms_deal - 获取动态列表
2016-12-18 16:17:49,912 [8852] DEBUG Mms - select top 20 
        A.*, B.ProjectName
     from 
        mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:17:50,088 [8852] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName
     from 
        mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:17:51,676 [9236] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/lossreport/Index','/Mms/lossreport')
2016-12-18 16:17:51,686 [9236] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:17:51,687 [9236] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:17:52,375 [5528] DEBUG Servicemms_lossReport - 获取动态列表
2016-12-18 16:17:52,375 [5528] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName
     from 
        mms_LossReport A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:17:52,388 [5528] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName
     from 
        mms_LossReport A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:17:55,457 [9236] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/deal/Index','/Mms/deal')
2016-12-18 16:17:55,460 [9236] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:17:55,460 [9236] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'DisposalType'
2016-12-18 16:17:55,461 [9236] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:17:55,461 [9236] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'DisposalWay'
2016-12-18 16:17:55,799 [9016] DEBUG Servicemms_deal - 获取动态列表
2016-12-18 16:17:55,799 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName
     from 
        mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:17:55,800 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName
     from 
        mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:17:58,720 [5528] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Psi/purchase/Index','/Psi/purchase')
2016-12-18 16:17:59,330 [8852] DEBUG Servicepsi_purchase - 获取动态列表
2016-12-18 16:17:59,331 [8852] ERROR Servicepsi_purchase - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 16:17:59,354 [8852] ERROR /api/psi/purchase - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Areas.Psi.Controllers.PurchaseApiController.Get(RequestWrapper query) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\PurchaseController.cs:行号 146
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2016-12-18 16:18:01,681 [5528] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/edit')
2016-12-18 16:18:01,687 [5528] DEBUG Servicemms_send - 获取实体对象
2016-12-18 16:18:01,687 [5528] DEBUG Mms - select mms_send.* from mms_send where  BillNo =  ''
2016-12-18 16:18:01,690 [5528] DEBUG Servicemms_send - 获取上一条下一条数据
2016-12-18 16:18:01,691 [5528] DEBUG Servicemms_send - 获取字段
2016-12-18 16:18:01,691 [5528] DEBUG Mms - select top 1 BillNo from mms_send where  ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:18:01,694 [5528] DEBUG Servicemms_send - 获取字段
2016-12-18 16:18:01,694 [5528] DEBUG Mms - select top 1 BillNo from mms_send where  BillNo < ''and ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:18:01,697 [5528] DEBUG Servicemms_send - 获取字段
2016-12-18 16:18:01,697 [5528] DEBUG Mms - select top 1 BillNo from mms_send where  BillNo >  ''and ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:18:01,699 [5528] DEBUG Servicemms_send - 获取字段
2016-12-18 16:18:01,699 [5528] DEBUG Mms - select top 1 BillNo from mms_send where  ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:18:01,713 [5528] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:18:01,713 [5528] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:18:01,714 [5528] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:18:01,714 [5528] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:18:01,715 [5528] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:18:01,715 [5528] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 16:18:01,716 [5528] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:18:01,716 [5528] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:18:01,716 [5528] DEBUG Servicesys_code - 获取字段
2016-12-18 16:18:01,716 [5528] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'Pricing'and IsEnable =  'True'and IsDefault =  'True'
2016-12-18 16:18:02,584 [8000] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:18:02,584 [8000] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_sendDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  'null' order by A.MaterialCode
2016-12-18 16:18:26,714 [9016] DEBUG Servicemms_materialType - 获取动态列表
2016-12-18 16:18:26,715 [9016] DEBUG Mms - select 
        MaterialTypeName as text,MaterialType as id,ParentCode as pid
     from 
        mms_materialType
     order by MaterialType
2016-12-18 16:18:26,746 [8000] DEBUG Servicemms_material - 获取动态列表
2016-12-18 16:18:26,747 [8000] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  WarehouseCode =  '' order by MaterialCode
2016-12-18 16:18:26,783 [8000] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  WarehouseCode =  '' ) tb_temp
2016-12-18 16:20:28,773 [6116] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 16:20:29,007 [9016] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:20:29,007 [9016] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 16:20:53,289 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 16:20:53,290 [9716] DEBUG Servicesys_user - 获取动态列表
2016-12-18 16:20:53,291 [9716] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 16:20:53,291 [9716] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 16:20:53,291 [9716] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 16:20:53,468 [9016] DEBUG Servicesys_role - 获取实体列表
2016-12-18 16:20:53,468 [9016] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 16:20:55,884 [9716] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:20:55,885 [9716] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:20:55,911 [9716] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:20:55,931 [9016] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:20:55,931 [9016] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:21:22,257 [9016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:21:22,259 [9016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:21:22,301 [9016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:21:22,303 [9716] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:21:22,303 [9716] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:21:38,914 [4016] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:21:38,916 [4016] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:21:38,916 [4016] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:21:44,933 [4016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:21:44,934 [4016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:21:44,959 [4016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:21:44,978 [6116] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:21:44,978 [6116] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:21:59,896 [6116] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 16:21:59,899 [6116] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:21:59,900 [6116] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 16:21:59,900 [6116] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:21:59,900 [6116] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 16:22:00,319 [9716] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:22:00,319 [9716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:22:00,320 [9716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:22:01,745 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:22:01,747 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:22:01,748 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 16:22:01,749 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:22:01,749 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:22:01,750 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:22:01,752 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:22:01,765 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:22:01,766 [9716] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:22:01,766 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:22:01,767 [9716] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:22:02,094 [6116] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:22:02,094 [6116] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:22:02,095 [6116] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:22:12,105 [6116] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:22:12,105 [6116] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:22:12,106 [6116] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:22:17,324 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 16:22:17,328 [8000] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:22:17,328 [8000] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:22:17,329 [8000] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:22:17,329 [8000] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 16:22:17,903 [9716] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:22:17,903 [9716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:22:17,903 [9716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:22:19,277 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:22:19,279 [8000] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:22:19,279 [8000] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:22:19,279 [8000] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:22:19,279 [8000] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:22:19,280 [8000] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:22:19,280 [8000] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:22:19,297 [8000] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:22:19,297 [8000] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:22:19,298 [8000] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:22:19,298 [8000] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:22:19,594 [6116] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:22:19,595 [6116] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:22:19,595 [6116] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:22:53,175 [8000] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:22:53,176 [8000] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:22:53,203 [6116] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:22:53,204 [8000] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:22:53,206 [6116] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:22:58,650 [8000] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 16:22:58,651 [8000] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 16:22:58,652 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2016-12-18 16:22:58,652 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2016-12-18 16:22:58,652 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2016-12-18 16:22:58,652 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2016-12-18 16:22:58,652 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2016-12-18 16:22:58,655 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2016-12-18 16:22:58,655 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2016-12-18 16:22:58,656 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2016-12-18 16:22:58,657 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2016-12-18 16:22:58,658 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2016-12-18 16:22:58,659 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2016-12-18 16:22:58,659 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2016-12-18 16:22:58,660 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2016-12-18 16:22:58,661 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2016-12-18 16:22:58,662 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2016-12-18 16:22:58,662 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2016-12-18 16:22:58,662 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2016-12-18 16:22:58,662 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2016-12-18 16:22:58,662 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2016-12-18 16:22:58,663 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2016-12-18 16:22:58,663 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2016-12-18 16:22:58,663 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2016-12-18 16:22:58,663 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2016-12-18 16:22:58,663 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2016-12-18 16:22:58,663 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2016-12-18 16:22:58,664 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2016-12-18 16:22:58,664 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2016-12-18 16:22:58,665 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2016-12-18 16:22:58,666 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2016-12-18 16:22:58,666 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2016-12-18 16:22:58,666 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2016-12-18 16:22:58,666 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2016-12-18 16:22:58,666 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2016-12-18 16:22:58,666 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2016-12-18 16:22:58,667 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2016-12-18 16:22:58,667 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2016-12-18 16:22:58,667 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2016-12-18 16:22:58,667 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2016-12-18 16:22:58,667 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 16:22:58,668 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 16:22:58,668 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 16:22:58,669 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 16:22:58,670 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 16:22:58,670 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 16:22:58,671 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 16:22:58,671 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 16:22:58,672 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 16:22:58,672 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 16:22:58,673 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 16:22:58,673 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 16:22:58,674 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 16:22:58,675 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2016-12-18 16:22:58,676 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2016-12-18 16:22:58,677 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2016-12-18 16:22:58,677 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2016-12-18 16:22:58,677 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2016-12-18 16:22:58,702 [8000] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 16:22:58,702 [8000] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 16:22:58,702 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2016-12-18 16:22:58,703 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2016-12-18 16:22:58,703 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2016-12-18 16:22:58,703 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2016-12-18 16:22:58,703 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2016-12-18 16:22:58,703 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2016-12-18 16:22:58,703 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2016-12-18 16:22:58,705 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2016-12-18 16:22:58,706 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2016-12-18 16:22:58,707 [8000] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 16:22:58,708 [8000] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 16:22:58,708 [8000] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2016-12-18 16:22:58,708 [8000] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0201','0')
2016-12-18 16:22:58,708 [8000] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 16:22:58,708 [8000] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 16:22:58,709 [8000] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2016-12-18 16:23:04,939 [4756] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:23:04,956 [4756] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:23:04,956 [4756] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:23:04,961 [4756] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:04,961 [4756] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:23:04,962 [4756] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:04,962 [4756] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:23:04,973 [4756] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:23:04,976 [4756] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:23:04,977 [4756] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:23:04,978 [4756] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:23:05,294 [8000] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:23:05,294 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:05,294 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:06,593 [9016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 16:23:06,602 [9016] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:23:06,602 [9016] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:23:06,603 [9016] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:06,603 [9016] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 16:23:06,904 [6116] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:23:06,904 [6116] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:06,904 [6116] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:08,002 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:23:08,004 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:23:08,004 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:23:08,005 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:08,005 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:23:08,006 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:08,006 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:23:08,025 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:23:08,027 [9716] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:23:08,028 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:23:08,029 [9716] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:23:08,325 [4756] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:23:08,325 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:08,326 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:09,576 [9016] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 16:23:09,736 [4756] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 16:23:09,971 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:23:09,972 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:23:09,972 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:23:09,973 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:09,973 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:23:09,973 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:09,973 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:23:10,003 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:23:10,004 [9716] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:23:10,005 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:23:10,005 [9716] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:23:10,433 [4756] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:23:10,433 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:10,433 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:13,048 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 16:23:13,050 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:23:13,050 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:23:13,051 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:23:13,051 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 16:23:13,350 [6116] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:23:13,350 [6116] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:13,351 [6116] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:19,267 [9716] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:23:19,268 [9716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:19,268 [9716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:32,046 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2016-12-18 16:23:32,056 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:23:32,056 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:23:32,442 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:23:32,442 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:32,443 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:48,890 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:23:48,890 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:48,890 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:49,637 [4756] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:23:49,638 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:49,638 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:50,099 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:23:50,099 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:23:50,100 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:23:58,326 [4744] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:23:58,326 [4744] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:23:58,326 [4744] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:24:02,522 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:24:02,522 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:02,523 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:03,340 [4744] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:24:03,341 [4744] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:03,341 [4744] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:03,782 [4756] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:24:03,782 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:03,783 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:05,469 [4744] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:24:05,470 [4744] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:24:05,471 [4744] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:24:05,471 [4744] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:24:05,471 [4744] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:24:05,471 [4744] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:24:05,471 [4744] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:24:05,485 [4744] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:24:05,486 [4744] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:24:05,487 [4744] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:24:05,488 [4744] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:24:05,790 [4756] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:24:05,790 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:05,791 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:07,145 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 16:24:07,146 [8000] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:24:07,147 [8000] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:24:07,148 [8000] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:24:07,148 [8000] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 16:24:07,490 [4744] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:24:07,490 [4744] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:07,490 [4744] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:09,262 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 16:24:09,266 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:24:09,267 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:24:09,270 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:24:09,271 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:24:09,273 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:24:09,273 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 16:24:09,285 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:24:09,285 [9716] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 16:24:09,286 [9716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 16:24:09,286 [9716] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 16:24:09,585 [4744] DEBUG Servicemms_send - 获取动态列表
2016-12-18 16:24:09,585 [4744] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:09,585 [4744] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:10,186 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2016-12-18 16:24:10,188 [8000] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:24:10,188 [8000] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:24:10,194 [8000] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:24:10,195 [8000] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2016-12-18 16:24:10,565 [4756] DEBUG Servicemms_receive - 获取动态列表
2016-12-18 16:24:10,565 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:10,566 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:20,217 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2016-12-18 16:24:20,219 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:24:20,219 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:24:20,520 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:24:20,520 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:20,520 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:22,492 [4744] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:24:22,492 [4744] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:24:22,493 [4744] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:24:23,699 [8000] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:24:23,699 [8000] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:24:23,700 [8000] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:24:27,342 [4756] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:24:27,343 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:24:27,347 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:25:29,556 [4756] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 16:25:29,803 [9716] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:25:29,803 [9716] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 16:25:35,615 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 16:25:35,619 [8000] DEBUG Servicesys_user - 获取动态列表
2016-12-18 16:25:35,619 [8000] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 16:25:35,624 [8000] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 16:25:35,624 [8000] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 16:25:35,798 [8480] DEBUG Servicesys_role - 获取实体列表
2016-12-18 16:25:35,798 [8480] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 16:25:48,568 [4756] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 16:25:48,814 [9716] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 16:25:48,814 [9716] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 16:25:48,842 [9016] DEBUG Servicesys_user - 获取实体列表
2016-12-18 16:25:48,842 [9016] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 16:25:48,844 [9016] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 16:25:55,264 [8000] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'super'
2016-12-18 16:25:56,940 [9016] DEBUG Servicesys_user - 设置用户角色
2016-12-18 16:25:56,940 [9016] DEBUG Sys - delete from sys_userRoleMap where [UserCode] = 'super'
2016-12-18 16:25:56,941 [9016] DEBUG Sys - insert into sys_userRoleMap([UserCode],[RoleCode]) values('super','super')
2016-12-18 16:26:01,174 [9016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:26:01,175 [9016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:26:01,245 [9716] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:26:01,246 [9716] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:26:01,308 [9016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:26:12,887 [8000] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 16:26:12,889 [8000] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 16:26:12,893 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2016-12-18 16:26:12,893 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2016-12-18 16:26:12,893 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2016-12-18 16:26:12,894 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2016-12-18 16:26:12,897 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2016-12-18 16:26:12,902 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2016-12-18 16:26:12,902 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2016-12-18 16:26:12,903 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2016-12-18 16:26:12,903 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2016-12-18 16:26:12,903 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2016-12-18 16:26:12,903 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2016-12-18 16:26:12,903 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2016-12-18 16:26:12,903 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2016-12-18 16:26:12,904 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2016-12-18 16:26:12,905 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2016-12-18 16:26:12,906 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2016-12-18 16:26:12,906 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2016-12-18 16:26:12,907 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2016-12-18 16:26:12,907 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2016-12-18 16:26:12,907 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2016-12-18 16:26:12,907 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2016-12-18 16:26:12,907 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2016-12-18 16:26:12,907 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2016-12-18 16:26:12,908 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2016-12-18 16:26:12,908 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2016-12-18 16:26:12,908 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2016-12-18 16:26:12,910 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2016-12-18 16:26:12,911 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2016-12-18 16:26:12,912 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2016-12-18 16:26:12,912 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2016-12-18 16:26:12,913 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2016-12-18 16:26:12,913 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2016-12-18 16:26:12,913 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2016-12-18 16:26:12,913 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2016-12-18 16:26:12,914 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2016-12-18 16:26:12,915 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2016-12-18 16:26:12,915 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2016-12-18 16:26:12,915 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2016-12-18 16:26:12,915 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2016-12-18 16:26:12,916 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2016-12-18 16:26:12,918 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2016-12-18 16:26:12,919 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2016-12-18 16:26:12,920 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2016-12-18 16:26:12,920 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2016-12-18 16:26:12,921 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2016-12-18 16:26:12,921 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2016-12-18 16:26:12,921 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 16:26:12,921 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 16:26:12,922 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 16:26:12,923 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 16:26:12,923 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 16:26:12,923 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 16:26:12,923 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 16:26:12,924 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 16:26:12,924 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 16:26:12,924 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 16:26:12,924 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 16:26:12,925 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 16:26:12,925 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 16:26:12,925 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2016-12-18 16:26:12,925 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2016-12-18 16:26:12,925 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2016-12-18 16:26:12,926 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2016-12-18 16:26:12,926 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2016-12-18 16:26:12,926 [8000] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 16:26:12,926 [8000] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 16:26:12,927 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2016-12-18 16:26:12,927 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2016-12-18 16:26:12,928 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2016-12-18 16:26:12,928 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2016-12-18 16:26:12,928 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2016-12-18 16:26:12,928 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2016-12-18 16:26:12,928 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2016-12-18 16:26:12,928 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2016-12-18 16:26:12,929 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2016-12-18 16:26:12,929 [8000] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 16:26:12,929 [8000] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 16:26:12,929 [8000] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 16:26:12,929 [8000] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 16:26:12,930 [8000] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2016-12-18 16:26:17,247 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:26:17,247 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:26:17,247 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:26:18,004 [9716] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:26:18,004 [9716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:26:18,005 [9716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:26:18,639 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:26:18,640 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:26:18,640 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:26:19,162 [4756] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:26:19,162 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:26:19,163 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:26:19,586 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:26:19,586 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:26:19,588 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:26:19,794 [4756] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:26:19,794 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:26:19,794 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:26:20,089 [9716] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:26:20,089 [9716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:26:20,091 [9716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:27:23,767 [9016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:27:23,768 [9016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:27:23,794 [9016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:27:23,810 [4756] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:27:23,810 [4756] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:35:12,283 [9072] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 16:35:12,562 [4756] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 16:35:12,562 [4756] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 16:35:12,604 [9016] DEBUG Servicesys_user - 获取实体列表
2016-12-18 16:35:12,604 [9016] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 16:35:12,606 [9016] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 16:35:17,180 [4756] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'yrh'
2016-12-18 16:35:44,006 [9716] DEBUG Servicesys_user - 设置用户角色
2016-12-18 16:35:44,007 [9716] DEBUG Sys - delete from sys_userRoleMap where [UserCode] = 'yrh'
2016-12-18 16:35:44,008 [9716] DEBUG Sys - insert into sys_userRoleMap([UserCode],[RoleCode]) values('yrh','super')
2016-12-18 16:35:49,857 [9016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:35:49,857 [9016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:35:49,887 [9016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:35:49,890 [9072] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:35:49,890 [9072] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:35:56,686 [9816] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 16:35:56,687 [9816] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 16:35:56,688 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2016-12-18 16:35:56,688 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2016-12-18 16:35:56,688 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2016-12-18 16:35:56,688 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2016-12-18 16:35:56,689 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2016-12-18 16:35:56,689 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2016-12-18 16:35:56,689 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2016-12-18 16:35:56,689 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2016-12-18 16:35:56,689 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2016-12-18 16:35:56,690 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2016-12-18 16:35:56,690 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2016-12-18 16:35:56,691 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2016-12-18 16:35:56,691 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2016-12-18 16:35:56,691 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2016-12-18 16:35:56,691 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2016-12-18 16:35:56,691 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2016-12-18 16:35:56,692 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2016-12-18 16:35:56,692 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2016-12-18 16:35:56,694 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2016-12-18 16:35:56,695 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2016-12-18 16:35:56,696 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2016-12-18 16:35:56,697 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2016-12-18 16:35:56,700 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2016-12-18 16:35:56,701 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2016-12-18 16:35:56,702 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2016-12-18 16:35:56,703 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2016-12-18 16:35:56,703 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2016-12-18 16:35:56,703 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2016-12-18 16:35:56,703 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2016-12-18 16:35:56,703 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2016-12-18 16:35:56,703 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2016-12-18 16:35:56,704 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2016-12-18 16:35:56,704 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2016-12-18 16:35:56,704 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2016-12-18 16:35:56,704 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2016-12-18 16:35:56,704 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2016-12-18 16:35:56,704 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2016-12-18 16:35:56,705 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2016-12-18 16:35:56,705 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2016-12-18 16:35:56,706 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2016-12-18 16:35:56,706 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2016-12-18 16:35:56,706 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2016-12-18 16:35:56,707 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2016-12-18 16:35:56,707 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2016-12-18 16:35:56,708 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2016-12-18 16:35:56,708 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2016-12-18 16:35:56,708 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 16:35:56,708 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 16:35:56,708 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 16:35:56,709 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 16:35:56,709 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 16:35:56,709 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 16:35:56,709 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 16:35:56,710 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 16:35:56,710 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 16:35:56,710 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 16:35:56,710 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 16:35:56,711 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 16:35:56,713 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 16:35:56,713 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2016-12-18 16:35:56,714 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2016-12-18 16:35:56,714 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2016-12-18 16:35:56,714 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2016-12-18 16:35:56,714 [9816] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2016-12-18 16:35:56,715 [9816] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 16:35:56,716 [9816] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 16:35:56,716 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2016-12-18 16:35:56,717 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2016-12-18 16:35:56,717 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2016-12-18 16:35:56,717 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2016-12-18 16:35:56,717 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2016-12-18 16:35:56,718 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2016-12-18 16:35:56,718 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2016-12-18 16:35:56,718 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2016-12-18 16:35:56,718 [9816] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2016-12-18 16:35:56,718 [9816] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 16:35:56,719 [9816] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 16:35:56,719 [9816] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 16:35:56,719 [9816] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 16:35:56,719 [9816] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2016-12-18 16:36:36,061 [9072] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:36:36,063 [9072] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:36:36,064 [9072] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:36:36,831 [9816] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:36:36,831 [9816] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:36:36,831 [9816] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:36:37,410 [9716] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:36:37,410 [9716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:36:37,411 [9716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:36:49,526 [8636] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:36:49,527 [8636] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:36:49,566 [8636] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:36:49,569 [8000] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:36:49,569 [8000] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:36:58,048 [4756] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 16:36:58,049 [4756] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 16:36:58,049 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2016-12-18 16:36:58,050 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2016-12-18 16:36:58,051 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2016-12-18 16:36:58,052 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2016-12-18 16:36:58,052 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2016-12-18 16:36:58,053 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2016-12-18 16:36:58,053 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2016-12-18 16:36:58,053 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2016-12-18 16:36:58,055 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2016-12-18 16:36:58,055 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2016-12-18 16:36:58,056 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2016-12-18 16:36:58,056 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2016-12-18 16:36:58,056 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2016-12-18 16:36:58,057 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2016-12-18 16:36:58,057 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2016-12-18 16:36:58,057 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2016-12-18 16:36:58,058 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2016-12-18 16:36:58,058 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2016-12-18 16:36:58,058 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2016-12-18 16:36:58,058 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2016-12-18 16:36:58,058 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2016-12-18 16:36:58,058 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2016-12-18 16:36:58,059 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2016-12-18 16:36:58,059 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2016-12-18 16:36:58,059 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2016-12-18 16:36:58,059 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2016-12-18 16:36:58,059 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2016-12-18 16:36:58,060 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2016-12-18 16:36:58,060 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2016-12-18 16:36:58,060 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2016-12-18 16:36:58,060 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2016-12-18 16:36:58,060 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2016-12-18 16:36:58,060 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2016-12-18 16:36:58,061 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2016-12-18 16:36:58,061 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2016-12-18 16:36:58,061 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2016-12-18 16:36:58,061 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2016-12-18 16:36:58,061 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2016-12-18 16:36:58,061 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2016-12-18 16:36:58,062 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2016-12-18 16:36:58,062 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2016-12-18 16:36:58,062 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2016-12-18 16:36:58,062 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2016-12-18 16:36:58,062 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2016-12-18 16:36:58,062 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2016-12-18 16:36:58,062 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 16:36:58,063 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2016-12-18 16:36:58,064 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2016-12-18 16:36:58,065 [4756] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2016-12-18 16:36:58,065 [4756] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 16:36:58,065 [4756] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 16:36:58,065 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2016-12-18 16:36:58,066 [4756] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2016-12-18 16:36:58,067 [4756] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 16:36:58,067 [4756] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 16:36:58,067 [4756] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','02','0')
2016-12-18 16:36:58,067 [4756] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 16:36:58,067 [4756] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 16:36:58,068 [4756] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2016-12-18 16:37:02,090 [4756] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:37:02,090 [4756] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:37:02,091 [4756] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:37:02,827 [9072] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:37:02,827 [9072] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:37:02,828 [9072] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:37:03,328 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:37:03,328 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:37:03,329 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:37:03,859 [8636] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:37:03,859 [8636] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:37:03,861 [8636] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:37:04,343 [9716] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:37:04,343 [9716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:37:04,344 [9716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:38:29,662 [8000] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:38:29,662 [8000] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:38:29,662 [8000] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:38:33,430 [9816] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:38:33,430 [9816] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:38:33,432 [9816] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:40:08,167 [8000] DEBUG Servicesys_user - 获取实体对象
2016-12-18 16:40:08,167 [8000] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'yrh'and Password =  'yrh'and IsEnable =  'True'
2016-12-18 16:40:08,169 [8000] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'yrh' 
2016-12-18 16:40:08,174 [8000] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('yrh','颜荣华','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 16:40:08')
2016-12-18 16:40:08,176 [8000] DEBUG Servicemms_project - 获取实体对象
2016-12-18 16:40:08,176 [8000] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 16:40:08,197 [9716] DEBUG Sys - select * from sys_userSetting where UserCode='yrh'
2016-12-18 16:40:08,361 [9664] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'yrh' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'yrh'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 16:40:21,062 [9716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/return/Index','/Mms/return')
2016-12-18 16:40:21,071 [9716] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:40:21,071 [9716] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 16:40:21,072 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:40:21,072 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 16:40:21,072 [9716] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:40:21,072 [9716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2016-12-18 16:40:21,848 [8000] DEBUG Servicemms_return - 获取动态列表
2016-12-18 16:40:21,849 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName
     from 
        mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:40:21,857 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName
     from 
        mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:40:34,245 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2016-12-18 16:40:34,250 [8000] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:40:34,250 [8000] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 16:40:34,667 [9016] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:40:34,667 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:40:34,668 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:45:24,556 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 16:45:24,566 [8000] DEBUG Servicesys_user - 获取动态列表
2016-12-18 16:45:24,566 [8000] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 16:45:24,571 [8000] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 16:45:24,571 [8000] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 16:45:24,805 [9664] DEBUG Servicesys_role - 获取实体列表
2016-12-18 16:45:24,806 [9664] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 16:45:28,053 [8000] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:45:28,054 [8000] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:45:28,081 [8000] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:45:28,105 [8576] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:45:28,105 [8576] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:46:09,324 [5152] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 16:46:09,329 [5152] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 16:46:09,329 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2016-12-18 16:46:09,330 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2016-12-18 16:46:09,332 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2016-12-18 16:46:09,335 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2016-12-18 16:46:09,335 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2016-12-18 16:46:09,337 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2016-12-18 16:46:09,339 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2016-12-18 16:46:09,339 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2016-12-18 16:46:09,339 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2016-12-18 16:46:09,339 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2016-12-18 16:46:09,339 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2016-12-18 16:46:09,340 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2016-12-18 16:46:09,342 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2016-12-18 16:46:09,343 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2016-12-18 16:46:09,345 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2016-12-18 16:46:09,349 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2016-12-18 16:46:09,350 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2016-12-18 16:46:09,352 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2016-12-18 16:46:09,353 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2016-12-18 16:46:09,354 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2016-12-18 16:46:09,354 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2016-12-18 16:46:09,355 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2016-12-18 16:46:09,356 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2016-12-18 16:46:09,356 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2016-12-18 16:46:09,356 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2016-12-18 16:46:09,356 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2016-12-18 16:46:09,357 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2016-12-18 16:46:09,357 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2016-12-18 16:46:09,357 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2016-12-18 16:46:09,357 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2016-12-18 16:46:09,358 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2016-12-18 16:46:09,358 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2016-12-18 16:46:09,358 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2016-12-18 16:46:09,358 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2016-12-18 16:46:09,359 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2016-12-18 16:46:09,359 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2016-12-18 16:46:09,359 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2016-12-18 16:46:09,359 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2016-12-18 16:46:09,359 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2016-12-18 16:46:09,359 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2016-12-18 16:46:09,359 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2016-12-18 16:46:09,360 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2016-12-18 16:46:09,360 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2016-12-18 16:46:09,360 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2016-12-18 16:46:09,360 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2016-12-18 16:46:09,360 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2016-12-18 16:46:09,360 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 16:46:09,360 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 16:46:09,361 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 16:46:09,362 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 16:46:09,362 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 16:46:09,362 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 16:46:09,362 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2016-12-18 16:46:09,362 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2016-12-18 16:46:09,362 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2016-12-18 16:46:09,362 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2016-12-18 16:46:09,363 [5152] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2016-12-18 16:46:09,363 [5152] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 16:46:09,363 [5152] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 16:46:09,364 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2016-12-18 16:46:09,364 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2016-12-18 16:46:09,364 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2016-12-18 16:46:09,364 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2016-12-18 16:46:09,364 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2016-12-18 16:46:09,364 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2016-12-18 16:46:09,365 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2016-12-18 16:46:09,365 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2016-12-18 16:46:09,365 [5152] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2016-12-18 16:46:09,365 [5152] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 16:46:09,365 [5152] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 16:46:09,365 [5152] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','01','0')
2016-12-18 16:46:09,366 [5152] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','02','0')
2016-12-18 16:46:09,366 [5152] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 16:46:09,366 [5152] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 16:46:09,366 [5152] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2016-12-18 16:46:14,784 [1912] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:46:14,786 [1912] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:46:14,787 [1912] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:46:15,933 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:46:15,934 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:46:15,935 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:46:16,585 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:46:16,585 [8576] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:46:16,589 [8576] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:46:17,011 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:46:17,012 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:46:17,014 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:46:17,440 [1912] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:46:17,440 [1912] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:46:17,441 [1912] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:46:25,416 [9664] DEBUG Sys - select * from sys_userSetting where UserCode='yrh'
2016-12-18 16:46:25,600 [1912] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'yrh' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'yrh'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 16:46:26,070 [9664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2016-12-18 16:46:26,076 [9664] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:46:26,076 [9664] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 16:46:26,557 [9664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:46:26,557 [9664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:46:26,560 [9664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:46:56,319 [9664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 16:46:56,614 [1912] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 16:46:56,614 [1912] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 16:46:56,662 [8000] DEBUG Servicesys_user - 获取实体列表
2016-12-18 16:46:56,662 [8000] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 16:46:56,663 [8000] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 16:47:00,298 [9664] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'yrh'
2016-12-18 16:47:02,076 [9664] DEBUG Servicesys_user - 设置用户角色
2016-12-18 16:47:02,081 [9664] DEBUG Sys - delete from sys_userRoleMap where [UserCode] = 'yrh'
2016-12-18 16:47:02,082 [9664] DEBUG Sys - insert into sys_userRoleMap([UserCode],[RoleCode]) values('yrh','super')
2016-12-18 16:47:03,632 [8000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 16:47:03,636 [8000] DEBUG Servicesys_user - 获取动态列表
2016-12-18 16:47:03,637 [8000] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 16:47:03,640 [8000] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 16:47:03,640 [8000] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 16:47:03,858 [9664] DEBUG Servicesys_role - 获取实体列表
2016-12-18 16:47:03,858 [9664] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 16:47:06,771 [8576] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:47:06,772 [8576] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:47:06,786 [9664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:47:06,786 [9664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:47:06,863 [8576] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:47:17,875 [8576] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 16:47:17,877 [8576] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 16:47:17,878 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2016-12-18 16:47:17,878 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2016-12-18 16:47:17,878 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2016-12-18 16:47:17,879 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2016-12-18 16:47:17,879 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2016-12-18 16:47:17,879 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2016-12-18 16:47:17,880 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2016-12-18 16:47:17,880 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2016-12-18 16:47:17,880 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2016-12-18 16:47:17,880 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2016-12-18 16:47:17,881 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2016-12-18 16:47:17,908 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2016-12-18 16:47:17,908 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2016-12-18 16:47:17,908 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2016-12-18 16:47:17,909 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2016-12-18 16:47:17,910 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2016-12-18 16:47:17,911 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2016-12-18 16:47:17,911 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2016-12-18 16:47:17,912 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2016-12-18 16:47:17,912 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2016-12-18 16:47:17,912 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2016-12-18 16:47:17,913 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2016-12-18 16:47:17,913 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2016-12-18 16:47:17,913 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2016-12-18 16:47:17,913 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2016-12-18 16:47:17,913 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2016-12-18 16:47:17,913 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2016-12-18 16:47:17,914 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2016-12-18 16:47:17,915 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2016-12-18 16:47:17,915 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2016-12-18 16:47:17,915 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2016-12-18 16:47:17,915 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2016-12-18 16:47:17,915 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 16:47:17,915 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 16:47:17,915 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 16:47:17,916 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 16:47:17,917 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 16:47:17,917 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 16:47:17,917 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2016-12-18 16:47:17,917 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2016-12-18 16:47:17,917 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2016-12-18 16:47:17,918 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2016-12-18 16:47:17,918 [8576] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2016-12-18 16:47:17,919 [8576] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 16:47:17,919 [8576] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 16:47:17,919 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2016-12-18 16:47:17,919 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2016-12-18 16:47:17,919 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2016-12-18 16:47:17,920 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2016-12-18 16:47:17,920 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2016-12-18 16:47:17,920 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2016-12-18 16:47:17,920 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2016-12-18 16:47:17,920 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2016-12-18 16:47:17,920 [8576] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2016-12-18 16:47:17,921 [8576] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 16:47:17,921 [8576] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 16:47:17,921 [8576] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','01','0')
2016-12-18 16:47:17,921 [8576] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2016-12-18 16:47:17,922 [8576] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 16:47:17,922 [8576] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 16:47:17,922 [8576] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2016-12-18 16:47:21,860 [6664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:47:21,860 [6664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:47:21,861 [6664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:47:23,243 [9664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:47:23,243 [9664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 16:47:23,244 [9664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 16:47:43,711 [6664] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:47:43,711 [6664] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:47:43,712 [6664] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:47:49,419 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:47:49,419 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:47:49,421 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:47:59,690 [8000] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:47:59,691 [8000] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:47:59,746 [6664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:47:59,746 [6664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:47:59,782 [8000] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:48:05,538 [8000] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 16:48:05,538 [8000] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 16:48:05,539 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2016-12-18 16:48:05,539 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2016-12-18 16:48:05,539 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2016-12-18 16:48:05,539 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2016-12-18 16:48:05,540 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2016-12-18 16:48:05,540 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2016-12-18 16:48:05,540 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2016-12-18 16:48:05,540 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2016-12-18 16:48:05,540 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2016-12-18 16:48:05,541 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2016-12-18 16:48:05,542 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2016-12-18 16:48:05,543 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2016-12-18 16:48:05,544 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2016-12-18 16:48:05,544 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2016-12-18 16:48:05,546 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2016-12-18 16:48:05,548 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2016-12-18 16:48:05,548 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2016-12-18 16:48:05,548 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2016-12-18 16:48:05,548 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2016-12-18 16:48:05,549 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2016-12-18 16:48:05,549 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2016-12-18 16:48:05,549 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2016-12-18 16:48:05,549 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2016-12-18 16:48:05,549 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2016-12-18 16:48:05,549 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2016-12-18 16:48:05,550 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2016-12-18 16:48:05,550 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2016-12-18 16:48:05,550 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2016-12-18 16:48:05,551 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2016-12-18 16:48:05,551 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2016-12-18 16:48:05,551 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2016-12-18 16:48:05,552 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2016-12-18 16:48:05,557 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2016-12-18 16:48:05,559 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2016-12-18 16:48:05,560 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2016-12-18 16:48:05,561 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2016-12-18 16:48:05,562 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2016-12-18 16:48:05,562 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2016-12-18 16:48:05,562 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2016-12-18 16:48:05,562 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2016-12-18 16:48:05,563 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2016-12-18 16:48:05,563 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2016-12-18 16:48:05,564 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2016-12-18 16:48:05,564 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2016-12-18 16:48:05,564 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2016-12-18 16:48:05,564 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2016-12-18 16:48:05,564 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 16:48:05,565 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 16:48:05,565 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 16:48:05,565 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 16:48:05,565 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 16:48:05,565 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 16:48:05,565 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 16:48:05,566 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 16:48:05,566 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 16:48:05,566 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 16:48:05,566 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 16:48:05,566 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 16:48:05,567 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 16:48:05,567 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2016-12-18 16:48:05,567 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2016-12-18 16:48:05,567 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2016-12-18 16:48:05,567 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2016-12-18 16:48:05,567 [8000] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2016-12-18 16:48:05,568 [8000] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 16:48:05,568 [8000] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 16:48:05,568 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2016-12-18 16:48:05,569 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2016-12-18 16:48:05,569 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2016-12-18 16:48:05,569 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2016-12-18 16:48:05,569 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2016-12-18 16:48:05,569 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2016-12-18 16:48:05,569 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2016-12-18 16:48:05,570 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2016-12-18 16:48:05,570 [8000] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2016-12-18 16:48:05,570 [8000] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 16:48:05,570 [8000] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 16:48:05,571 [8000] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 16:48:05,571 [8000] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 16:48:05,571 [8000] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2016-12-18 16:48:09,304 [9664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:09,304 [9664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:09,311 [9664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:10,047 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:10,047 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:10,048 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:10,562 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:10,562 [8576] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:10,563 [8576] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:11,047 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:11,047 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:11,047 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:11,489 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:11,489 [8576] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:11,490 [8576] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:11,704 [9664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:11,705 [9664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:11,705 [9664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:11,980 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:11,980 [8576] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:11,981 [8576] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:12,155 [6664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:12,155 [6664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:12,155 [6664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:12,358 [9664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:12,358 [9664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:12,359 [9664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:12,571 [6664] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:12,571 [6664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:12,571 [6664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:44,646 [8000] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:48:44,646 [8000] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:48:44,646 [8000] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:48:57,513 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:57,513 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:57,514 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:48:58,838 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:48:58,839 [8576] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:48:58,839 [8576] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:49:00,096 [3988] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:49:00,096 [3988] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:49:00,097 [3988] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:49:00,662 [8000] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:49:00,662 [8000] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:49:00,663 [8000] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:49:00,940 [3988] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:49:00,940 [3988] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:49:00,941 [3988] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:49:18,664 [8576] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'yrh'
2016-12-18 16:49:21,637 [9664] DEBUG Servicesys_user - 设置用户角色
2016-12-18 16:49:21,643 [9664] DEBUG Sys - delete from sys_userRoleMap where [UserCode] = 'yrh'
2016-12-18 16:49:21,643 [9664] DEBUG Sys - insert into sys_userRoleMap([UserCode],[RoleCode]) values('yrh','super')
2016-12-18 16:49:25,760 [3988] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:49:25,761 [3988] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:49:25,787 [3988] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:49:25,807 [9664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:49:25,808 [9664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:53:44,479 [8576] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/edit')
2016-12-18 16:53:44,497 [8576] DEBUG Servicemms_refund - 获取实体对象
2016-12-18 16:53:44,504 [8576] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201306050001'
2016-12-18 16:53:44,505 [8576] DEBUG Servicemms_refund - 获取上一条下一条数据
2016-12-18 16:53:44,505 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:53:44,505 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:53:44,505 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:53:44,505 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo < '201306050001'and ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:53:44,506 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:53:44,506 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo >  '201306050001'and ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:53:44,506 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:53:44,506 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:53:44,506 [8576] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:53:44,507 [8576] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 16:53:44,507 [8576] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:53:44,507 [8576] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:53:45,032 [8952] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:53:45,033 [8952] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('FB00503') order by MerchantsCode
2016-12-18 16:53:45,285 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:53:45,286 [8576] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum
     from 
        mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId
     where  A.BillNo =  '201306050001' order by A.MaterialCode
2016-12-18 16:56:55,445 [9828] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2016-12-18 16:56:55,451 [9828] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:56:55,452 [9828] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:56:56,096 [8916] DEBUG Servicemms_rentOut - 获取动态列表
2016-12-18 16:56:56,097 [8916] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MerchantsName
     from 
        mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode
     where  isnull(IsTotal,0)<>1 order by A.BillNo
2016-12-18 16:56:56,119 [8916] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MerchantsName
     from 
        mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode
     where  isnull(IsTotal,0)<>1 ) tb_temp
2016-12-18 16:58:03,175 [9828] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 16:58:03,176 [9828] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 16:58:03,176 [9828] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 16:58:42,643 [10112] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 16:58:42,927 [8576] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 16:58:42,927 [8576] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 16:58:42,961 [9828] DEBUG Servicesys_user - 获取实体列表
2016-12-18 16:58:42,961 [9828] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 16:58:42,963 [9828] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 16:58:46,238 [10112] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 16:58:46,240 [10112] DEBUG Servicesys_user - 获取动态列表
2016-12-18 16:58:46,240 [10112] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 16:58:46,241 [10112] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 16:58:46,241 [10112] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 16:58:46,390 [9036] DEBUG Servicesys_role - 获取实体列表
2016-12-18 16:58:46,390 [9036] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 16:58:49,412 [10112] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:58:49,413 [10112] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:58:49,442 [10112] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:58:49,655 [9828] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:58:49,656 [9828] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:59:42,167 [8576] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 16:59:42,168 [8576] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 16:59:42,193 [8576] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 16:59:42,232 [10112] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 16:59:42,232 [10112] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 16:59:53,704 [9036] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2016-12-18 16:59:53,706 [9036] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:59:53,706 [9036] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:59:54,101 [9828] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:59:54,101 [9828] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 16:59:54,104 [9828] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 16:59:57,559 [9828] DEBUG Servicemms_refund - 获取新主键
2016-12-18 16:59:57,560 [9828] DEBUG Mms - select isnull(max(BillNo),0) from mms_refund
2016-12-18 16:59:57,705 [10112] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/edit')
2016-12-18 16:59:57,707 [10112] DEBUG Servicemms_refund - 获取实体对象
2016-12-18 16:59:57,707 [10112] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201612180001'
2016-12-18 16:59:57,708 [10112] DEBUG Servicemms_refund - 获取上一条下一条数据
2016-12-18 16:59:57,708 [10112] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:59:57,708 [10112] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:59:57,708 [10112] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:59:57,708 [10112] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo < '201612180001'and ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:59:57,710 [10112] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:59:57,710 [10112] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo >  '201612180001'and ProjectCode =  '201306030002' order by BillNo
2016-12-18 16:59:57,716 [10112] DEBUG Servicemms_refund - 获取字段
2016-12-18 16:59:57,716 [10112] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 16:59:57,720 [10112] DEBUG Servicesys_code - 获取动态列表
2016-12-18 16:59:57,720 [10112] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 16:59:57,721 [10112] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 16:59:57,721 [10112] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 16:59:58,437 [9780] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 16:59:58,437 [9780] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum
     from 
        mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId
     where  A.BillNo =  '201612180001' order by A.MaterialCode
2016-12-18 17:00:15,701 [8576] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 17:00:15,702 [8576] DEBUG Mms - select top 20 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('分包') order by MerchantsCode
2016-12-18 17:00:15,703 [8576] DEBUG Mms - select count(*) from ( select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('分包') ) tb_temp
2016-12-18 17:00:18,680 [9780] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 17:00:18,680 [9780] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('FB00501') order by MerchantsCode
2016-12-18 17:00:41,825 [8576] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2016-12-18 17:00:41,837 [8576] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 17:00:41,837 [8576] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 17:00:42,259 [9780] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:00:42,259 [9780] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:00:42,261 [9780] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:00:51,583 [8576] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/edit')
2016-12-18 17:00:51,585 [8576] DEBUG Servicemms_refund - 获取实体对象
2016-12-18 17:00:51,585 [8576] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201306050001'
2016-12-18 17:00:51,586 [8576] DEBUG Servicemms_refund - 获取上一条下一条数据
2016-12-18 17:00:51,586 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:00:51,586 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo
2016-12-18 17:00:51,586 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:00:51,587 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo < '201306050001'and ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 17:00:51,587 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:00:51,587 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo >  '201306050001'and ProjectCode =  '201306030002' order by BillNo
2016-12-18 17:00:51,587 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:00:51,587 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 17:00:51,587 [8576] DEBUG Servicesys_code - 获取动态列表
2016-12-18 17:00:51,587 [8576] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 17:00:51,587 [8576] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 17:00:51,587 [8576] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 17:00:52,203 [9780] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 17:00:52,203 [9780] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('FB00503') order by MerchantsCode
2016-12-18 17:00:52,455 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:00:52,456 [8576] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum
     from 
        mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId
     where  A.BillNo =  '201306050001' order by A.MaterialCode
2016-12-18 17:01:27,912 [10196] DEBUG Servicemms_refund - 编辑记录
2016-12-18 17:01:27,913 [10196] DEBUG Servicemms_refund - 获取动态对象
2016-12-18 17:01:27,913 [10196] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201306050001'
2016-12-18 17:01:27,920 [10196] DEBUG Servicemms_refund - 获取动态对象
2016-12-18 17:01:27,920 [10196] DEBUG Mms - select mms_refundDetail.* from mms_refundDetail where  BillNo =  '201306050001'and RowId =  '1'
2016-12-18 17:01:27,922 [10196] DEBUG Mms - update mms_refundDetail set [MaterialCode] = '0101010104', [Unit] = '吨', [UnitPrice] = '12', [Num] = '1', [Money] = '12', [Remark] = 'wytest', [SrcBillType] = 'send', [SrcBillNo] = '201306050002', [SrcRowId] = '1', [UpdatePerson] = '颜荣华', [UpdateDate] = '2016/12/18 17:01:27' where  BillNo =  '201306050001'and RowId =  '1'
2016-12-18 17:01:35,308 [10196] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:35,310 [10196] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:35,310 [10196] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:36,207 [9780] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:36,207 [9780] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:36,207 [9780] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:36,776 [10196] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:36,776 [10196] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:36,776 [10196] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:37,310 [9780] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:37,310 [9780] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:37,312 [9780] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:37,930 [10112] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:37,930 [10112] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:37,930 [10112] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:55,548 [10112] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:55,549 [10112] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:55,550 [10112] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:56,190 [9780] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:56,190 [9780] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:56,190 [9780] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:56,587 [10112] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:56,587 [10112] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:56,588 [10112] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:01:56,850 [9036] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:01:56,850 [9036] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:01:56,851 [9036] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:02:07,786 [9780] DEBUG Servicemms_refund - 获取新主键
2016-12-18 17:02:07,786 [9780] DEBUG Mms - select isnull(max(BillNo),0) from mms_refund
2016-12-18 17:02:07,827 [8576] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/edit')
2016-12-18 17:02:07,829 [8576] DEBUG Servicemms_refund - 获取实体对象
2016-12-18 17:02:07,829 [8576] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201612180002'
2016-12-18 17:02:07,829 [8576] DEBUG Servicemms_refund - 获取上一条下一条数据
2016-12-18 17:02:07,829 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:02:07,829 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo
2016-12-18 17:02:07,830 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:02:07,830 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo < '201612180002'and ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 17:02:07,831 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:02:07,831 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo >  '201612180002'and ProjectCode =  '201306030002' order by BillNo
2016-12-18 17:02:07,832 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:02:07,832 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 17:02:07,833 [8576] DEBUG Servicesys_code - 获取动态列表
2016-12-18 17:02:07,833 [8576] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 17:02:07,833 [8576] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 17:02:07,833 [8576] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 17:02:08,646 [10196] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:02:08,646 [10196] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum
     from 
        mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId
     where  A.BillNo =  '201612180002' order by A.MaterialCode
2016-12-18 17:02:28,074 [9036] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 17:02:28,074 [9036] DEBUG Mms - select top 20 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('分包') order by MerchantsCode
2016-12-18 17:02:28,075 [9036] DEBUG Mms - select count(*) from ( select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('分包') ) tb_temp
2016-12-18 17:02:28,383 [10196] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 17:02:28,384 [10196] DEBUG Mms - select top 20 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('分包') order by MerchantsCode
2016-12-18 17:02:28,384 [10196] DEBUG Mms - select count(*) from ( select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('分包') ) tb_temp
2016-12-18 17:02:31,147 [10196] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 17:02:31,147 [10196] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('FB00501') order by MerchantsCode
2016-12-18 17:02:35,182 [9780] DEBUG Servicemms_refund - 编辑记录
2016-12-18 17:02:35,182 [9780] DEBUG Servicemms_refund - 获取动态对象
2016-12-18 17:02:35,183 [9780] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201612180002'
2016-12-18 17:02:35,184 [9780] DEBUG Mms - update mms_refund set [BillDate] = '2016/12/18 17:02:07', [DoPerson] = '颜荣华', [RefundDate] = '2016/12/18 17:02:07', [WarehouseCode] = '201306030006', [RefundUnit] = 'FB00501', [ProjectCode] = '201306030002', [UpdatePerson] = '颜荣华', [UpdateDate] = '2016/12/18 17:02:35' where  BillNo =  '201612180002'
2016-12-18 17:02:35,188 [9780] DEBUG Mms - insert into mms_refund([BillNo],[BillDate],[DoPerson],[RefundDate],[WarehouseCode],[RefundUnit],[ProjectCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('201612180002','2016/12/18 17:02:07','颜荣华','2016/12/18 17:02:07','201306030006','FB00501','201306030002','颜荣华','2016/12/18 17:02:35','颜荣华','2016/12/18 17:02:35')
2016-12-18 17:02:46,756 [1648] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:02:46,757 [1648] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' order by A.BillNo
2016-12-18 17:02:46,758 [1648] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030002' ) tb_temp
2016-12-18 17:03:42,084 [1648] DEBUG Servicemms_refund - 获取新主键
2016-12-18 17:03:42,085 [1648] DEBUG Mms - select isnull(max(BillNo),0) from mms_refund
2016-12-18 17:03:42,127 [8576] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Mms/refund/edit')
2016-12-18 17:03:42,129 [8576] DEBUG Servicemms_refund - 获取实体对象
2016-12-18 17:03:42,129 [8576] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '201612180002'
2016-12-18 17:03:42,130 [8576] DEBUG Servicemms_refund - 获取上一条下一条数据
2016-12-18 17:03:42,130 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:03:42,130 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo
2016-12-18 17:03:42,130 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:03:42,130 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo < '201612180002'and ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 17:03:42,130 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:03:42,130 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo >  '201612180002'and ProjectCode =  '201306030002' order by BillNo
2016-12-18 17:03:42,131 [8576] DEBUG Servicemms_refund - 获取字段
2016-12-18 17:03:42,131 [8576] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030002' order by BillNo desc
2016-12-18 17:03:42,131 [8576] DEBUG Servicesys_code - 获取动态列表
2016-12-18 17:03:42,131 [8576] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2016-12-18 17:03:42,134 [8576] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 17:03:42,134 [8576] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030002'
2016-12-18 17:03:42,719 [1648] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 17:03:42,719 [1648] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('FB00501') order by MerchantsCode
2016-12-18 17:03:42,985 [8576] DEBUG Servicemms_refund - 获取动态列表
2016-12-18 17:03:42,985 [8576] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum
     from 
        mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId
     where  A.BillNo =  '201612180002' order by A.MaterialCode
2016-12-18 17:04:55,364 [10196] DEBUG Sys - 
select distinct A.OrganizeCode,A.OrganizeName,A.ParentCode
,(case when B.UserCode is null then 'false' else 'true' end) as Checked
from sys_organize A
left join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode and B.UserCode = 'yrh'
2016-12-18 17:05:07,156 [8576] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'yrh'
2016-12-18 17:05:12,022 [8576] DEBUG Servicesys_user - 设置用户角色
2016-12-18 17:05:12,023 [8576] DEBUG Sys - delete from sys_userRoleMap where [UserCode] = 'yrh'
2016-12-18 17:05:12,027 [8576] DEBUG Sys - insert into sys_userRoleMap([UserCode],[RoleCode]) values('yrh','super')
2016-12-18 17:05:16,051 [9780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 17:05:16,269 [4880] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 17:05:16,269 [4880] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 17:05:16,294 [8576] DEBUG Servicesys_user - 获取实体列表
2016-12-18 17:05:16,294 [8576] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 17:05:16,296 [8576] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 17:05:16,836 [8576] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 17:05:16,837 [8576] DEBUG Servicesys_user - 获取动态列表
2016-12-18 17:05:16,837 [8576] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 17:05:16,837 [8576] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 17:05:16,838 [8576] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 17:05:16,988 [4880] DEBUG Servicesys_role - 获取实体列表
2016-12-18 17:05:16,988 [4880] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 17:05:21,340 [10196] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 17:05:21,340 [10196] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 17:05:21,365 [10196] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 17:05:21,387 [8576] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 17:05:21,387 [8576] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 17:11:53,795 [4880] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Psi/customer/Index','/Psi/customer')
2016-12-18 17:11:53,802 [4880] DEBUG Servicepsi_warehouse - 获取动态列表
2016-12-18 17:11:53,802 [4880] ERROR Servicepsi_warehouse - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 17:11:53,818 [4880] ERROR /psi/customer - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Areas.Psi.Controllers.CustomerController.Index() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\CustomerController.cs:行号 17
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2016-12-18 17:12:10,933 [6332] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Psi/goods/Index','/Psi/goods')
2016-12-18 17:12:10,950 [6332] DEBUG Servicepsi_warehouse - 获取动态列表
2016-12-18 17:12:10,951 [6332] ERROR Servicepsi_warehouse - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 17:12:10,964 [6332] ERROR /psi/goods - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Areas.Psi.Controllers.GoodsController.Index() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\GoodsController.cs:行号 16
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2016-12-18 17:12:14,992 [4880] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Psi/warehouse/Index','/Psi/warehouse')
2016-12-18 17:12:15,700 [9780] DEBUG Servicepsi_warehouse - 获取动态列表
2016-12-18 17:12:15,701 [9780] ERROR Servicepsi_warehouse - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 17:12:15,713 [9780] ERROR /api/psi/warehouse - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Areas.Psi.Controllers.WarehouseApiController.Get(RequestWrapper query) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\WarehouseController.cs:行号 107
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2016-12-18 17:12:24,039 [6332] DEBUG Servicepsi_warehouse - 获取动态列表
2016-12-18 17:12:24,039 [6332] ERROR Servicepsi_warehouse - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 17:12:24,050 [6332] ERROR /api/psi/warehouse - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Areas.Psi.Controllers.WarehouseApiController.Get(RequestWrapper query) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\WarehouseController.cs:行号 107
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2016-12-18 17:12:31,446 [6332] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'yrh'
and C.URL in ('/Psi/goods/Index','/Psi/goods')
2016-12-18 17:12:31,448 [6332] DEBUG Servicepsi_warehouse - 获取动态列表
2016-12-18 17:12:31,448 [6332] ERROR Servicepsi_warehouse - 获取动态列表失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.Db.Context(String ConnName) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 48
   在 Zephyr.Core.ServiceBase`1.get_db() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 135
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 53
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass63.<GetDynamicList>b__62() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2016-12-18 17:12:31,463 [6332] ERROR /psi/goods - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Areas.Psi.Controllers.GoodsController.Index() 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Psi\Controllers\GoodsController.cs:行号 16
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2016-12-18 17:18:45,315 [8980] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2016-12-18 17:20:00,309 [8980] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2016-12-18 17:20:40,368 [8560] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 17:20:40,369 [8560] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='Manage' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='Manage'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='Manage'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='Manage'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='Manage'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='Manage'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='Manage'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='Manage'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='Manage'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='Manage'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='Manage'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='Manage'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='Manage'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='Manage'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='Manage'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 17:20:40,400 [8576] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 17:20:40,405 [8576] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='Manage' and B.PermissionCode = A.PermissionCode 
2016-12-18 17:20:40,434 [8560] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'Manage'
2016-12-18 17:25:42,887 [4880] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2016-12-18 17:26:20,812 [9016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 17:26:20,813 [9016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 17:26:20,842 [9016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 17:26:20,842 [7536] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 17:26:20,844 [7536] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 17:30:01,064 [6568] DEBUG Servicesys_user - 获取实体对象
2016-12-18 17:30:01,065 [6568] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  '1234'and IsEnable =  'True'
2016-12-18 17:30:01,067 [6568] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 17:30:01,070 [6568] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 17:30:01')
2016-12-18 17:30:01,071 [6568] DEBUG Servicemms_project - 获取实体对象
2016-12-18 17:30:01,076 [6568] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 17:30:01,099 [10148] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 17:30:01,220 [7536] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 17:30:29,651 [7536] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2016-12-18 17:30:29,660 [7536] DEBUG Servicemms_warehouse - 获取动态列表
2016-12-18 17:30:29,660 [7536] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2016-12-18 17:30:29,661 [7536] DEBUG Servicesys_code - 获取动态列表
2016-12-18 17:30:29,661 [7536] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2016-12-18 17:30:29,662 [7536] DEBUG Servicesys_code - 获取动态列表
2016-12-18 17:30:29,662 [7536] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2016-12-18 17:30:29,676 [7536] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 17:30:29,679 [7536] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2016-12-18 17:30:29,680 [7536] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2016-12-18 17:30:29,681 [7536] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2016-12-18 17:30:30,047 [9016] DEBUG Servicemms_send - 获取动态列表
2016-12-18 17:30:30,047 [9016] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2016-12-18 17:30:30,048 [9016] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2016-12-18 17:30:36,335 [9016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 17:30:36,340 [9016] DEBUG Servicesys_user - 获取动态列表
2016-12-18 17:30:36,341 [9016] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 17:30:36,341 [9016] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 17:30:36,341 [9016] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 17:30:36,509 [7536] DEBUG Servicesys_role - 获取实体列表
2016-12-18 17:30:36,510 [7536] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 17:30:38,714 [9016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 17:30:38,714 [9016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 17:30:38,743 [9016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 17:30:38,743 [6568] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 17:30:38,743 [6568] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 17:31:57,635 [9016] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 17:31:57,637 [9016] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 17:31:57,658 [9924] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 17:31:57,658 [9924] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 17:31:57,741 [9016] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 17:32:04,507 [7536] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2016-12-18 17:32:34,256 [784] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 17:32:49,293 [7536] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 17:32:50,704 [4880] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 17:32:51,777 [784] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 17:32:53,034 [9016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 17:32:54,217 [6568] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/code/Index','/Sys/code')
2016-12-18 17:32:55,178 [9016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/parameter/Index','/Sys/parameter')
2016-12-18 17:32:56,173 [6004] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/log/Index','/Sys/log')
2016-12-18 17:32:57,212 [6568] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/log/Index','/Sys/log')
2016-12-18 17:32:58,443 [7536] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 17:32:59,894 [6568] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/backup/Index','/Sys/backup')
2016-12-18 17:38:41,707 [784] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 17:40:08,038 [4880] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 17:41:14,427 [6004] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/parameter/Index','/Sys/parameter')
2016-12-18 17:41:16,091 [7536] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 17:41:16,951 [9664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 17:41:17,557 [4880] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 17:41:18,118 [9016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 17:41:19,023 [9664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 17:41:20,211 [4880] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/parameter/Index','/Sys/parameter')
2016-12-18 17:41:20,710 [7536] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/code/Index','/Sys/code')
2016-12-18 17:41:21,347 [6004] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/log/Index','/Sys/log')
2016-12-18 17:41:21,945 [7748] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/log/Index','/Sys/log')
2016-12-18 17:41:22,926 [6568] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 17:41:24,550 [9016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/backup/Index','/Sys/backup')
2016-12-18 17:41:26,377 [784] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 17:45:01,851 [7748] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 17:46:23,565 [9664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 18:02:30,705 [4880] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 18:02:30,892 [7748] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 18:20:44,280 [4880] DEBUG Servicesys_user - 获取实体对象
2016-12-18 18:20:44,285 [4880] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  '许薛军'and Password =  'xxj'and IsEnable =  'True'
2016-12-18 18:21:06,030 [6004] DEBUG Servicesys_user - 获取实体对象
2016-12-18 18:21:06,031 [6004] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  '许薛军'and Password =  'xxj'and IsEnable =  'True'
2016-12-18 19:08:11,495 [6852] DEBUG Servicesys_user - 获取实体对象
2016-12-18 19:08:11,500 [6852] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  'xxj'and IsEnable =  'True'
2016-12-18 19:08:11,501 [6852] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 19:08:11,506 [6852] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 19:08:11')
2016-12-18 19:08:11,508 [6852] DEBUG Servicemms_project - 获取实体对象
2016-12-18 19:08:11,512 [6852] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 19:08:11,542 [6124] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 19:08:11,654 [6852] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 19:09:31,077 [6852] DEBUG Servicesys_user - 获取实体对象
2016-12-18 19:09:31,077 [6852] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  'xxj'and IsEnable =  'True'
2016-12-18 19:09:31,078 [6852] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 19:09:31,080 [6852] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','许薛军','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 19:09:31')
2016-12-18 19:09:31,082 [6852] DEBUG Servicemms_project - 获取实体对象
2016-12-18 19:09:31,082 [6852] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 19:09:31,111 [8788] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 19:09:31,219 [6124] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 19:27:58,011 [8788] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 19:27:58,181 [9440] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 19:28:02,040 [8364] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 19:28:02,288 [6456] DEBUG Servicesys_user - 获取实体列表
2016-12-18 19:28:02,288 [6456] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 19:28:02,290 [6456] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 19:28:02,307 [8788] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:02,307 [8788] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:12,617 [8364] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 19:28:12,624 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:12,624 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:18,371 [8788] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '04050101'
2016-12-18 19:28:18,375 [8788] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '04050101'
2016-12-18 19:28:18,379 [8788] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:18,379 [8788] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:21,701 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040505'
2016-12-18 19:28:21,702 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040505'
2016-12-18 19:28:21,703 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:21,703 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:25,404 [6456] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040504'
2016-12-18 19:28:25,405 [6456] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040504'
2016-12-18 19:28:25,406 [6456] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:25,406 [6456] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:29,473 [8788] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040503'
2016-12-18 19:28:29,475 [8788] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040503'
2016-12-18 19:28:29,478 [8788] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:29,479 [8788] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:32,240 [6456] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040502'
2016-12-18 19:28:32,241 [6456] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040502'
2016-12-18 19:28:32,243 [6456] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:32,243 [6456] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:35,580 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040501'
2016-12-18 19:28:35,580 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040501'
2016-12-18 19:28:35,581 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:35,581 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:39,051 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0405'
2016-12-18 19:28:39,052 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0405'
2016-12-18 19:28:39,052 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:39,052 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:42,901 [6456] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040201'
2016-12-18 19:28:42,902 [6456] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040201'
2016-12-18 19:28:42,907 [6456] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:42,907 [6456] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:45,515 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040202'
2016-12-18 19:28:45,516 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040202'
2016-12-18 19:28:45,519 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:45,519 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:52,983 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '04060101'
2016-12-18 19:28:52,985 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '04060101'
2016-12-18 19:28:52,990 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:52,990 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:28:59,444 [8788] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040601'
2016-12-18 19:28:59,444 [8788] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040601'
2016-12-18 19:28:59,446 [8788] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:28:59,446 [8788] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:02,403 [7944] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040602'
2016-12-18 19:29:02,405 [7944] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040602'
2016-12-18 19:29:02,407 [7944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:02,407 [7944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:05,724 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040603'
2016-12-18 19:29:05,726 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040603'
2016-12-18 19:29:05,728 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:05,728 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:09,349 [8788] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040604'
2016-12-18 19:29:09,349 [8788] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040604'
2016-12-18 19:29:09,350 [8788] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:09,350 [8788] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:12,999 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040605'
2016-12-18 19:29:13,001 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040605'
2016-12-18 19:29:13,016 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:13,016 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:17,459 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040701'
2016-12-18 19:29:17,463 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040701'
2016-12-18 19:29:17,463 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:17,464 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:21,558 [7944] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040801'
2016-12-18 19:29:21,559 [7944] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040801'
2016-12-18 19:29:21,562 [7944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:21,562 [7944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:27,409 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040802'
2016-12-18 19:29:27,410 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040802'
2016-12-18 19:29:27,417 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:27,417 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:31,051 [6456] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040803'
2016-12-18 19:29:31,052 [6456] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040803'
2016-12-18 19:29:31,056 [6456] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:31,056 [6456] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:34,987 [6456] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040804'
2016-12-18 19:29:34,988 [6456] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040804'
2016-12-18 19:29:34,989 [6456] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:34,989 [6456] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:38,352 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040805'
2016-12-18 19:29:38,352 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040805'
2016-12-18 19:29:38,363 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:38,363 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:42,334 [7944] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040901'
2016-12-18 19:29:42,334 [7944] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040901'
2016-12-18 19:29:42,335 [7944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:42,335 [7944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:45,828 [5236] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040902'
2016-12-18 19:29:45,829 [5236] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040902'
2016-12-18 19:29:45,829 [5236] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:45,829 [5236] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:49,564 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '040903'
2016-12-18 19:29:49,565 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '040903'
2016-12-18 19:29:49,565 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:49,565 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:29:52,830 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '041001'
2016-12-18 19:29:52,831 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '041001'
2016-12-18 19:29:52,831 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:29:52,831 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:32:07,318 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0406'
2016-12-18 19:32:07,321 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0406'
2016-12-18 19:32:07,328 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:32:07,328 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:32:10,299 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0407'
2016-12-18 19:32:10,299 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0407'
2016-12-18 19:32:10,300 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:32:10,300 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:32:14,432 [7944] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0408'
2016-12-18 19:32:14,433 [7944] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0408'
2016-12-18 19:32:14,434 [7944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:32:14,434 [7944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:32:17,543 [9300] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0409'
2016-12-18 19:32:17,543 [9300] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0409'
2016-12-18 19:32:17,544 [9300] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:32:17,544 [9300] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:32:20,238 [9300] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0410'
2016-12-18 19:32:20,240 [9300] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0410'
2016-12-18 19:32:20,243 [9300] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:32:20,243 [9300] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:33:00,058 [9300] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:33:00,058 [9300] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:33:00,062 [9300] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0405'
2016-12-18 19:33:00,065 [9300] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '04', [OrganizeCode] = '0405', [OrganizeName] = '养护管理处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:33:00' where  OrganizeCode =  '0405'
2016-12-18 19:33:00,069 [9300] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('04','0405','养护管理处','许薛军','2016/12/18 19:33:00','许薛军','2016/12/18 19:33:00')
2016-12-18 19:33:00,075 [9300] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:33:00,076 [9300] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:33:21,738 [7944] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0405'
2016-12-18 19:33:21,738 [7944] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0405'
2016-12-18 19:33:21,739 [7944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:33:21,740 [7944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:33:25,011 [9300] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0404'
2016-12-18 19:33:25,011 [9300] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0404'
2016-12-18 19:33:25,015 [9300] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:33:25,015 [9300] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:34:38,141 [9300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 19:34:38,143 [9300] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:34:38,143 [9300] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:34:39,035 [9260] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 19:34:39,035 [9260] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:34:39,035 [9260] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:34:45,577 [9440] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0403'
2016-12-18 19:34:45,578 [9440] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0403'
2016-12-18 19:34:45,584 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:34:45,585 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:34:47,587 [7484] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0403'
2016-12-18 19:34:47,587 [7484] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0403'
2016-12-18 19:34:47,587 [7484] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:34:47,587 [7484] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:34:53,829 [9260] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0402'
2016-12-18 19:34:53,831 [9260] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0402'
2016-12-18 19:34:53,835 [9260] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:34:53,835 [9260] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:34:57,885 [9260] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0401'
2016-12-18 19:34:57,886 [9260] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0401'
2016-12-18 19:34:57,886 [9260] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:34:57,886 [9260] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:35:07,926 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '04'
2016-12-18 19:35:07,927 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '04'
2016-12-18 19:35:07,929 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:35:07,929 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:36:01,259 [7780] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:36:01,259 [7780] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:36:01,260 [7780] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '01'
2016-12-18 19:36:01,262 [7780] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0', [OrganizeCode] = '01', [OrganizeName] = '广东省公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:36:01' where  OrganizeCode =  '01'
2016-12-18 19:36:01,266 [7780] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0','01','广东省公路管理局','许薛军','2016/12/18 19:36:01','许薛军','2016/12/18 19:36:01')
2016-12-18 19:36:01,268 [7780] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:36:01,268 [7780] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:36:41,135 [9440] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:36:41,136 [9440] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:36:41,137 [9440] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0401'
2016-12-18 19:36:41,138 [9440] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '04', [OrganizeCode] = '0401', [OrganizeName] = '计划财审处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:36:41' where  OrganizeCode =  '0401'
2016-12-18 19:36:41,144 [9440] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('04','0401','计划财审处','许薛军','2016/12/18 19:36:41','许薛军','2016/12/18 19:36:41')
2016-12-18 19:36:41,150 [9440] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:36:41,152 [9440] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:36:51,102 [8364] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0401'
2016-12-18 19:36:51,106 [8364] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0401'
2016-12-18 19:36:51,113 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:36:51,113 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:37:24,702 [968] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:37:24,702 [968] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:37:24,702 [968] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0101'
2016-12-18 19:37:24,703 [968] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0101', [OrganizeName] = '计划财审处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:37:24' where  OrganizeCode =  '0101'
2016-12-18 19:37:24,705 [968] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0101','计划财审处','许薛军','2016/12/18 19:37:24','许薛军','2016/12/18 19:37:24')
2016-12-18 19:37:24,706 [968] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:37:24,706 [968] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:37:45,666 [8364] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:37:45,666 [8364] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:37:45,670 [8364] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0102'
2016-12-18 19:37:45,672 [8364] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0102', [OrganizeName] = '基本建设处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:37:45' where  OrganizeCode =  '0102'
2016-12-18 19:37:45,676 [8364] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0102','基本建设处','许薛军','2016/12/18 19:37:45','许薛军','2016/12/18 19:37:45')
2016-12-18 19:37:45,677 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:37:45,678 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:38:00,667 [8364] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:38:00,667 [8364] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:38:00,667 [8364] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0103'
2016-12-18 19:38:00,670 [8364] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0103', [OrganizeName] = '安全监督处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:38:00' where  OrganizeCode =  '0103'
2016-12-18 19:38:00,675 [8364] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0103','安全监督处','许薛军','2016/12/18 19:38:00','许薛军','2016/12/18 19:38:00')
2016-12-18 19:38:00,689 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:38:00,690 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:38:19,748 [7780] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:38:19,748 [7780] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:38:19,748 [7780] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0104'
2016-12-18 19:38:19,750 [7780] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0104', [OrganizeName] = '养护管理处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:38:19' where  OrganizeCode =  '0104'
2016-12-18 19:38:19,754 [7780] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0104','养护管理处','许薛军','2016/12/18 19:38:19','许薛军','2016/12/18 19:38:19')
2016-12-18 19:38:19,759 [7780] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:38:19,760 [7780] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:38:40,906 [9260] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:38:40,907 [9260] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:38:40,908 [9260] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0105'
2016-12-18 19:38:40,909 [9260] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0105', [OrganizeName] = '路政管理处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:38:40' where  OrganizeCode =  '0105'
2016-12-18 19:38:40,911 [9260] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0105','路政管理处','许薛军','2016/12/18 19:38:40','许薛军','2016/12/18 19:38:40')
2016-12-18 19:38:40,912 [9260] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:38:40,913 [9260] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:38:59,980 [9260] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:38:59,980 [9260] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:38:59,985 [9260] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0106'
2016-12-18 19:38:59,986 [9260] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0106', [OrganizeName] = '收费与科技教育处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:38:59' where  OrganizeCode =  '0106'
2016-12-18 19:38:59,991 [9260] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0106','收费与科技教育处','许薛军','2016/12/18 19:38:59','许薛军','2016/12/18 19:38:59')
2016-12-18 19:38:59,993 [9260] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:38:59,993 [9260] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:39:22,645 [8364] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:39:22,645 [8364] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:39:22,645 [8364] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0107'
2016-12-18 19:39:22,646 [8364] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0107', [OrganizeName] = '人事处', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:39:22' where  OrganizeCode =  '0107'
2016-12-18 19:39:22,649 [8364] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0107','人事处','许薛军','2016/12/18 19:39:22','许薛军','2016/12/18 19:39:22')
2016-12-18 19:39:22,657 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:39:22,658 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:39:43,098 [9260] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:39:43,099 [9260] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:39:43,099 [9260] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0108'
2016-12-18 19:39:43,100 [9260] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0108', [OrganizeName] = '监察室', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:39:43' where  OrganizeCode =  '0108'
2016-12-18 19:39:43,105 [9260] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0108','监察室','许薛军','2016/12/18 19:39:43','许薛军','2016/12/18 19:39:43')
2016-12-18 19:39:43,112 [9260] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:39:43,112 [9260] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:40:08,797 [7780] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:40:08,798 [7780] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:40:08,798 [7780] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0109'
2016-12-18 19:40:08,799 [7780] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0109', [OrganizeName] = '广东省公路管理局茂名沥青储运中心', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:40:08' where  OrganizeCode =  '0109'
2016-12-18 19:40:08,801 [7780] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0109','广东省公路管理局茂名沥青储运中心','许薛军','2016/12/18 19:40:08','许薛军','2016/12/18 19:40:08')
2016-12-18 19:40:08,802 [7780] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:40:08,803 [7780] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:40:34,120 [9260] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:40:34,120 [9260] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:40:34,121 [9260] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0110'
2016-12-18 19:40:34,122 [9260] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0110', [OrganizeName] = '广东省路桥规划研究中心', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:40:34' where  OrganizeCode =  '0110'
2016-12-18 19:40:34,126 [9260] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0110','广东省路桥规划研究中心','许薛军','2016/12/18 19:40:34','许薛军','2016/12/18 19:40:34')
2016-12-18 19:40:34,128 [9260] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:40:34,129 [9260] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:40:49,837 [8364] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:40:49,837 [8364] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:40:49,841 [8364] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0111'
2016-12-18 19:40:49,844 [8364] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0111', [OrganizeName] = '广东省公路管理局路桥中心', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:40:49' where  OrganizeCode =  '0111'
2016-12-18 19:40:49,851 [8364] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0111','广东省公路管理局路桥中心','许薛军','2016/12/18 19:40:49','许薛军','2016/12/18 19:40:49')
2016-12-18 19:40:49,859 [8364] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:40:49,862 [8364] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:41:10,564 [7780] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:41:10,564 [7780] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:41:10,565 [7780] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0112'
2016-12-18 19:41:10,566 [7780] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0112', [OrganizeName] = '广东省公路工程质量监测中心', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:41:10' where  OrganizeCode =  '0112'
2016-12-18 19:41:10,571 [7780] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0112','广东省公路工程质量监测中心','许薛军','2016/12/18 19:41:10','许薛军','2016/12/18 19:41:10')
2016-12-18 19:41:10,577 [7780] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:41:10,578 [7780] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:41:23,857 [2032] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:41:23,857 [2032] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:41:23,859 [2032] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0113'
2016-12-18 19:41:23,865 [2032] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0113', [OrganizeName] = '广东省公路管理局科技教育中心', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:41:23' where  OrganizeCode =  '0113'
2016-12-18 19:41:23,872 [2032] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0113','广东省公路管理局科技教育中心','许薛军','2016/12/18 19:41:23','许薛军','2016/12/18 19:41:23')
2016-12-18 19:41:23,876 [2032] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:41:23,876 [2032] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:41:47,757 [2032] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:41:47,757 [2032] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:41:47,760 [2032] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0114'
2016-12-18 19:41:47,764 [2032] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0114', [OrganizeName] = '广东省惠州市公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:41:47' where  OrganizeCode =  '0114'
2016-12-18 19:41:47,771 [2032] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0114','广东省惠州市公路管理局','许薛军','2016/12/18 19:41:47','许薛军','2016/12/18 19:41:47')
2016-12-18 19:41:47,772 [2032] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:41:47,772 [2032] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:42:07,583 [2032] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:42:07,583 [2032] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:42:07,585 [2032] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0115'
2016-12-18 19:42:07,586 [2032] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '01', [OrganizeCode] = '0115', [OrganizeName] = '广东省清远市公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:42:07' where  OrganizeCode =  '0115'
2016-12-18 19:42:07,590 [2032] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','0115','广东省清远市公路管理局','许薛军','2016/12/18 19:42:07','许薛军','2016/12/18 19:42:07')
2016-12-18 19:42:07,592 [2032] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:42:07,593 [2032] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:51:07,084 [8824] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:51:07,085 [8824] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:51:07,099 [8824] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011401'
2016-12-18 19:51:07,099 [8824] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011401', [OrganizeName] = '惠州市惠城公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:51:07' where  OrganizeCode =  '011401'
2016-12-18 19:51:07,102 [8824] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011401','惠州市惠城公路管理局','许薛军','2016/12/18 19:51:07','许薛军','2016/12/18 19:51:07')
2016-12-18 19:51:07,104 [8824] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:51:07,104 [8824] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:51:30,336 [3608] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:51:30,336 [3608] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:51:30,351 [3608] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011402'
2016-12-18 19:51:30,352 [3608] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011402', [OrganizeName] = '惠州市惠阳公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:51:30' where  OrganizeCode =  '011402'
2016-12-18 19:51:30,356 [3608] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011402','惠州市惠阳公路管理局','许薛军','2016/12/18 19:51:30','许薛军','2016/12/18 19:51:30')
2016-12-18 19:51:30,357 [3608] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:51:30,357 [3608] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:52:08,519 [10156] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:52:08,519 [10156] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:52:08,520 [10156] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011403'
2016-12-18 19:52:08,520 [10156] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011403', [OrganizeName] = '惠州市惠东公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:52:08' where  OrganizeCode =  '011403'
2016-12-18 19:52:08,523 [10156] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011403','惠州市惠东公路管理局','许薛军','2016/12/18 19:52:08','许薛军','2016/12/18 19:52:08')
2016-12-18 19:52:08,525 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:52:08,525 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:52:22,240 [8772] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:52:22,240 [8772] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:52:22,243 [8772] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011404'
2016-12-18 19:52:22,245 [8772] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011404', [OrganizeName] = '惠州市博罗公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:52:22' where  OrganizeCode =  '011404'
2016-12-18 19:52:22,248 [8772] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011404','惠州市博罗公路管理局','许薛军','2016/12/18 19:52:22','许薛军','2016/12/18 19:52:22')
2016-12-18 19:52:22,249 [8772] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:52:22,249 [8772] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:52:54,988 [8824] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:52:54,988 [8824] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:52:54,990 [8824] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011405'
2016-12-18 19:52:54,990 [8824] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011405', [OrganizeName] = '惠州市龙门公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:52:54' where  OrganizeCode =  '011405'
2016-12-18 19:52:54,996 [8824] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011405','惠州市龙门公路管理局','许薛军','2016/12/18 19:52:54','许薛军','2016/12/18 19:52:54')
2016-12-18 19:52:54,999 [8824] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:52:54,999 [8824] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:53:12,790 [6944] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:53:12,790 [6944] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:53:12,790 [6944] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011406'
2016-12-18 19:53:12,791 [6944] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011406', [OrganizeName] = '惠州市车辆通行费年票管理中心', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:53:12' where  OrganizeCode =  '011406'
2016-12-18 19:53:12,802 [6944] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011406','惠州市车辆通行费年票管理中心','许薛军','2016/12/18 19:53:12','许薛军','2016/12/18 19:53:12')
2016-12-18 19:53:12,805 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:53:12,805 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:53:25,382 [5828] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:53:25,382 [5828] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:53:25,383 [5828] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011407'
2016-12-18 19:53:25,384 [5828] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011407', [OrganizeName] = '惠州市公路管理局职工培训学校', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:53:25' where  OrganizeCode =  '011407'
2016-12-18 19:53:25,386 [5828] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011407','惠州市公路管理局职工培训学校','许薛军','2016/12/18 19:53:25','许薛军','2016/12/18 19:53:25')
2016-12-18 19:53:25,387 [5828] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:53:25,387 [5828] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:54:34,050 [1912] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '011407'
2016-12-18 19:54:34,053 [1912] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '011407'
2016-12-18 19:54:34,058 [1912] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:54:34,058 [1912] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:54:37,481 [10156] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '011406'
2016-12-18 19:54:37,481 [10156] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '011406'
2016-12-18 19:54:37,482 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:54:37,482 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:54:40,022 [10156] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '011405'
2016-12-18 19:54:40,023 [10156] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '011405'
2016-12-18 19:54:40,029 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:54:40,029 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:54:43,035 [8824] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '011404'
2016-12-18 19:54:43,037 [8824] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '011404'
2016-12-18 19:54:43,041 [8824] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:54:43,041 [8824] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:54:45,845 [1912] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '011403'
2016-12-18 19:54:45,846 [1912] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '011403'
2016-12-18 19:54:45,853 [1912] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:54:45,853 [1912] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:54:49,295 [6944] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '011402'
2016-12-18 19:54:49,296 [6944] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '011402'
2016-12-18 19:54:49,296 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:54:49,296 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:54:52,697 [8772] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '011401'
2016-12-18 19:54:52,697 [8772] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '011401'
2016-12-18 19:54:52,698 [8772] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:54:52,698 [8772] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:55:19,110 [6944] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:55:19,110 [6944] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:55:19,111 [6944] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011401'
2016-12-18 19:55:19,113 [6944] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011401', [OrganizeName] = '党委办公室', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:55:19' where  OrganizeCode =  '011401'
2016-12-18 19:55:19,115 [6944] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011401','党委办公室','许薛军','2016/12/18 19:55:19','许薛军','2016/12/18 19:55:19')
2016-12-18 19:55:19,123 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:55:19,123 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:55:34,029 [1912] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:55:34,029 [1912] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:55:34,029 [1912] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011402'
2016-12-18 19:55:34,032 [1912] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011402', [OrganizeName] = '办公室', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:55:34' where  OrganizeCode =  '011402'
2016-12-18 19:55:34,036 [1912] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011402','办公室','许薛军','2016/12/18 19:55:34','许薛军','2016/12/18 19:55:34')
2016-12-18 19:55:34,041 [1912] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:55:34,042 [1912] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:55:44,124 [8772] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:55:44,124 [8772] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:55:44,135 [8772] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011403'
2016-12-18 19:55:44,137 [8772] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011403', [OrganizeName] = '人事科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:55:44' where  OrganizeCode =  '011403'
2016-12-18 19:55:44,140 [8772] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011403','人事科','许薛军','2016/12/18 19:55:44','许薛军','2016/12/18 19:55:44')
2016-12-18 19:55:44,142 [8772] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:55:44,142 [8772] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:55:56,118 [7896] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:55:56,118 [7896] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:55:56,130 [7896] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011404'
2016-12-18 19:55:56,132 [7896] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011404', [OrganizeName] = '工程科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:55:56' where  OrganizeCode =  '011404'
2016-12-18 19:55:56,136 [7896] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011404','工程科','许薛军','2016/12/18 19:55:56','许薛军','2016/12/18 19:55:56')
2016-12-18 19:55:56,139 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:55:56,139 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:56:05,564 [5828] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:56:05,565 [5828] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:56:05,566 [5828] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011405'
2016-12-18 19:56:05,567 [5828] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011405', [OrganizeName] = '养护科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:56:05' where  OrganizeCode =  '011405'
2016-12-18 19:56:05,570 [5828] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011405','养护科','许薛军','2016/12/18 19:56:05','许薛军','2016/12/18 19:56:05')
2016-12-18 19:56:05,571 [5828] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:56:05,571 [5828] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:56:14,444 [5828] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:56:14,444 [5828] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:56:14,444 [5828] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011406'
2016-12-18 19:56:14,446 [5828] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011406', [OrganizeName] = '计划科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:56:14' where  OrganizeCode =  '011406'
2016-12-18 19:56:14,452 [5828] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011406','计划科','许薛军','2016/12/18 19:56:14','许薛军','2016/12/18 19:56:14')
2016-12-18 19:56:14,453 [5828] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:56:14,454 [5828] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:56:27,036 [7896] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:56:27,036 [7896] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:56:27,038 [7896] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011407'
2016-12-18 19:56:27,039 [7896] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011407', [OrganizeName] = '财务科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:56:27' where  OrganizeCode =  '011407'
2016-12-18 19:56:27,043 [7896] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011407','财务科','许薛军','2016/12/18 19:56:27','许薛军','2016/12/18 19:56:27')
2016-12-18 19:56:27,043 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:56:27,043 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:56:35,811 [8772] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:56:35,811 [8772] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:56:35,811 [8772] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011408'
2016-12-18 19:56:35,813 [8772] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011408', [OrganizeName] = '审计科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:56:35' where  OrganizeCode =  '011408'
2016-12-18 19:56:35,816 [8772] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011408','审计科','许薛军','2016/12/18 19:56:35','许薛军','2016/12/18 19:56:35')
2016-12-18 19:56:35,817 [8772] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:56:35,817 [8772] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:57:14,956 [6944] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:57:14,956 [6944] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:57:14,959 [6944] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011409'
2016-12-18 19:57:14,962 [6944] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011409', [OrganizeName] = '路政科', [Description] = '惠州市公路路政管理所', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:57:14' where  OrganizeCode =  '011409'
2016-12-18 19:57:14,978 [6944] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011409','路政科','惠州市公路路政管理所','许薛军','2016/12/18 19:57:14','许薛军','2016/12/18 19:57:14')
2016-12-18 19:57:14,980 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:57:14,980 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:57:32,049 [7896] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:57:32,049 [7896] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:57:32,050 [7896] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011410'
2016-12-18 19:57:32,051 [7896] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011410', [OrganizeName] = '政策法规科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:57:32' where  OrganizeCode =  '011410'
2016-12-18 19:57:32,056 [7896] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011410','政策法规科','许薛军','2016/12/18 19:57:32','许薛军','2016/12/18 19:57:32')
2016-12-18 19:57:32,057 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:57:32,057 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:57:47,522 [8772] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:57:47,523 [8772] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:57:47,523 [8772] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011411'
2016-12-18 19:57:47,524 [8772] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011411', [OrganizeName] = '安全科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:57:47' where  OrganizeCode =  '011411'
2016-12-18 19:57:47,527 [8772] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011411','安全科','许薛军','2016/12/18 19:57:47','许薛军','2016/12/18 19:57:47')
2016-12-18 19:57:47,537 [8772] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:57:47,538 [8772] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:57:58,350 [7896] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:57:58,350 [7896] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:57:58,351 [7896] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011412'
2016-12-18 19:57:58,353 [7896] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011412', [OrganizeName] = '离退休管理科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:57:58' where  OrganizeCode =  '011412'
2016-12-18 19:57:58,357 [7896] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011412','离退休管理科','许薛军','2016/12/18 19:57:58','许薛军','2016/12/18 19:57:58')
2016-12-18 19:57:58,361 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:57:58,361 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 19:59:55,565 [7896] DEBUG Servicesys_organize - 编辑记录
2016-12-18 19:59:55,565 [7896] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 19:59:55,569 [7896] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011413'
2016-12-18 19:59:55,570 [7896] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011413', [OrganizeName] = '惠州市惠城公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 19:59:55' where  OrganizeCode =  '011413'
2016-12-18 19:59:55,577 [7896] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011413','惠州市惠城公路管理局','许薛军','2016/12/18 19:59:55','许薛军','2016/12/18 19:59:55')
2016-12-18 19:59:55,580 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 19:59:55,581 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:00:03,789 [7896] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 20:00:03,790 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:00:03,791 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:00:13,435 [10156] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:00:13,435 [10156] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:00:13,435 [10156] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011414'
2016-12-18 20:00:13,436 [10156] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011414', [OrganizeName] = '惠州市惠阳公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:00:13' where  OrganizeCode =  '011414'
2016-12-18 20:00:13,444 [10156] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011414','惠州市惠阳公路管理局','许薛军','2016/12/18 20:00:13','许薛军','2016/12/18 20:00:13')
2016-12-18 20:00:13,448 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:00:13,449 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:00:26,418 [7896] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:00:26,418 [7896] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:00:26,422 [7896] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011415'
2016-12-18 20:00:26,422 [7896] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011415', [OrganizeName] = '惠州市惠东公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:00:26' where  OrganizeCode =  '011415'
2016-12-18 20:00:26,425 [7896] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011415','惠州市惠东公路管理局','许薛军','2016/12/18 20:00:26','许薛军','2016/12/18 20:00:26')
2016-12-18 20:00:26,432 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:00:26,433 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:00:38,892 [4016] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:00:38,892 [4016] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:00:38,894 [4016] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011416'
2016-12-18 20:00:38,900 [4016] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011416', [OrganizeName] = '惠州市博罗公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:00:38' where  OrganizeCode =  '011416'
2016-12-18 20:00:38,907 [4016] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011416','惠州市博罗公路管理局','许薛军','2016/12/18 20:00:38','许薛军','2016/12/18 20:00:38')
2016-12-18 20:00:38,908 [4016] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:00:38,908 [4016] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:00:48,003 [6944] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:00:48,003 [6944] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:00:48,004 [6944] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011417'
2016-12-18 20:00:48,005 [6944] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011417', [OrganizeName] = '惠州市龙门公路管理局', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:00:48' where  OrganizeCode =  '011417'
2016-12-18 20:00:48,008 [6944] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011417','惠州市龙门公路管理局','许薛军','2016/12/18 20:00:48','许薛军','2016/12/18 20:00:48')
2016-12-18 20:00:48,010 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:00:48,010 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:00:59,585 [6944] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:00:59,585 [6944] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:00:59,586 [6944] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011418'
2016-12-18 20:00:59,587 [6944] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011418', [OrganizeName] = '惠州市车辆通行费年票管理中心', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:00:59' where  OrganizeCode =  '011418'
2016-12-18 20:00:59,591 [6944] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011418','惠州市车辆通行费年票管理中心','许薛军','2016/12/18 20:00:59','许薛军','2016/12/18 20:00:59')
2016-12-18 20:00:59,592 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:00:59,592 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:01:17,832 [10156] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:01:17,832 [10156] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:01:17,839 [10156] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011419'
2016-12-18 20:01:17,841 [10156] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0114', [OrganizeCode] = '011419', [OrganizeName] = '惠州市公路管理局职工培训学校', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:01:17' where  OrganizeCode =  '011419'
2016-12-18 20:01:17,846 [10156] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0114','011419','惠州市公路管理局职工培训学校','许薛军','2016/12/18 20:01:17','许薛军','2016/12/18 20:01:17')
2016-12-18 20:01:17,848 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:01:17,849 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:03:07,876 [10156] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:03:07,876 [10156] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:03:07,878 [10156] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011501'
2016-12-18 20:03:07,883 [10156] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011501', [OrganizeName] = '办公室', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:03:07' where  OrganizeCode =  '011501'
2016-12-18 20:03:07,888 [10156] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011501','办公室','许薛军','2016/12/18 20:03:07','许薛军','2016/12/18 20:03:07')
2016-12-18 20:03:07,890 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:03:07,891 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:03:21,515 [6944] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:03:21,515 [6944] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:03:21,517 [6944] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011502'
2016-12-18 20:03:21,518 [6944] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011502', [OrganizeName] = '总工程师办公室', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:03:21' where  OrganizeCode =  '011502'
2016-12-18 20:03:21,524 [6944] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011502','总工程师办公室','许薛军','2016/12/18 20:03:21','许薛军','2016/12/18 20:03:21')
2016-12-18 20:03:21,531 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:03:21,532 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:03:31,166 [8116] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:03:31,167 [8116] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:03:31,167 [8116] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011503'
2016-12-18 20:03:31,168 [8116] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011503', [OrganizeName] = '基本建设科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:03:31' where  OrganizeCode =  '011503'
2016-12-18 20:03:31,173 [8116] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011503','基本建设科','许薛军','2016/12/18 20:03:31','许薛军','2016/12/18 20:03:31')
2016-12-18 20:03:31,182 [8116] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:03:31,185 [8116] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:03:41,159 [8116] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:03:41,160 [8116] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:03:41,162 [8116] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011504'
2016-12-18 20:03:41,164 [8116] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011504', [OrganizeName] = '养护管理科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:03:41' where  OrganizeCode =  '011504'
2016-12-18 20:03:41,172 [8116] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011504','养护管理科','许薛军','2016/12/18 20:03:41','许薛军','2016/12/18 20:03:41')
2016-12-18 20:03:41,179 [8116] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:03:41,179 [8116] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:03:50,401 [10156] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:03:50,402 [10156] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:03:50,403 [10156] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011505'
2016-12-18 20:03:50,404 [10156] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011505', [OrganizeName] = '路政管理科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:03:50' where  OrganizeCode =  '011505'
2016-12-18 20:03:50,407 [10156] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011505','路政管理科','许薛军','2016/12/18 20:03:50','许薛军','2016/12/18 20:03:50')
2016-12-18 20:03:50,409 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:03:50,410 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:04:00,113 [10156] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:04:00,114 [10156] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:04:00,114 [10156] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011506'
2016-12-18 20:04:00,115 [10156] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011506', [OrganizeName] = '安全生产科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:04:00' where  OrganizeCode =  '011506'
2016-12-18 20:04:00,128 [10156] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011506','安全生产科','许薛军','2016/12/18 20:04:00','许薛军','2016/12/18 20:04:00')
2016-12-18 20:04:00,132 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:04:00,134 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:04:08,799 [8376] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:04:08,800 [8376] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:04:08,801 [8376] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011507'
2016-12-18 20:04:08,802 [8376] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011507', [OrganizeName] = '人事科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:04:08' where  OrganizeCode =  '011507'
2016-12-18 20:04:08,806 [8376] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011507','人事科','许薛军','2016/12/18 20:04:08','许薛军','2016/12/18 20:04:08')
2016-12-18 20:04:08,810 [8376] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:04:08,811 [8376] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:04:18,330 [8376] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:04:18,330 [8376] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:04:18,331 [8376] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011508'
2016-12-18 20:04:18,333 [8376] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011508', [OrganizeName] = '纪检监察科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:04:18' where  OrganizeCode =  '011508'
2016-12-18 20:04:18,338 [8376] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011508','纪检监察科','许薛军','2016/12/18 20:04:18','许薛军','2016/12/18 20:04:18')
2016-12-18 20:04:18,339 [8376] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:04:18,339 [8376] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:04:26,931 [10156] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:04:26,931 [10156] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:04:26,933 [10156] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011509'
2016-12-18 20:04:26,934 [10156] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011509', [OrganizeName] = '科技教育科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:04:26' where  OrganizeCode =  '011509'
2016-12-18 20:04:26,943 [10156] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011509','科技教育科','许薛军','2016/12/18 20:04:26','许薛军','2016/12/18 20:04:26')
2016-12-18 20:04:26,945 [10156] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:04:26,945 [10156] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:04:46,964 [8116] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:04:46,964 [8116] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:04:46,968 [8116] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011510'
2016-12-18 20:04:46,971 [8116] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011510', [OrganizeName] = '计划科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:04:46' where  OrganizeCode =  '011510'
2016-12-18 20:04:46,976 [8116] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011510','计划科','许薛军','2016/12/18 20:04:46','许薛军','2016/12/18 20:04:46')
2016-12-18 20:04:46,978 [8116] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:04:46,978 [8116] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:04:55,217 [7896] DEBUG Servicesys_organize - 编辑记录
2016-12-18 20:04:55,217 [7896] DEBUG Servicesys_organize - 获取动态对象
2016-12-18 20:04:55,218 [7896] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '011511'
2016-12-18 20:04:55,220 [7896] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '0115', [OrganizeCode] = '011511', [OrganizeName] = '财务审计科', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 20:04:55' where  OrganizeCode =  '011511'
2016-12-18 20:04:55,224 [7896] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0115','011511','财务审计科','许薛军','2016/12/18 20:04:55','许薛军','2016/12/18 20:04:55')
2016-12-18 20:04:55,226 [7896] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:04:55,228 [7896] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:05:36,963 [6944] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 20:05:37,218 [8116] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 20:05:37,218 [8116] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 20:05:59,064 [10156] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/parameter/Index','/Sys/parameter')
2016-12-18 20:05:59,643 [8548] DEBUG Servicesys_parameter - 获取实体列表
2016-12-18 20:05:59,643 [8548] DEBUG Sys - select top 20 sys_parameter.* from sys_parameter order by ParamCode
2016-12-18 20:05:59,650 [8548] DEBUG Sys - select count(*) from ( select sys_parameter.* from sys_parameter ) tb_temp
2016-12-18 20:06:16,328 [8116] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/log/Index','/Sys/log')
2016-12-18 20:06:17,059 [6944] DEBUG Servicesys_log - 获取实体列表
2016-12-18 20:06:17,060 [6944] DEBUG Sys - select top 20 
        A.*
     from 
        sys_log A
     order by A.ID desc
2016-12-18 20:06:17,066 [6944] DEBUG Sys - select count(*) from ( select 
        A.*
     from 
        sys_log A
     ) tb_temp
2016-12-18 20:06:17,110 [8548] DEBUG Servicesys_loginHistory - 获取实体列表
2016-12-18 20:06:17,110 [8548] DEBUG Sys - select top 20 
        A.*
     from 
        sys_loginHistory A
     order by A.ID desc
2016-12-18 20:06:17,115 [8548] DEBUG Sys - select count(*) from ( select 
        A.*
     from 
        sys_loginHistory A
     ) tb_temp
2016-12-18 20:06:58,160 [3868] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 20:07:00,982 [8116] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/backup/Index','/Sys/backup')
2016-12-18 20:07:16,203 [6944] ERROR /api/sys/backup/getsystembackup - System.FormatException: 该字符串未被识别为有效的 DateTime。
   在 System.DateTimeParse.Parse(String s, DateTimeFormatInfo dtfi, DateTimeStyles styles)
   在 System.Convert.ToDateTime(String value)
   在 Zephyr.Areas.Sys.Controllers.BackupApiController.GetSystemBackup(RequestWrapper request) 位置 e:\BaiduYunDownload\asp.net+Web+mvc4.0 EasyUI 最新 权限管理系统源码教程\BN089-BS开发框架MVC4版\source20131023\Zephyr.Web\Areas\Sys\Controllers\BackupController.cs:行号 84
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2016-12-18 20:08:41,789 [6944] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '01'
2016-12-18 20:09:19,220 [6944] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 20:09:19,222 [6944] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:09:19,222 [6944] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:09:23,118 [10140] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 20:09:23,393 [3868] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:09:23,394 [3868] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:09:23,429 [8116] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:23,430 [8116] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 20:09:23,430 [8116] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 20:09:43,359 [10140] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:43,359 [10140] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0109'))) order by UserSeq
2016-12-18 20:09:43,436 [10140] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0109'))) ) tb_temp
2016-12-18 20:09:46,547 [3868] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:46,547 [3868] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0110'))) order by UserSeq
2016-12-18 20:09:46,561 [3868] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0110'))) ) tb_temp
2016-12-18 20:09:47,497 [8116] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:47,498 [8116] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) order by UserSeq
2016-12-18 20:09:47,513 [8116] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) ) tb_temp
2016-12-18 20:09:48,116 [6944] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:48,116 [6944] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0112'))) order by UserSeq
2016-12-18 20:09:48,133 [6944] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0112'))) ) tb_temp
2016-12-18 20:09:51,372 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:51,373 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011413'))) order by UserSeq
2016-12-18 20:09:51,389 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011413'))) ) tb_temp
2016-12-18 20:09:52,261 [10140] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:52,261 [10140] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011415'))) order by UserSeq
2016-12-18 20:09:52,277 [10140] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011415'))) ) tb_temp
2016-12-18 20:09:52,955 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:52,955 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011416'))) order by UserSeq
2016-12-18 20:09:52,972 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011416'))) ) tb_temp
2016-12-18 20:09:53,906 [3868] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:53,906 [3868] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011414'))) order by UserSeq
2016-12-18 20:09:53,922 [3868] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011414'))) ) tb_temp
2016-12-18 20:09:54,349 [8116] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:54,349 [8116] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011413'))) order by UserSeq
2016-12-18 20:09:54,350 [8116] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011413'))) ) tb_temp
2016-12-18 20:09:54,901 [6944] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:54,901 [6944] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011412'))) order by UserSeq
2016-12-18 20:09:54,917 [6944] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011412'))) ) tb_temp
2016-12-18 20:09:55,348 [8116] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:55,348 [8116] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011411'))) order by UserSeq
2016-12-18 20:09:55,365 [8116] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011411'))) ) tb_temp
2016-12-18 20:09:55,910 [10140] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:55,911 [10140] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011410'))) order by UserSeq
2016-12-18 20:09:55,927 [10140] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011410'))) ) tb_temp
2016-12-18 20:09:56,270 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:56,270 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011409'))) order by UserSeq
2016-12-18 20:09:56,290 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011409'))) ) tb_temp
2016-12-18 20:09:56,619 [10140] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:56,619 [10140] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011404'))) order by UserSeq
2016-12-18 20:09:56,637 [10140] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011404'))) ) tb_temp
2016-12-18 20:09:56,911 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:09:56,912 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011401'))) order by UserSeq
2016-12-18 20:09:56,929 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011401'))) ) tb_temp
2016-12-18 20:10:17,504 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:17,504 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011402'))) order by UserSeq
2016-12-18 20:10:17,526 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011402'))) ) tb_temp
2016-12-18 20:10:18,141 [8116] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:18,141 [8116] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011404'))) order by UserSeq
2016-12-18 20:10:18,143 [8116] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011404'))) ) tb_temp
2016-12-18 20:10:18,543 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:18,543 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011407'))) order by UserSeq
2016-12-18 20:10:18,560 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011407'))) ) tb_temp
2016-12-18 20:10:18,901 [8116] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:18,901 [8116] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011410'))) order by UserSeq
2016-12-18 20:10:18,902 [8116] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011410'))) ) tb_temp
2016-12-18 20:10:19,524 [3868] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:19,525 [3868] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011413'))) order by UserSeq
2016-12-18 20:10:19,525 [3868] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011413'))) ) tb_temp
2016-12-18 20:10:20,275 [10140] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:20,275 [10140] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011417'))) order by UserSeq
2016-12-18 20:10:20,292 [10140] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011417'))) ) tb_temp
2016-12-18 20:10:20,683 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:20,683 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011412'))) order by UserSeq
2016-12-18 20:10:20,684 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011412'))) ) tb_temp
2016-12-18 20:10:21,037 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:21,037 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011408'))) order by UserSeq
2016-12-18 20:10:21,057 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011408'))) ) tb_temp
2016-12-18 20:10:21,446 [8116] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:21,447 [8116] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011404'))) order by UserSeq
2016-12-18 20:10:21,448 [8116] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011404'))) ) tb_temp
2016-12-18 20:10:21,796 [6540] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:21,796 [6540] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011401'))) order by UserSeq
2016-12-18 20:10:21,797 [6540] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','011401'))) ) tb_temp
2016-12-18 20:10:23,727 [8548] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:10:23,727 [8548] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:10:23,749 [8548] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:01,304 [3868] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 20:19:01,512 [1368] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:19:01,512 [1368] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:19:01,670 [8852] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:01,670 [8852] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 20:19:01,671 [8852] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 20:19:26,821 [6964] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:26,821 [6964] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0101'))) order by UserSeq
2016-12-18 20:19:26,838 [6964] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0101'))) ) tb_temp
2016-12-18 20:19:28,894 [8852] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:28,894 [8852] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:19:28,898 [8852] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:29,718 [3868] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:29,718 [3868] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:19:29,720 [3868] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:30,332 [8852] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:30,333 [8852] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:19:30,334 [8852] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:30,543 [3868] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:30,543 [3868] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:19:30,546 [3868] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:30,564 [6964] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:30,564 [6964] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:19:30,566 [6964] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:30,960 [6964] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:30,960 [6964] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:19:30,962 [6964] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:36,723 [1368] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:36,724 [1368] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) order by UserSeq
2016-12-18 20:19:36,726 [1368] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','01'))) ) tb_temp
2016-12-18 20:19:37,410 [1368] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:37,410 [1368] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0101'))) order by UserSeq
2016-12-18 20:19:37,411 [1368] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0101'))) ) tb_temp
2016-12-18 20:19:38,017 [8852] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:38,017 [8852] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0102'))) order by UserSeq
2016-12-18 20:19:38,033 [8852] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0102'))) ) tb_temp
2016-12-18 20:19:38,457 [3868] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:38,457 [3868] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0104'))) order by UserSeq
2016-12-18 20:19:38,476 [3868] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0104'))) ) tb_temp
2016-12-18 20:19:38,803 [6964] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:38,804 [6964] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0109'))) order by UserSeq
2016-12-18 20:19:38,805 [6964] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0109'))) ) tb_temp
2016-12-18 20:19:39,283 [3868] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:39,283 [3868] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) order by UserSeq
2016-12-18 20:19:39,283 [3868] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) ) tb_temp
2016-12-18 20:19:39,691 [6964] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:39,691 [6964] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0112'))) order by UserSeq
2016-12-18 20:19:39,693 [6964] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0112'))) ) tb_temp
2016-12-18 20:19:40,453 [6964] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 20:19:40,649 [1368] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 20:19:40,649 [1368] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 20:19:40,780 [6964] DEBUG Servicesys_user - 获取实体列表
2016-12-18 20:19:40,781 [6964] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 20:19:40,781 [6964] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 20:19:50,862 [1368] DEBUG Sys - 
select distinct A.OrganizeCode,A.OrganizeName,A.ParentCode
,(case when B.UserCode is null then 'false' else 'true' end) as Checked
from sys_organize A
left join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode and B.UserCode = 'super'
2016-12-18 20:20:26,181 [6964] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'super'
2016-12-18 21:12:47,543 [4960] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:12:47,555 [4960] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:12:47,557 [4960] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:12:47,559 [4960] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:12:47,693 [5660] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:12:49,159 [8732] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:16:18,172 [4960] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:16:18,181 [4960] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:16:18,183 [4960] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:16:18,184 [4960] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:16:51,585 [5660] DEBUG Servicesys_user - 获取实体对象
2016-12-18 21:16:51,590 [5660] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  'xxj'and IsEnable =  'True'
2016-12-18 21:16:51,627 [5660] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 21:16:51,646 [5660] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','许薛军','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 21:16:51')
2016-12-18 21:16:51,647 [5660] DEBUG Servicemms_project - 获取实体对象
2016-12-18 21:16:51,647 [5660] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 21:16:51,670 [4420] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:16:52,904 [5660] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:17:53,207 [6944] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:17:53,217 [6944] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:17:53,219 [6944] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:17:53,220 [6944] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:17:53,360 [4420] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:17:54,807 [5096] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:20:52,539 [7104] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:20:52,549 [7104] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:20:52,551 [7104] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:20:52,551 [7104] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:20:52,660 [8968] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:20:53,523 [4420] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:22:41,285 [3076] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:22:41,295 [3076] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:22:41,297 [3076] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:22:41,297 [3076] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:22:41,433 [4420] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:22:42,904 [6740] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:23:51,574 [5952] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:23:51,587 [5952] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:23:51,589 [5952] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:23:51,590 [5952] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:23:51,736 [8968] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:23:53,422 [4420] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:28:20,181 [7320] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:28:20,191 [7320] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:28:20,193 [7320] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:28:20,193 [7320] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:28:20,351 [9004] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:28:21,915 [3876] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:36:09,536 [9092] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:36:09,548 [9092] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:36:09,550 [9092] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:36:09,550 [9092] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:36:09,706 [4420] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:36:11,462 [11216] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:40:51,405 [5272] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:51,418 [5272] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:51,421 [5272] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:51,421 [5272] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:51,574 [10860] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 21:40:54,234 [7224] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:54,244 [7224] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:54,246 [7224] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:54,247 [7224] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 21:40:54,356 [10140] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 21:41:22,797 [8976] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/log/Index','/Sys/log')
2016-12-18 21:41:23,499 [10140] DEBUG Servicesys_loginHistory - 获取实体列表
2016-12-18 21:41:23,499 [8976] DEBUG Servicesys_log - 获取实体列表
2016-12-18 21:41:23,505 [8976] DEBUG Sys - select top 20 
        A.*
     from 
        sys_log A
     order by A.ID desc
2016-12-18 21:41:23,520 [10140] DEBUG Sys - select top 20 
        A.*
     from 
        sys_loginHistory A
     order by A.ID desc
2016-12-18 21:41:23,524 [8976] DEBUG Sys - select count(*) from ( select 
        A.*
     from 
        sys_log A
     ) tb_temp
2016-12-18 21:41:23,536 [10140] DEBUG Sys - select count(*) from ( select 
        A.*
     from 
        sys_loginHistory A
     ) tb_temp
2016-12-18 21:47:04,240 [10844] DEBUG Servicesys_loginHistory - 获取实体列表
2016-12-18 21:47:04,240 [10844] DEBUG Sys - select top 20 
        A.*
     from 
        sys_loginHistory A
     order by A.ID desc
2016-12-18 21:47:04,241 [10844] DEBUG Sys - select count(*) from ( select 
        A.*
     from 
        sys_loginHistory A
     ) tb_temp
2016-12-18 21:47:04,252 [10860] DEBUG Servicesys_log - 获取实体列表
2016-12-18 21:47:04,252 [10860] DEBUG Sys - select top 20 
        A.*
     from 
        sys_log A
     order by A.ID desc
2016-12-18 21:47:04,253 [10860] DEBUG Sys - select count(*) from ( select 
        A.*
     from 
        sys_log A
     ) tb_temp
2016-12-18 21:47:14,359 [10860] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 21:47:14,812 [8296] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 21:47:14,813 [8296] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 21:50:38,365 [9664] DEBUG Servicesys_permission - 编辑记录
2016-12-18 21:50:38,371 [9664] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:50:38,374 [9664] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  '030'
2016-12-18 21:50:38,378 [9664] DEBUG Sys - delete from 
        sys_permission
     where  PermissionCode =  '030'
2016-12-18 21:50:38,383 [9664] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:50:38,383 [9664] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  '01'
2016-12-18 21:50:38,393 [9664] DEBUG Sys - update 
        sys_permission
     set [PermissionCode] = '01', [PermissionName] = '惠州市合作项目', [ParentCode] = '0', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 21:50:38' where  PermissionCode =  '01'
2016-12-18 21:50:38,395 [9664] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:50:38,395 [9664] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  '0102'
2016-12-18 21:50:38,399 [9664] DEBUG Sys - update 
        sys_permission
     set [PermissionCode] = '0102', [PermissionName] = '惠州项目一期', [ParentCode] = '01', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 21:50:38' where  PermissionCode =  '0102'
2016-12-18 21:50:38,401 [9664] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:50:38,401 [9664] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  '02'
2016-12-18 21:50:38,401 [9664] DEBUG Sys - update 
        sys_permission
     set [PermissionCode] = '02', [PermissionName] = '清远市合作项目', [ParentCode] = '0', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 21:50:38' where  PermissionCode =  '02'
2016-12-18 21:50:38,404 [9664] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:50:38,404 [9664] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  '0201'
2016-12-18 21:50:38,404 [9664] DEBUG Sys - update 
        sys_permission
     set [PermissionCode] = '0201', [PermissionName] = '清远项目一期', [ParentCode] = '02', [UpdatePerson] = '许薛军', [UpdateDate] = '2016/12/18 21:50:38' where  PermissionCode =  '0201'
2016-12-18 21:50:38,442 [8296] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 21:50:38,445 [8296] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 21:52:41,275 [10508] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 21:52:41,621 [7544] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 21:52:41,621 [7544] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 21:53:06,845 [10508] DEBUG Servicesys_permission - 编辑记录
2016-12-18 21:53:06,845 [10508] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:53:06,846 [10508] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  'cfdac8e5-3385-449e-88a7-14577e6eed00'
2016-12-18 21:53:06,851 [10508] DEBUG Sys - insert into 
        sys_permission
    ([PermissionCode],[PermissionName],[ParentCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('01','惠州合作项目','','许薛军','2016/12/18 21:53:06','许薛军','2016/12/18 21:53:06')
2016-12-18 21:53:06,913 [8976] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 21:53:06,913 [8976] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 21:53:46,231 [8296] DEBUG Servicesys_permission - 编辑记录
2016-12-18 21:53:46,231 [8296] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:53:46,232 [8296] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  'a34cff01-122b-4c55-9664-66199c56e16d'
2016-12-18 21:53:46,233 [8296] DEBUG Sys - insert into 
        sys_permission
    ([PermissionCode],[PermissionName],[ParentCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0101','惠州项目一期','01','许薛军','2016/12/18 21:53:46','许薛军','2016/12/18 21:53:46')
2016-12-18 21:53:46,314 [7544] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 21:53:46,314 [7544] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 21:54:08,927 [9664] DEBUG Servicesys_permission - 编辑记录
2016-12-18 21:54:08,928 [9664] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:54:08,928 [9664] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  'c25f67ec-d545-4bbf-b5de-573d18bf1e7f'
2016-12-18 21:54:08,929 [9664] DEBUG Sys - insert into 
        sys_permission
    ([PermissionCode],[PermissionName],[ParentCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('02','清远合作项目','','许薛军','2016/12/18 21:54:08','许薛军','2016/12/18 21:54:08')
2016-12-18 21:54:08,971 [10844] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 21:54:08,971 [10844] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 21:54:27,241 [10508] DEBUG Servicesys_permission - 编辑记录
2016-12-18 21:54:27,241 [10508] DEBUG Servicesys_permission - 获取动态对象
2016-12-18 21:54:27,242 [10508] DEBUG Sys - select 
        sys_permission
    .* from 
        sys_permission
     where  PermissionCode =  '02298a7e-5804-410e-bece-f99ee8e48089'
2016-12-18 21:54:27,243 [10508] DEBUG Sys - insert into 
        sys_permission
    ([PermissionCode],[PermissionName],[ParentCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('0201','清远项目一期','02','许薛军','2016/12/18 21:54:27','许薛军','2016/12/18 21:54:27')
2016-12-18 21:54:27,295 [10032] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 21:54:27,295 [10032] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 21:55:28,679 [8976] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 21:55:29,154 [8296] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 21:55:29,154 [8296] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 21:55:37,449 [10508] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '9910' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 21:55:47,956 [10844] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 21:55:47,960 [10844] DEBUG Servicesys_user - 获取动态列表
2016-12-18 21:55:47,960 [10844] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 21:55:47,961 [10844] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 21:55:47,961 [10844] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 21:55:48,428 [7544] DEBUG Servicesys_role - 获取实体列表
2016-12-18 21:55:48,428 [7544] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 21:55:55,974 [8296] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2016-12-18 21:56:05,122 [8296] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2016-12-18 21:56:05,127 [8296] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 21:56:05,127 [8296] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 21:56:16,628 [10508] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 21:56:17,038 [8296] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 21:56:17,039 [8296] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 21:56:17,152 [10860] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:56:17,152 [10860] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 21:56:17,159 [10860] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 21:56:40,528 [8296] DEBUG Sys - 
select distinct A.OrganizeCode,A.OrganizeName,A.ParentCode
,(case when B.UserCode is null then 'false' else 'true' end) as Checked
from sys_organize A
left join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode and B.UserCode = 'super'
2016-12-18 21:56:43,180 [10844] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'super'
2016-12-18 21:56:45,771 [7544] DEBUG Servicesys_userSetting - 获取实体列表
2016-12-18 21:56:45,771 [7544] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'super'
2016-12-18 21:56:55,280 [10860] DEBUG Sys - 
select distinct A.OrganizeCode,A.OrganizeName,A.ParentCode
,(case when B.UserCode is null then 'false' else 'true' end) as Checked
from sys_organize A
left join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode and B.UserCode = 'super'
2016-12-18 21:56:59,896 [10844] DEBUG Servicesys_user - 设置用户机构
2016-12-18 21:56:59,897 [10844] DEBUG Sys - delete from sys_userOrganizeMap where [UserCode] = 'super'
2016-12-18 21:56:59,899 [10844] DEBUG Sys - insert into sys_userOrganizeMap([UserCode],[OrganizeCode]) values('super','01')
2016-12-18 21:57:33,710 [10860] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:33,710 [10860] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0112'))) order by UserSeq
2016-12-18 21:57:33,711 [10860] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0112'))) ) tb_temp
2016-12-18 21:57:35,391 [10508] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:35,392 [10508] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0110'))) order by UserSeq
2016-12-18 21:57:35,393 [10508] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0110'))) ) tb_temp
2016-12-18 21:57:35,798 [8296] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:35,800 [8296] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0108'))) order by UserSeq
2016-12-18 21:57:35,819 [8296] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0108'))) ) tb_temp
2016-12-18 21:57:36,143 [10508] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:36,143 [10508] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0104'))) order by UserSeq
2016-12-18 21:57:36,145 [10508] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0104'))) ) tb_temp
2016-12-18 21:57:36,571 [8296] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:36,571 [8296] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0102'))) order by UserSeq
2016-12-18 21:57:36,573 [8296] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0102'))) ) tb_temp
2016-12-18 21:57:36,951 [10508] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:36,952 [10508] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0101'))) order by UserSeq
2016-12-18 21:57:36,952 [10508] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0101'))) ) tb_temp
2016-12-18 21:57:37,389 [10844] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:37,389 [10844] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0104'))) order by UserSeq
2016-12-18 21:57:37,391 [10844] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0104'))) ) tb_temp
2016-12-18 21:57:37,781 [10860] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:37,782 [10860] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0106'))) order by UserSeq
2016-12-18 21:57:37,800 [10860] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0106'))) ) tb_temp
2016-12-18 21:57:38,459 [10844] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:38,459 [10844] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0108'))) order by UserSeq
2016-12-18 21:57:38,460 [10844] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0108'))) ) tb_temp
2016-12-18 21:57:38,879 [10844] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:38,880 [10844] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0109'))) order by UserSeq
2016-12-18 21:57:38,885 [10844] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0109'))) ) tb_temp
2016-12-18 21:57:39,359 [10860] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:39,360 [10860] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) order by UserSeq
2016-12-18 21:57:39,360 [10860] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) ) tb_temp
2016-12-18 21:57:39,784 [8296] DEBUG Servicesys_user - 获取实体列表
2016-12-18 21:57:39,784 [8296] DEBUG Sys - select top 20 sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) order by UserSeq
2016-12-18 21:57:39,784 [8296] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user where  UserCode in (select UserCode from sys_userOrganizeMap where OrganizeCode in (select ID from [dbo].[GetChild]('sys_organize','0111'))) ) tb_temp
2016-12-18 22:01:59,422 [8296] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 22:01:59,699 [10508] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 22:01:59,699 [10508] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 22:02:02,020 [10860] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 22:02:02,021 [10860] DEBUG Servicesys_user - 获取动态列表
2016-12-18 22:02:02,021 [10860] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 22:02:02,021 [10860] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 22:02:02,021 [10860] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 22:02:02,224 [10508] DEBUG Servicesys_role - 获取实体列表
2016-12-18 22:02:02,224 [10508] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 22:02:04,364 [8296] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 22:02:04,366 [8296] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 22:02:04,393 [10860] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 22:02:04,394 [10860] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 22:02:04,406 [8296] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 22:02:29,568 [10860] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 22:02:29,834 [10616] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:02:29,834 [10616] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:03:42,237 [10616] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 22:03:42,444 [10508] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 22:03:42,444 [10508] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 22:03:42,594 [10860] DEBUG Servicesys_user - 获取实体列表
2016-12-18 22:03:42,594 [10860] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 22:03:42,595 [10860] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 22:03:45,845 [6664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 22:03:45,846 [6664] DEBUG Servicesys_user - 获取动态列表
2016-12-18 22:03:45,847 [6664] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 22:03:45,847 [6664] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 22:03:45,847 [6664] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 22:03:46,073 [10508] DEBUG Servicesys_role - 获取实体列表
2016-12-18 22:03:46,073 [10508] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 22:03:48,301 [8296] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 22:03:48,303 [8296] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 22:03:48,308 [8296] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 22:03:48,342 [10616] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 22:03:48,343 [10616] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 22:04:02,965 [10616] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 22:04:02,967 [10616] DEBUG Servicesys_user - 获取动态列表
2016-12-18 22:04:02,967 [10616] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 22:04:02,967 [10616] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 22:04:02,967 [10616] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 22:04:03,260 [10508] DEBUG Servicesys_role - 获取实体列表
2016-12-18 22:04:03,260 [10508] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 22:04:03,854 [6664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 22:04:03,855 [6664] DEBUG Servicesys_user - 获取动态列表
2016-12-18 22:04:03,856 [6664] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 22:04:03,856 [6664] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 22:04:03,856 [6664] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 22:04:04,058 [8296] DEBUG Servicesys_role - 获取实体列表
2016-12-18 22:04:04,058 [8296] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 22:04:05,239 [10508] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 22:04:05,240 [10508] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 22:04:05,243 [10508] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 22:04:05,289 [6664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 22:04:05,289 [6664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 22:04:11,797 [6664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 22:04:11,965 [8296] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:04:11,965 [8296] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:04:20,951 [10860] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '9915' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 22:04:38,004 [10508] DEBUG Servicesys_menu - 编辑记录
2016-12-18 22:04:38,005 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:04:38,006 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9915'
2016-12-18 22:04:38,009 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='9915'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='9915'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='9915'
) 
2016-12-18 22:04:38,031 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '9915'
2016-12-18 22:04:38,036 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:04:38,036 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9920'
2016-12-18 22:04:38,036 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='9920'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='9920'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='9920'
) 
2016-12-18 22:04:38,046 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '9920'
2016-12-18 22:04:38,046 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:04:38,046 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9950'
2016-12-18 22:04:38,046 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='9950'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='9950'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='9950'
) 
2016-12-18 22:04:38,047 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '9950'
2016-12-18 22:04:38,047 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:04:38,047 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9960'
2016-12-18 22:04:38,047 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='9960'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='9960'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='9960'
) 
2016-12-18 22:04:38,047 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '9960'
2016-12-18 22:04:38,048 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:04:38,048 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9961'
2016-12-18 22:04:38,048 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='9961'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='9961'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='9961'
) 
2016-12-18 22:04:38,048 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '9961'
2016-12-18 22:04:38,054 [10508] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','许薛军','api/mms/send','菜单数据','修改','{"list":{"deleted":[{"_id":"9915","MenuName":"大数据测试","MenuCode":"9915","ParentCode":"98","IconClass":"icon-application_view_detail","URL":"/mms/test","IsVisible":true,"IsEnable":true,"MenuSeq":""},{"_id":"9920","MenuName":"产品测试","MenuCode":"9920","ParentCode":"98","IconClass":"icon-application_side_list","URL":"/mms/product","IsVisible":true,"IsEnable":true,"MenuSeq":""},{"_id":"9950","MenuName":"测试1","MenuCode":"9950","ParentCode":"98","IconClass":"icon-application_cascade","URL":"/mms/liy","IsVisible":true,"IsEnable":true,"MenuSeq":""},{"_id":"9960","MenuName":"员工测试2","MenuCode":"9960","ParentCode":"98","IconClass":"icon-user_b","URL":"/mms/staff","IsVisible":true,"IsEnable":true,"MenuSeq":""},{"_id":"9961","MenuName":"员工编辑","MenuCode":"9961","ParentCode":"98","IconClass":"","URL":"/mms/staff/edit","IsVisible":true,"IsEnable":true,"MenuSeq":""}],"inserted":[],"updated":[],"_changed":true}}','2016/12/18 22:04:38')
2016-12-18 22:04:38,127 [10860] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:04:38,127 [10860] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:04:42,040 [6664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 22:04:42,041 [6664] DEBUG Servicesys_user - 获取动态列表
2016-12-18 22:04:42,041 [6664] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 22:04:42,042 [6664] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 22:04:42,042 [6664] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 22:04:42,240 [10508] DEBUG Servicesys_role - 获取实体列表
2016-12-18 22:04:42,240 [10508] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 22:04:43,221 [8296] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 22:04:43,222 [8296] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 22:04:43,224 [8296] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 22:04:43,254 [6664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 22:04:43,254 [6664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 22:04:51,053 [6664] DEBUG Servicesys_role - 修改角色菜单权限
2016-12-18 22:04:51,054 [6664] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2016-12-18 22:04:51,055 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2016-12-18 22:04:51,057 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2016-12-18 22:04:51,059 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2016-12-18 22:04:51,063 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2016-12-18 22:04:51,063 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2016-12-18 22:04:51,064 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2016-12-18 22:04:51,064 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2016-12-18 22:04:51,064 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2016-12-18 22:04:51,064 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2016-12-18 22:04:51,065 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9909')
2016-12-18 22:04:51,065 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9908')
2016-12-18 22:04:51,065 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2016-12-18 22:04:51,065 [6664] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2016-12-18 22:04:51,068 [6664] DEBUG Servicesys_role - 修改角色菜单按钮权限
2016-12-18 22:04:51,068 [6664] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2016-12-18 22:04:51,071 [6664] DEBUG Servicesys_role - 修改角色数据权限
2016-12-18 22:04:51,072 [6664] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2016-12-18 22:04:51,074 [6664] DEBUG Servicesys_role - 修改角色数据列权限
2016-12-18 22:04:51,076 [6664] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2016-12-18 22:04:54,161 [10860] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2016-12-18 22:04:54,347 [8296] DEBUG Servicesys_organize - 获取实体列表
2016-12-18 22:04:54,348 [8296] DEBUG Sys - select sys_organize.* from sys_organize
2016-12-18 22:04:54,462 [10508] DEBUG Servicesys_user - 获取实体列表
2016-12-18 22:04:54,462 [10508] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2016-12-18 22:04:54,463 [10508] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2016-12-18 22:05:00,677 [6664] DEBUG Sys - 
select distinct A.OrganizeCode,A.OrganizeName,A.ParentCode
,(case when B.UserCode is null then 'false' else 'true' end) as Checked
from sys_organize A
left join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode and B.UserCode = 'super'
2016-12-18 22:05:02,755 [6664] DEBUG Servicesys_user - 设置用户机构
2016-12-18 22:05:02,757 [6664] DEBUG Sys - delete from sys_userOrganizeMap where [UserCode] = 'super'
2016-12-18 22:05:02,758 [6664] DEBUG Sys - insert into sys_userOrganizeMap([UserCode],[OrganizeCode]) values('super','01')
2016-12-18 22:05:16,625 [11164] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 22:05:16,869 [10508] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:05:16,869 [10508] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:05:51,672 [10508] DEBUG Servicesys_menu - 编辑记录
2016-12-18 22:05:51,672 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:05:51,672 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0102'
2016-12-18 22:05:51,673 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='0102'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='0102'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='0102'
) 
2016-12-18 22:05:51,673 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '0102'
2016-12-18 22:05:51,673 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:05:51,674 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0103'
2016-12-18 22:05:51,674 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='0103'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='0103'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='0103'
) 
2016-12-18 22:05:51,674 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '0103'
2016-12-18 22:05:51,675 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:05:51,675 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0104'
2016-12-18 22:05:51,675 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='0104'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='0104'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='0104'
) 
2016-12-18 22:05:51,675 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '0104'
2016-12-18 22:05:51,676 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:05:51,676 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0106'
2016-12-18 22:05:51,676 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='0106'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='0106'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='0106'
) 
2016-12-18 22:05:51,676 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '0106'
2016-12-18 22:05:51,677 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:05:51,677 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '0107'
2016-12-18 22:05:51,677 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='0107'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='0107'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='0107'
) 
2016-12-18 22:05:51,677 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '0107'
2016-12-18 22:05:51,678 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:05:51,678 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '01'
2016-12-18 22:05:51,678 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='01'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='01'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='01'
) 
2016-12-18 22:05:51,706 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '01'
2016-12-18 22:05:51,707 [10508] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','许薛军','api/mms/send','菜单数据','修改','{"list":{"deleted":[{"_id":"0102","MenuName":"收货管理","MenuCode":"0102","ParentCode":"01","IconClass":"icon-brick_add","URL":"/psi/receive","IsVisible":true,"IsEnable":true,"MenuSeq":"1020"},{"_id":"0103","MenuName":"领货管理","MenuCode":"0103","ParentCode":"01","IconClass":"icon-cart_remove","URL":"/psi/picking","IsVisible":true,"IsEnable":true,"MenuSeq":"1030"},{"_id":"0104","MenuName":"退还管理","MenuCode":"0104","ParentCode":"01","IconClass":"icon-cart_put","URL":"/psi/return","IsVisible":true,"IsEnable":true,"MenuSeq":"1040"},{"_id":"0106","MenuName":"库存管理","MenuCode":"0106","ParentCode":"01","IconClass":"icon-table_row","URL":"/psi/warehouse/stock","IsVisible":true,"IsEnable":true,"MenuSeq":"1050"},{"_id":"0107","MenuName":"采购计划","MenuCode":"0107","ParentCode":"01","IconClass":"","URL":"","IsVisible":true,"IsEnable":true,"MenuSeq":"1060"},{"_id":"01","MenuName":"仓库管理","MenuCode":"01","ParentCode":"","IconClass":"icon-application_home","URL":"#","IsVisible":true,"IsEnable":true,"MenuSeq":"10"}],"inserted":[],"updated":[],"_changed":true}}','2016/12/18 22:05:51')
2016-12-18 22:05:51,793 [10860] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:05:51,794 [10860] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:05:55,641 [10860] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2016-12-18 22:05:55,642 [10860] DEBUG Servicesys_user - 获取动态列表
2016-12-18 22:05:55,642 [10860] DEBUG Sys - select UserCode,UserName from sys_user
2016-12-18 22:05:55,643 [10860] DEBUG Servicesys_organize - 获取动态列表
2016-12-18 22:05:55,643 [10860] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2016-12-18 22:05:55,828 [10556] DEBUG Servicesys_role - 获取实体列表
2016-12-18 22:05:55,828 [10556] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2016-12-18 22:05:56,893 [11164] DEBUG Sys - select * from sys_button order by ButtonSeq
2016-12-18 22:05:56,894 [11164] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2016-12-18 22:05:56,896 [11164] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2016-12-18 22:05:56,923 [6664] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 22:05:56,923 [6664] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2016-12-18 22:06:10,534 [10860] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 22:06:10,732 [4412] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:06:10,732 [4412] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:06:20,925 [10508] DEBUG Servicesys_menu - 编辑记录
2016-12-18 22:06:20,925 [10508] DEBUG Servicesys_menu - 获取动态对象
2016-12-18 22:06:20,929 [10508] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9930'
2016-12-18 22:06:20,930 [10508] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='9930'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='9930'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='9930'
) 
2016-12-18 22:06:20,930 [10508] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '9930'
2016-12-18 22:06:20,932 [10508] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','许薛军','api/mms/send','菜单数据','修改','{"list":{"deleted":[{"_id":"9930","MenuName":"测试页面","MenuCode":"9930","ParentCode":"10","IconClass":"icon-anchor","URL":"/mms/productTest","IsVisible":true,"IsEnable":true,"MenuSeq":""}],"inserted":[],"updated":[],"_changed":true}}','2016/12/18 22:06:20')
2016-12-18 22:06:21,020 [11164] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:06:21,020 [11164] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:06:49,712 [11164] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 22:06:50,824 [4412] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 22:06:54,198 [11164] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2016-12-18 22:11:01,005 [10556] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2016-12-18 22:11:03,872 [4412] DEBUG Mms - SELECT Name as TableName FROM sys.tables order by Name
2016-12-18 22:11:43,051 [10860] DEBUG Mms - SELECT Name as TableName FROM sys.tables order by Name
2016-12-18 22:11:43,071 [8608] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2016-12-18 22:11:43,142 [11164] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2016-12-18 22:11:44,035 [4412] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_checkDetail')
ORDER BY sys.columns.column_id
2016-12-18 22:11:44,134 [10860] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_checkDetail')
ORDER BY sys.columns.column_id
2016-12-18 22:19:57,162 [4412] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 22:19:57,374 [11164] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 22:19:57,374 [11164] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 22:21:14,059 [8608] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1105' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 22:21:16,679 [6664] DEBUG Servicesys_button - 获取实体列表
2016-12-18 22:21:16,679 [6664] DEBUG Sys - select sys_button.* from sys_button order by ButtonSeq
2016-12-18 22:21:32,245 [10556] DEBUG Servicesys_button - 获取实体列表
2016-12-18 22:21:32,245 [10556] DEBUG Sys - select sys_button.* from sys_button order by ButtonSeq
2016-12-18 22:36:07,766 [10556] DEBUG Servicesys_button - 编辑记录
2016-12-18 22:36:07,766 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,776 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'add'
2016-12-18 22:36:07,778 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'add'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='add' 
2016-12-18 22:36:07,780 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'add'
2016-12-18 22:36:07,786 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,786 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'browse'
2016-12-18 22:36:07,787 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'browse'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='browse' 
2016-12-18 22:36:07,789 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'browse'
2016-12-18 22:36:07,789 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,789 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'edit'
2016-12-18 22:36:07,789 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'edit'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='edit' 
2016-12-18 22:36:07,791 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'edit'
2016-12-18 22:36:07,791 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,791 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'delete'
2016-12-18 22:36:07,791 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'delete'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='delete' 
2016-12-18 22:36:07,791 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'delete'
2016-12-18 22:36:07,791 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,791 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'search'
2016-12-18 22:36:07,792 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'search'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='search' 
2016-12-18 22:36:07,792 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'search'
2016-12-18 22:36:07,792 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,792 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'refresh'
2016-12-18 22:36:07,792 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'refresh'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='refresh' 
2016-12-18 22:36:07,793 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'refresh'
2016-12-18 22:36:07,794 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,794 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'export'
2016-12-18 22:36:07,794 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'export'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='export' 
2016-12-18 22:36:07,794 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'export'
2016-12-18 22:36:07,794 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,794 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'download'
2016-12-18 22:36:07,794 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'download'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='download' 
2016-12-18 22:36:07,796 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'download'
2016-12-18 22:36:07,796 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,796 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'print'
2016-12-18 22:36:07,797 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'print'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='print' 
2016-12-18 22:36:07,799 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'print'
2016-12-18 22:36:07,799 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,799 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'accredit'
2016-12-18 22:36:07,799 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'accredit'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='accredit' 
2016-12-18 22:36:07,801 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'accredit'
2016-12-18 22:36:07,801 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,802 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'audit'
2016-12-18 22:36:07,802 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'audit'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='audit' 
2016-12-18 22:36:07,803 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'audit'
2016-12-18 22:36:07,803 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,803 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'inport'
2016-12-18 22:36:07,804 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'inport'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='inport' 
2016-12-18 22:36:07,806 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'inport'
2016-12-18 22:36:07,807 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,807 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'copy'
2016-12-18 22:36:07,807 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'copy'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='copy' 
2016-12-18 22:36:07,808 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'copy'
2016-12-18 22:36:07,808 [10556] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:36:07,808 [10556] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'save'
2016-12-18 22:36:07,809 [10556] DEBUG Sys - 
--删除角色菜单按钮Map
delete sys_roleMenuButtonMap 
where ButtonCode = 'save'

--删除菜单按钮Map
delete sys_menuButtonMap 
where ButtonCode ='save' 
2016-12-18 22:36:07,809 [10556] DEBUG Sys - delete from sys_button where  ButtonCode =  'save'
2016-12-18 22:36:07,849 [6664] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1105' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 22:36:14,427 [11164] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1105' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 22:36:40,798 [4412] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1105' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 22:36:41,921 [3864] DEBUG Servicesys_button - 获取实体列表
2016-12-18 22:36:41,921 [3864] DEBUG Sys - select sys_button.* from sys_button order by ButtonSeq
2016-12-18 22:44:24,483 [6664] DEBUG Servicesys_button - 编辑记录
2016-12-18 22:44:24,484 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,494 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'add'
2016-12-18 22:44:24,495 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('add','新增','icon-add','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,497 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,497 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'browse'
2016-12-18 22:44:24,499 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('browse','浏览','icon-folder_magnify','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,501 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,501 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'edit'
2016-12-18 22:44:24,501 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('edit','编辑','icon-edit','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,502 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,502 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'delete'
2016-12-18 22:44:24,502 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('delete','删除','icon-cross','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,504 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,504 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'search'
2016-12-18 22:44:24,504 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('search','搜索','icon-zoom','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,509 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,509 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'refresh'
2016-12-18 22:44:24,510 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('refresh','刷新','icon-arrow_refresh','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,511 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,511 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'export'
2016-12-18 22:44:24,512 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('export','导出','icon-page_white_go','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,514 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,514 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'download'
2016-12-18 22:44:24,514 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('download','下载','icon-download','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,516 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,516 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'print'
2016-12-18 22:44:24,516 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('print','打印','icon-printer','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,519 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,519 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'accredit'
2016-12-18 22:44:24,519 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('accredit','授权','icon-wrench_orange','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,520 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,520 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'audit'
2016-12-18 22:44:24,520 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('audit','审核','icon-folder_key','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,521 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,521 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'import'
2016-12-18 22:44:24,521 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('import','导入','icon-page_white_excel','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,522 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,522 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'copy'
2016-12-18 22:44:24,523 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('copy','复制','icon-page_copy','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,524 [6664] DEBUG Servicesys_button - 获取动态对象
2016-12-18 22:44:24,524 [6664] DEBUG Sys - select sys_button.* from sys_button where  ButtonCode =  'save'
2016-12-18 22:44:24,524 [6664] DEBUG Sys - insert into sys_button([ButtonCode],[ButtonName],[ButtonIcon],[ButtonSeq],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('save','保存','icon-save','','','许薛军','2016/12/18 22:44:24','许薛军','2016/12/18 22:44:24')
2016-12-18 22:44:24,578 [10860] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1105' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2016-12-18 22:49:29,282 [11020] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2016-12-18 23:17:34,664 [7320] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:17:34,676 [7320] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:17:34,679 [7320] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:17:34,681 [7320] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:17:34,683 [7320] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:17:34,687 [7320] DEBUG Pyn - 
--set ANSI_NULLS ON
--set QUOTED_IDENTIFIER ON
 
-- =============================================
-- Description:	提供中文首字母
-- Demo: select * from 表 where fun_getPY(字段) like N'%zgr%'
-- =============================================
CREATE FUNCTION [dbo].[fun_getPY]
(
	@str NVARCHAR(4000)
)
RETURNS NVARCHAR(4000)
AS
BEGIN
	DECLARE @word NCHAR(1),@PY NVARCHAR(4000)
	SET @PY=''
	WHILE len(@str)>0
	BEGIN
		SET @word=left(@str,1)
		SET @PY=@PY+(CASE WHEN unicode(@word) BETWEEN 19968 AND 19968+20901
		THEN (SELECT TOP 1 PY FROM (
		SELECT 'A' AS PY,N'' AS word
		UNION ALL SELECT 'B',N'簿'
		UNION ALL SELECT 'C',N'e'
		UNION ALL SELECT 'D',N'z'
		UNION ALL SELECT 'E',N''
		UNION ALL SELECT 'F',N'v'
		UNION ALL SELECT 'G',N'B'
		UNION ALL SELECT 'H',N''
		UNION ALL SELECT 'J',N'h'
		UNION ALL SELECT 'K',N'i'
		UNION ALL SELECT 'L',N'w'
		UNION ALL SELECT 'M',N''
		UNION ALL SELECT 'N',N''
		UNION ALL SELECT 'O',N'a'
		UNION ALL SELECT 'P',N'曝'
		UNION ALL SELECT 'Q',N''
		UNION ALL SELECT 'R',N'U'
		UNION ALL SELECT 'S',N'R'
		UNION ALL SELECT 'T',N'X'
		UNION ALL SELECT 'W',N'F'
		UNION ALL SELECT 'X',N'R'
		UNION ALL SELECT 'Y',N''
		UNION ALL SELECT 'Z',N''
		) T 
		WHERE word>=@word COLLATE Chinese_PRC_CS_AS_KS_WS 
		ORDER BY PY ASC) ELSE @word END)
		SET @str=right(@str,len(@str)-1)
	END
	RETURN @PY
END
2016-12-18 23:17:34,752 [7320] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:17:34,918 [6800] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 23:17:36,087 [10340] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 23:17:36,092 [10340] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 23:17:38,529 [6800] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 23:17:38,530 [6800] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 23:17:38,541 [6800] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 23:22:32,613 [10668] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2016-12-18 23:22:33,033 [8432] DEBUG Servicesys_permission - 获取动态列表
2016-12-18 23:22:33,033 [8432] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2016-12-18 23:22:37,686 [8432] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/code/Index','/Sys/code')
2016-12-18 23:22:38,124 [6800] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 23:22:38,125 [6800] DEBUG Sys - select sys_codeType.* from sys_codeType order by Seq,CodeType
2016-12-18 23:22:38,237 [10296] DEBUG Servicesys_code - 获取实体列表
2016-12-18 23:22:38,238 [10296] DEBUG Sys - select top 20 sys_code.* from sys_code order by Seq
2016-12-18 23:22:38,251 [10296] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2016-12-18 23:22:44,269 [10340] DEBUG Servicesys_codeType - 获取动态列表
2016-12-18 23:22:44,269 [10340] DEBUG Sys - select top 10 sys_codeType.* from sys_codeType order by Seq,CodeType
2016-12-18 23:22:44,271 [10340] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2016-12-18 23:32:32,952 [10340] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 23:32:32,954 [10340] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 23:32:32,955 [10340] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 23:33:40,092 [4148] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:33:40,121 [4148] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:33:40,130 [4148] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:33:40,134 [4148] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:33:40,143 [4148] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:33:40,149 [4148] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:35:53,673 [8088] DEBUG Servicesys_user - 获取实体对象
2016-12-18 23:35:53,682 [8088] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  'xxj'and IsEnable =  'True'
2016-12-18 23:35:53,734 [8088] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2016-12-18 23:35:53,773 [8088] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','许薛军','170KOLDN5WNNJFX','localhost','广东省深圳市','2016/12/18 23:35:53')
2016-12-18 23:35:53,790 [8088] DEBUG Servicemms_project - 获取实体对象
2016-12-18 23:35:53,790 [8088] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2016-12-18 23:35:53,967 [6292] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 23:35:56,500 [7480] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 23:38:19,893 [7556] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:38:19,916 [7556] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:38:19,923 [7556] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:38:19,927 [7556] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:38:19,936 [7556] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:38:19,941 [7556] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:38:20,259 [4224] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 23:38:25,528 [10776] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 23:39:57,950 [10608] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:39:57,979 [10608] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:39:57,986 [10608] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:39:57,992 [10608] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:39:58,000 [10608] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:39:58,005 [10608] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:39:58,354 [2056] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 23:40:01,400 [10604] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 23:43:23,414 [11180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:43:23,437 [11180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:43:23,444 [11180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:43:23,449 [11180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:43:23,455 [11180] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:43:23,460 [11180] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:43:23,782 [3608] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 23:43:28,894 [5500] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2016-12-18 23:43:40,558 [5500] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2016-12-18 23:43:44,835 [10096] DEBUG Servicesys_menu - 获取动态列表
2016-12-18 23:43:44,843 [10096] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2016-12-18 23:47:46,991 [5500] DEBUG ServiceModelBase - 获取动态列表
2016-12-18 23:47:46,991 [5500] DEBUG Mms - select top 20 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   order by ProjectCode
2016-12-18 23:47:47,001 [5500] DEBUG Mms - select count(*) from ( select 
    ProjectName as text,ProjectCode as value
   from 
    mms_project
   ) tb_temp
2016-12-18 23:50:54,406 [6656] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:50:54,432 [6656] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:50:54,438 [6656] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:50:54,444 [6656] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:50:54,451 [6656] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:50:54,455 [6656] DEBUG Pyn - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2016-12-18 23:50:54,746 [10872] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2016-12-18 23:50:56,695 [11172] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
